{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\19065019\\\\react-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\19065019\\\\react-test\\\\src\\\\components\\\\ItemListing\\\\index.js\";\nimport React, { Component } from 'react';\nimport './index.css';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport { CellMeasurer, CellMeasurerCache, createMasonryCellPositioner, Masonry, AutoSizer } from 'react-virtualized'; // Black list for individual sub categories\n\nconst blacklistSubcategories = [\"Monster Battle\", \"Skill Effect\", \"Pet Use\", \"Test Armor\", \"Test Weapon\", \"Shovel\", \"Pickaxe\", \"Totem\"]; // White list for categories\n\nconst applicableCategories = {\n  character: ['Character', 'Armor', 'Accessory', 'Mount', 'One-Handed Weapon', 'Two-Handed Weapon'],\n  pet: ['Other']\n}; // White list for individual sub categories\n\nconst applicableSubcategories = {\n  pet: ['Pet Equipment']\n};\nlet cellMeasurerCache = null;\nconst region = !localStorage['region'] ? 'KMS' : localStorage['region'];\nconst version = !localStorage['version'] ? '328' : localStorage['version'];\nconst itemListPromise = axios.get(`https://maplestory.io/api/KMS/328/item/category/equip`);\nconst chairListPromise = axios.get(`https://maplestory.io/api/KMS/328/item/category/setup`);\n\nclass ItemListing extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      categories: {},\n      categoryNames: {},\n      selectedCategory: null,\n      search: '',\n      gutterSize: 6,\n      columnWidth: 32,\n      categoryNameSelected: '',\n      selectedGender: '',\n      cashItemsOnly: false,\n      similarItems: null\n    };\n    this._cache = cellMeasurerCache = new CellMeasurerCache({\n      defaultHeight: 32,\n      defaultWidth: 32,\n      fixedWidth: true,\n      fixedHeight: true\n    });\n    Promise.all([itemListPromise, chairListPromise]).then(responses => {\n      if (!_.every(responses, res => res.status === 200)) return;\n      const setupData = responses[1].data;\n      const chairData = setupData.filter(item => Math.floor(item.id / 10000) === 301).map(chair => {\n        chair.typeInfo.category = \"Character\"; // That way it shows up as part of the character section\n\n        return chair;\n      });\n      const itemData = responses[0].data || [] || [];\n\n      const groupedHair = _.map(_.groupBy(itemData.filter(item => item.id >= 30000 && item.id <= 60000), item => Math.floor(item.id / 10)), itemGrouping => {\n        const firstItem = itemGrouping[0];\n        firstItem.similar = itemGrouping;\n        return firstItem;\n      });\n\n      const groupedFaces = _.map(_.groupBy(itemData.filter(item => item.id >= 10000 && item.id < 30000), item => item.id % 100 + (item.id - item.id % 1000)), itemGrouping => {\n        const firstItem = itemGrouping[0];\n        firstItem.similar = itemGrouping;\n        return firstItem;\n      });\n\n      const categories = _.mapValues(_.groupBy(itemData.filter(item => item.id < 10000 || item.id > 50000).concat(groupedHair).concat(groupedFaces).concat(chairData), item => item.typeInfo.category), items => _.groupBy(items, item => item.typeInfo.subCategory));\n\n      const categoryNames = _.mapValues(categories, _.keys);\n\n      const categoryNamesKeys = _.keys(categoryNames).filter(categoryName => categoryName != 'Character');\n\n      categoryNamesKeys.unshift('Character');\n      this.setState({\n        items: itemData,\n        categories,\n        categoryNames,\n        categoryNamesKeys\n      });\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          categoryNames = _this$state.categoryNames,\n          categoryNamesKeys = _this$state.categoryNamesKeys,\n          selectedCategory = _this$state.selectedCategory,\n          items = _this$state.items,\n          categoryNameSelected = _this$state.categoryNameSelected,\n          cashItemsOnly = _this$state.cashItemsOnly,\n          selectedGender = _this$state.selectedGender,\n          similarItems = _this$state.similarItems;\n    const search = this.state.search.toLowerCase();\n    const localized = this.props.localized;\n    if (search) console.log(`Searching for ${search}`);\n    const selectedType = this.props.target.type || 'character';\n    const applicableItems = (items || []).filter(item => {\n      return applicableCategories[selectedType].indexOf(item.typeInfo.category) !== -1 && blacklistSubcategories.indexOf(item.typeInfo.subCategory) === -1 && (!applicableSubcategories[selectedType] || applicableSubcategories[selectedType].indexOf(item.typeInfo.subCategory) !== -1);\n    });\n    this.showIcons = !search ? selectedCategory || applicableItems : applicableItems.filter((item, i) => {\n      return (item.name || '').toLowerCase().indexOf(search) !== -1 || item.id.toString().toLowerCase().indexOf(search) !== -1 || (item.desc || '').toLowerCase().indexOf(search) !== -1;\n    });\n    if (cashItemsOnly) this.showIcons = this.showIcons.filter(item => item.isCash);\n    if (selectedGender) this.showIcons = this.showIcons.filter(c => c.requiredGender == selectedGender);\n    this.showIcons = this.showIcons.filter(item => item && item.id);\n    return React.createElement(\"div\", {\n      className: \"item-listing\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item-listing-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"search\",\n      value: search,\n      onChange: this.search.bind(this),\n      placeholder: \"Search..\",\n      className: \"item-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"filters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      onChange: this.toggleCashItems.bind(this),\n      checked: this.cashItemsOnly,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), localized.isCashFilter), React.createElement(\"select\", {\n      onChange: this.changeGender.bind(this),\n      value: this.selectedGender,\n      className: \"gender-select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, localized.genderFilter), React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, localized.male), React.createElement(\"option\", {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, localized.female), React.createElement(\"option\", {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, localized.universal))), React.createElement(\"div\", {\n      className: \"item-listing-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item-listing-categories\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, _.map((categoryNamesKeys || []).filter(categoryName => applicableCategories[selectedType].indexOf(categoryName) !== -1), category => {\n      const subCategories = categoryNames[category];\n      return React.createElement(\"li\", {\n        key: category,\n        onClick: this.selectPrimaryCategory.bind(this, category),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: 'category' + (category === categoryNameSelected ? ' active' : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, category === \"Character\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, localized.charactor) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), category === \"Armor\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, localized.armor) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }), category === \"Accessory\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, localized.accessory) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), category === \"Mount\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, localized.mount) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), category === \"One-Handed Weapon\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, localized.oneHandedWeapon) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), category === \"Two-Handed Weapon\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, localized.twoHandedWeapon) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      })), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, subCategories.filter(categoryName => blacklistSubcategories.indexOf(categoryName) === -1 && (!applicableSubcategories[selectedType] || applicableSubcategories[selectedType].indexOf(categoryName) !== -1)).map(subCategory => React.createElement(\"li\", {\n        key: subCategory,\n        className: subCategory === categoryNameSelected ? 'active' : '',\n        onClick: this.selectChildCategory.bind(this, category, subCategory),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, subCategory === \"Hair\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, localized.hair) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), subCategory === \"Face\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, localized.face) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }), subCategory === \"Chair\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, localized.chair) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), subCategory === \"Face Accessory\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, localized.faceAccessory) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), subCategory === \"Eye Decoration\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, localized.eyeDecoration) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }), subCategory === \"Earrings\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, localized.earrings) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), subCategory === \"Pendant\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, localized.pendant) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), subCategory === \"Belt\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, localized.belts) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), subCategory === \"Medal\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, localized.medal) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), subCategory === \"Shoulder Accessory\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, localized.shoulderAccessory) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }), subCategory === \"Pocket Item\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, localized.pocketItem) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }), subCategory === \"Badge\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, localized.badge) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }), subCategory === \"Emblem\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, localized.emblem) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }), subCategory === \"Ring\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, localized.ring) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }), subCategory === \"Hat\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, localized.hat) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }), subCategory === \"Cape\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, localized.cape) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), subCategory === \"Top\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, localized.top) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }), subCategory === \"Glove\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, localized.glove) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), subCategory === \"Overall\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, localized.overall) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }), subCategory === \"Bottom\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, localized.bottom) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }), subCategory === \"Shield\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, localized.shield) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }), subCategory === \"Shoes\" ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, localized.shoes) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }), subCategory))));\n    }))), React.createElement(\"div\", {\n      className: \"item-listing-icons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, similarItems && React.createElement(\"div\", {\n      className: \"similar-items\",\n      style: {\n        left: similarItems.x - 5,\n        top: similarItems.y - 5,\n        width: similarItems.item.similar.length * 36\n      },\n      onMouseLeave: this.mouseOutSimilar.bind(this),\n      onWheel: this.onSimilarScroll.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, similarItems.item.similar.map(item => this.containedItemIcon(item, true))), this._renderAutoSizer({\n      height: 32\n    }))));\n  }\n\n  onSimilarScroll(e) {\n    var masonry = document.getElementsByClassName(\"ReactVirtualized__Masonry\")[0];\n    masonry.scrollTop += e.deltaY;\n    this.mouseOutSimilar();\n  }\n\n  mouseOutSimilar() {\n    this.setState({\n      similarItems: null\n    });\n  }\n\n  toggleCashItems(e) {\n    this.setState({\n      cashItemsOnly: e.target.checked\n    });\n  }\n\n  changeGender(e) {\n    this.setState({\n      selectedGender: e.target.value\n    });\n  }\n\n  _renderAutoSizer({\n    height\n  }) {\n    this._height = height || 32;\n    return React.createElement(AutoSizer, {\n      onResize: this._onResize.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }, this._renderMasonry.bind(this));\n  }\n\n  _renderMasonry({\n    height,\n    width\n  }) {\n    this._width = width;\n    this._height = height;\n\n    this._calculateColumnCount();\n\n    this._initCellPositioner();\n\n    return React.createElement(Masonry, {\n      cellCount: this.showIcons.length - 1,\n      cellMeasurerCache: cellMeasurerCache,\n      cellPositioner: this._cellPositioner,\n      cellRenderer: this.cellRenderer.bind(this),\n      ref: this._setMasonryRef.bind(this),\n      width: width,\n      height: this._height,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    });\n  }\n\n  _calculateColumnCount() {\n    const _this$state2 = this.state,\n          columnWidth = _this$state2.columnWidth,\n          gutterSize = _this$state2.gutterSize;\n    this._columnCount = Math.floor(this._width / (columnWidth + gutterSize));\n  }\n\n  _initCellPositioner() {\n    if (typeof this._cellPositioner === 'undefined') {\n      const _this$state3 = this.state,\n            columnWidth = _this$state3.columnWidth,\n            gutterSize = _this$state3.gutterSize;\n      this._cellPositioner = createMasonryCellPositioner({\n        cellMeasurerCache: this._cache,\n        columnCount: this._columnCount,\n        columnWidth,\n        spacer: gutterSize\n      });\n    }\n  }\n\n  _onResize({\n    height,\n    width\n  }) {\n    this._width = width;\n    this._columnHeights = {};\n\n    this._calculateColumnCount();\n\n    this._resetCellPositioner();\n\n    this._masonry.recomputeCellPositions();\n  }\n\n  _resetCellPositioner() {\n    const _this$state4 = this.state,\n          columnWidth = _this$state4.columnWidth,\n          gutterSize = _this$state4.gutterSize;\n\n    this._cellPositioner.reset({\n      columnCount: this._columnCount,\n      columnWidth,\n      spacer: gutterSize\n    });\n  }\n\n  _setMasonryRef(ref) {\n    this._masonry = ref;\n  }\n\n  cellRenderer({\n    index,\n    key,\n    parent,\n    style\n  }) {\n    const item = this.showIcons[index];\n    const showSimilarTo = this.state.showSimilarTo;\n    if (!item) return;\n    return React.createElement(CellMeasurer, {\n      cache: cellMeasurerCache,\n      index: index,\n      key: item.id,\n      parent: parent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item-img-container\",\n      style: _objectSpread({}, style, {\n        width: 32,\n        height: 32\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456\n      },\n      __self: this\n    }, this.itemIcon(item, this.state.search)));\n  }\n\n  containedItemIcon(item, hideSimilar) {\n    return React.createElement(\"div\", {\n      onWheel: !hideSimilar ? this.onSimilarScroll.bind(this) : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469\n      },\n      __self: this\n    }, this.itemIcon(item, hideSimilar));\n  }\n\n  itemIcon(item, hideSimilar) {\n    return React.createElement(\"img\", {\n      src: `https://maplestory.io/api/KMS/328/item/${item.id}/icon`,\n      onClick: this.selectItem.bind(this, item),\n      alt: item.name,\n      title: item.name,\n      id: item.id,\n      key: item.id,\n      onMouseOver: !hideSimilar && item.similar ? this.showSimilar.bind(this, item) : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478\n      },\n      __self: this\n    });\n  }\n\n  showSimilar(item) {\n    const iconImg = document.getElementById(item.id).parentElement;\n    const masonryContainer = document.getElementsByClassName(\"ReactVirtualized__Masonry\")[0];\n    this.setState({\n      similarItems: {\n        item,\n        x: iconImg.offsetLeft + masonryContainer.offsetLeft,\n        y: iconImg.offsetTop + masonryContainer.offsetTop - iconImg.parentElement.parentElement.scrollTop\n      }\n    });\n  }\n\n  search(e) {\n    this.setState({\n      search: e.target.value\n    });\n  }\n\n  selectPrimaryCategory(primaryCategory, proxy, e) {\n    const selectedCategory = _.flatMap(_.values(this.state.categories[primaryCategory], a => a));\n\n    this.selectCategory(selectedCategory, primaryCategory);\n    proxy.preventDefault();\n    proxy.stopPropagation();\n  }\n\n  selectChildCategory(primaryCategory, childCategory, proxy, e) {\n    const selectedCategory = this.state.categories[primaryCategory][childCategory];\n    this.selectCategory(selectedCategory, childCategory);\n    proxy.preventDefault();\n    proxy.stopPropagation();\n  }\n\n  selectCategory(selectedCategory, categoryNameSelected) {\n    console.log(`Selected category: ${categoryNameSelected}`);\n    this.setState({\n      selectedCategory,\n      categoryNameSelected,\n      search: ''\n    });\n  }\n\n  selectItem(item) {\n    this.props.onItemSelected(item);\n  }\n\n}\n\nexport default ItemListing;","map":{"version":3,"sources":["C:/Users/19065019/react-test/src/components/ItemListing/index.js"],"names":["React","Component","axios","_","CellMeasurer","CellMeasurerCache","createMasonryCellPositioner","Masonry","AutoSizer","blacklistSubcategories","applicableCategories","character","pet","applicableSubcategories","cellMeasurerCache","region","localStorage","version","itemListPromise","get","chairListPromise","ItemListing","constructor","props","state","items","categories","categoryNames","selectedCategory","search","gutterSize","columnWidth","categoryNameSelected","selectedGender","cashItemsOnly","similarItems","_cache","defaultHeight","defaultWidth","fixedWidth","fixedHeight","Promise","all","then","responses","every","res","status","setupData","data","chairData","filter","item","Math","floor","id","map","chair","typeInfo","category","itemData","groupedHair","groupBy","itemGrouping","firstItem","similar","groupedFaces","mapValues","concat","subCategory","keys","categoryNamesKeys","categoryName","unshift","setState","render","toLowerCase","localized","console","log","selectedType","target","type","applicableItems","indexOf","showIcons","i","name","toString","desc","isCash","c","requiredGender","bind","toggleCashItems","isCashFilter","changeGender","genderFilter","male","female","universal","subCategories","selectPrimaryCategory","charactor","armor","accessory","mount","oneHandedWeapon","twoHandedWeapon","selectChildCategory","hair","face","faceAccessory","eyeDecoration","earrings","pendant","belts","medal","shoulderAccessory","pocketItem","badge","emblem","ring","hat","cape","top","glove","overall","bottom","shield","shoes","left","x","y","width","length","mouseOutSimilar","onSimilarScroll","containedItemIcon","_renderAutoSizer","height","e","masonry","document","getElementsByClassName","scrollTop","deltaY","checked","value","_height","_onResize","_renderMasonry","_width","_calculateColumnCount","_initCellPositioner","_cellPositioner","cellRenderer","_setMasonryRef","_columnCount","columnCount","spacer","_columnHeights","_resetCellPositioner","_masonry","recomputeCellPositions","reset","ref","index","key","parent","style","showSimilarTo","itemIcon","hideSimilar","selectItem","showSimilar","iconImg","getElementById","parentElement","masonryContainer","offsetLeft","offsetTop","primaryCategory","proxy","flatMap","values","a","selectCategory","preventDefault","stopPropagation","childCategory","onItemSelected"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './index.css'\nimport axios from 'axios'\nimport _ from 'lodash'\nimport {\n  CellMeasurer,\n  CellMeasurerCache,\n  createMasonryCellPositioner,\n  Masonry,\n  AutoSizer\n} from 'react-virtualized';\n\n// Black list for individual sub categories\nconst blacklistSubcategories = [\n  \"Monster Battle\",\n  \"Skill Effect\",\n  \"Pet Use\",\n  \"Test Armor\",\n  \"Test Weapon\",\n  \"Shovel\",\n  \"Pickaxe\",\n  \"Totem\"\n]\n\n// White list for categories\nconst applicableCategories = {\n  character: ['Character', 'Armor', 'Accessory', 'Mount', 'One-Handed Weapon', 'Two-Handed Weapon'],\n  pet: ['Other']\n}\n\n// White list for individual sub categories\nconst applicableSubcategories = { pet: ['Pet Equipment'] }\n\nlet cellMeasurerCache = null\n\nconst region = !localStorage['region'] ? 'KMS' : localStorage['region']\nconst version = !localStorage['version'] ? '328' : localStorage['version']\n\nconst itemListPromise = axios.get(`https://maplestory.io/api/KMS/328/item/category/equip`);\nconst chairListPromise = axios.get(`https://maplestory.io/api/KMS/328/item/category/setup`);\n\nclass ItemListing extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      categories: {},\n      categoryNames: {},\n      selectedCategory: null,\n      search: '',\n      gutterSize: 6,\n      columnWidth: 32,\n      categoryNameSelected: '',\n      selectedGender: '',\n      cashItemsOnly: false,\n      similarItems: null\n    }\n\n    this._cache = cellMeasurerCache = new CellMeasurerCache({\n      defaultHeight: 32,\n      defaultWidth: 32,\n      fixedWidth: true,\n      fixedHeight: true\n    });\n\n    Promise.all([itemListPromise, chairListPromise]).then(responses => {\n      if(!_.every(responses, res => res.status === 200)) return;\n      const setupData = responses[1].data\n      const chairData = setupData.filter(item => Math.floor(item.id / 10000) === 301).map(chair => {\n        chair.typeInfo.category = \"Character\" // That way it shows up as part of the character section\n        return chair\n      })\n      const itemData = (responses[0].data || []) || []\n      const groupedHair = _.map(\n        _.groupBy(\n          itemData.filter(item => item.id >= 30000 && item.id <= 60000),\n          item => Math.floor(item.id / 10)\n        ), itemGrouping => {\n          const firstItem = itemGrouping[0]\n          firstItem.similar = itemGrouping\n          return firstItem\n        }\n      )\n      const groupedFaces = _.map(\n        _.groupBy(\n          itemData.filter(item => item.id >= 10000 && item.id < 30000),\n          item => (item.id % 100) + (item.id - (item.id % 1000))\n        ), itemGrouping => {\n          const firstItem = itemGrouping[0]\n          firstItem.similar = itemGrouping\n          return firstItem\n        }\n      )\n      const categories = _.mapValues(\n        _.groupBy(\n          itemData\n            .filter(item => item.id < 10000 || item.id > 50000)\n            .concat(groupedHair)\n            .concat(groupedFaces)\n            .concat(chairData),\n          item => item.typeInfo.category),\n        items => _.groupBy(items, item => item.typeInfo.subCategory)\n      );\n\n      const categoryNames = _.mapValues(categories, _.keys);\n      const categoryNamesKeys = _.keys(categoryNames).filter((categoryName) => categoryName != 'Character');\n      categoryNamesKeys.unshift('Character');\n\n      this.setState({\n        items: itemData,\n        categories,\n        categoryNames,\n        categoryNamesKeys\n      })\n    })\n  }\n\n  render() {\n    const { categoryNames, categoryNamesKeys, selectedCategory, items, categoryNameSelected, cashItemsOnly, selectedGender, similarItems } = this.state\n    const search = this.state.search.toLowerCase()\n    const { localized } = this.props\n\n    if (search) console.log(`Searching for ${search}`)\n\n    const selectedType = this.props.target.type || 'character'\n    const applicableItems = (items || []).filter(item => {\n      return applicableCategories[selectedType].indexOf(item.typeInfo.category) !== -1 && blacklistSubcategories.indexOf(item.typeInfo.subCategory) === -1 && (!applicableSubcategories[selectedType] || applicableSubcategories[selectedType].indexOf(item.typeInfo.subCategory) !== -1)\n    })\n\n    this.showIcons = !search ? (selectedCategory || applicableItems) : applicableItems.filter((item, i) => {\n      return (item.name || '').toLowerCase().indexOf(search) !== -1 ||\n        item.id.toString().toLowerCase().indexOf(search) !== -1 ||\n        (item.desc || '').toLowerCase().indexOf(search) !== -1\n    })\n\n    if (cashItemsOnly)\n      this.showIcons = this.showIcons.filter(item => item.isCash)\n\n    if (selectedGender)\n      this.showIcons = this.showIcons.filter(c => c.requiredGender == selectedGender);\n\n    this.showIcons = this.showIcons.filter(item => item && item.id)\n\n    return (\n      <div className='item-listing'>\n        <div className='item-listing-header'>\n          <input type=\"search\" value={search} onChange={this.search.bind(this)} placeholder=\"Search..\" className=\"item-search\"/>\n\n        </div>\n        <div className='filters'>\n          <label>\n            <input type=\"checkbox\" onChange={this.toggleCashItems.bind(this)} checked={this.cashItemsOnly} />\n            {localized.isCashFilter}\n          </label>\n          <select onChange={this.changeGender.bind(this)} value={this.selectedGender} className=\"gender-select\">\n            <option value=\"\">{localized.genderFilter}</option>\n            <option value=\"0\">{localized.male}</option>\n            <option value=\"1\">{localized.female}</option>\n            <option value=\"2\">{localized.universal}</option>\n          </select>\n        </div>\n        <div className='item-listing-content'>\n          <div className='item-listing-categories'>\n          <ul>\n          {\n            _.map((categoryNamesKeys || []).filter(categoryName => applicableCategories[selectedType].indexOf(categoryName) !== -1), category => {\n              const subCategories = categoryNames[category];\n              return (<li key={category} onClick={this.selectPrimaryCategory.bind(this, category)}>\n              <span className={'category' + (category === categoryNameSelected ? ' active' : '')}>\n              {\n                (category === \"Character\")\n                ? (<span>{localized.charactor}</span>)\n                : (<span></span>)\n              }\n              {\n                (category === \"Armor\")\n                ? (<span>{localized.armor}</span>)\n                : (<span></span>)\n              }\n              {\n                (category === \"Accessory\")\n                ? (<span>{localized.accessory}</span>)\n                : (<span></span>)\n              }\n              {\n                (category === \"Mount\")\n                ? (<span>{localized.mount}</span>)\n                : (<span></span>)\n              }\n              {\n                (category === \"One-Handed Weapon\")\n                ? (<span>{localized.oneHandedWeapon}</span>)\n                : (<span></span>)\n              }\n              {\n                (category === \"Two-Handed Weapon\")\n                ? (<span>{localized.twoHandedWeapon}</span>)\n                : (<span></span>)\n              }\n              </span>\n              <ul>\n                {\n                  subCategories.filter(categoryName => blacklistSubcategories.indexOf(categoryName) === -1 && (!applicableSubcategories[selectedType] || applicableSubcategories[selectedType].indexOf(categoryName) !== -1)).map(subCategory => <li\n                    key={subCategory}\n                    className={subCategory === categoryNameSelected ? 'active' : ''}\n                    onClick={this.selectChildCategory.bind(this, category, subCategory)}>\n                    {\n                      (subCategory === \"Hair\")\n                      ? (<span>{localized.hair}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Face\")\n                      ? (<span>{localized.face}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Chair\")\n                      ? (<span>{localized.chair}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Face Accessory\")\n                      ? (<span>{localized.faceAccessory}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Eye Decoration\")\n                      ? (<span>{localized.eyeDecoration}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Earrings\")\n                      ? (<span>{localized.earrings}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Pendant\")\n                      ? (<span>{localized.pendant}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Belt\")\n                      ? (<span>{localized.belts}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Medal\")\n                      ? (<span>{localized.medal}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Shoulder Accessory\")\n                      ? (<span>{localized.shoulderAccessory}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Pocket Item\")\n                      ? (<span>{localized.pocketItem}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Badge\")\n                      ? (<span>{localized.badge}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Emblem\")\n                      ? (<span>{localized.emblem}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Ring\")\n                      ? (<span>{localized.ring}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Hat\")\n                      ? (<span>{localized.hat}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Cape\")\n                      ? (<span>{localized.cape}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Top\")\n                      ? (<span>{localized.top}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Glove\")\n                      ? (<span>{localized.glove}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Overall\")\n                      ? (<span>{localized.overall}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Bottom\")\n                      ? (<span>{localized.bottom}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Shield\")\n                      ? (<span>{localized.shield}</span>)\n                      : (<span></span>)\n                    }\n                    {\n                      (subCategory === \"Shoes\")\n                      ? (<span>{localized.shoes}</span>)\n                      : (<span></span>)\n                    }\n{subCategory}\n                    </li>)\n                }\n              </ul></li>)\n            })\n          }\n          </ul>\n          </div>\n          <div className='item-listing-icons'>\n            { similarItems &&\n              <div className='similar-items' style={{\n                left: similarItems.x - 5,\n                top: similarItems.y - 5,\n                width: (similarItems.item.similar.length * 36)\n              }} onMouseLeave={this.mouseOutSimilar.bind(this)}\n                onWheel={this.onSimilarScroll.bind(this)}\n                >\n                { similarItems.item.similar.map((item) => this.containedItemIcon(item, true)) }\n              </div>\n            }\n            { this._renderAutoSizer({ height: 32 }) }\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  onSimilarScroll(e) {\n    var masonry = document.getElementsByClassName(\"ReactVirtualized__Masonry\")[0]\n    masonry.scrollTop += e.deltaY\n    this.mouseOutSimilar()\n  }\n\n  mouseOutSimilar() {\n    this.setState({ similarItems: null })\n  }\n\n  toggleCashItems (e) {\n    this.setState({ cashItemsOnly: e.target.checked })\n  }\n\n  changeGender (e) {\n    this.setState({ selectedGender: e.target.value })\n  }\n\n  _renderAutoSizer ({ height }) {\n    this._height = height || 32\n\n    return (\n      <AutoSizer\n        onResize={this._onResize.bind(this)}\n      >\n        {this._renderMasonry.bind(this)}\n      </AutoSizer>\n    )\n  }\n\n  _renderMasonry({ height, width }) {\n    this._width = width\n    this._height = height\n\n    this._calculateColumnCount()\n    this._initCellPositioner()\n\n    return <Masonry\n      cellCount={this.showIcons.length - 1}\n      cellMeasurerCache={cellMeasurerCache}\n      cellPositioner={this._cellPositioner}\n      cellRenderer={this.cellRenderer.bind(this)}\n      ref={this._setMasonryRef.bind(this)}\n      width={width}\n      height={this._height}\n      />\n  }\n\n  _calculateColumnCount () {\n    const {\n      columnWidth,\n      gutterSize\n    } = this.state\n\n    this._columnCount = Math.floor(this._width / (columnWidth + gutterSize))\n  }\n\n  _initCellPositioner () {\n    if (typeof this._cellPositioner === 'undefined') {\n      const {\n        columnWidth,\n        gutterSize\n      } = this.state\n\n      this._cellPositioner = createMasonryCellPositioner({\n        cellMeasurerCache: this._cache,\n        columnCount: this._columnCount,\n        columnWidth,\n        spacer: gutterSize\n      })\n    }\n  }\n\n  _onResize ({ height, width }) {\n    this._width = width\n\n    this._columnHeights = {}\n    this._calculateColumnCount()\n    this._resetCellPositioner()\n    this._masonry.recomputeCellPositions()\n  }\n\n  _resetCellPositioner () {\n    const {\n      columnWidth,\n      gutterSize\n    } = this.state\n\n    this._cellPositioner.reset({\n      columnCount: this._columnCount,\n      columnWidth,\n      spacer: gutterSize\n    })\n  }\n\n  _setMasonryRef (ref) {\n    this._masonry = ref\n  }\n\n  cellRenderer ({ index, key, parent, style }) {\n    const item = this.showIcons[index]\n    const { showSimilarTo } = this.state\n\n    if (!item) return\n\n    return (\n      <CellMeasurer\n        cache={cellMeasurerCache}\n        index={index}\n        key={item.id}\n        parent={parent}\n      >\n        <div className=\"item-img-container\" style={{\n          ...style,\n          width: 32,\n          height: 32\n        }}>\n          { this.itemIcon(item, this.state.search) }\n        </div>\n      </CellMeasurer>\n    )\n  }\n\n  containedItemIcon(item, hideSimilar) {\n    return (\n      <div\n        onWheel={!hideSimilar ? this.onSimilarScroll.bind(this) : false}\n        >\n        { this.itemIcon(item, hideSimilar) }\n      </div>\n    )\n  }\n\n  itemIcon(item, hideSimilar) {\n    return (<img\n      src={`https://maplestory.io/api/KMS/328/item/${item.id}/icon`}\n      onClick={this.selectItem.bind(this, item)}\n      alt={item.name}\n      title={item.name}\n      id={item.id}\n      key={item.id}\n      onMouseOver={!hideSimilar && item.similar ? this.showSimilar.bind(this, item) : false} />)\n  }\n\n  showSimilar(item) {\n    const iconImg = document.getElementById(item.id).parentElement\n    const masonryContainer = document.getElementsByClassName(\"ReactVirtualized__Masonry\")[0]\n    this.setState({\n      similarItems: {\n        item,\n        x: iconImg.offsetLeft + masonryContainer.offsetLeft,\n        y: iconImg.offsetTop + masonryContainer.offsetTop - iconImg.parentElement.parentElement.scrollTop\n      }\n    })\n  }\n\n  search(e) {\n    this.setState({\n      search: e.target.value\n    })\n  }\n\n  selectPrimaryCategory(primaryCategory, proxy, e) {\n    const selectedCategory = _.flatMap(_.values(this.state.categories[primaryCategory], a => a))\n    this.selectCategory(selectedCategory, primaryCategory)\n    proxy.preventDefault()\n    proxy.stopPropagation()\n  }\n\n  selectChildCategory(primaryCategory, childCategory, proxy, e) {\n    const selectedCategory = this.state.categories[primaryCategory][childCategory]\n    this.selectCategory(selectedCategory, childCategory)\n    proxy.preventDefault()\n    proxy.stopPropagation()\n  }\n\n  selectCategory(selectedCategory, categoryNameSelected) {\n    console.log(`Selected category: ${categoryNameSelected}`)\n    this.setState({\n      selectedCategory,\n      categoryNameSelected,\n      search: ''\n    })\n  }\n\n  selectItem(item){\n    this.props.onItemSelected(item)\n  }\n}\n\nexport default ItemListing\n"]},"metadata":{},"sourceType":"module"}