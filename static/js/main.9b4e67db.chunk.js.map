{"version":3,"sources":["components/ItemListing/index.js","components/EquippedItems/index.js","components/CharacterList/CharacterEntry/index.js","components/CharacterList/PetEntry/index.js","components/CharacterList/index.js","components/RenderCanvas/GenericCanvasElement/index.js","components/RenderCanvas/CharacterCanvasElement/index.js","components/RenderCanvas/index.js","const/localize.js","components/App/index.js","index.js","registerServiceWorker.js"],"names":["blacklistSubcategories","applicableCategories","character","pet","applicableSubcategories","cellMeasurerCache","itemListPromise","localStorage","axios","get","chairListPromise","ItemListing","props","state","items","categories","categoryNames","selectedCategory","search","gutterSize","columnWidth","categoryNameSelected","selectedGender","cashItemsOnly","similarItems","_cache","CellMeasurerCache","defaultHeight","defaultWidth","fixedWidth","fixedHeight","Promise","all","then","responses","_","every","res","status","chairData","data","filter","item","Math","floor","id","map","chair","typeInfo","category","itemData","groupedHair","groupBy","itemGrouping","firstItem","similar","groupedFaces","mapValues","concat","subCategory","keys","categoryNamesKeys","categoryName","unshift","setState","this","toLowerCase","localized","console","log","selectedType","target","type","applicableItems","indexOf","showIcons","i","name","toString","desc","isCash","c","requiredGender","className","value","onChange","bind","placeholder","toggleCashItems","checked","isCashFilter","changeGender","genderFilter","male","female","universal","subCategories","key","onClick","selectPrimaryCategory","charactor","armor","accessory","mount","oneHandedWeapon","twoHandedWeapon","selectChildCategory","hair","face","faceAccessory","eyeDecoration","earrings","pendant","belts","medal","shoulderAccessory","pocketItem","badge","emblem","ring","hat","cape","top","glove","overall","bottom","shield","shoes","shiningRod","soulShooter","desperado","whipBlade","psyLimiter","chain","gauntlet","oneHandedSword","oneHandedAxe","oneHandedBluntWeapon","dagger","katara","cane","wand","staff","cash","twoHandedSword","twoHandedAxe","twoHandedBlunt","spear","poleArm","bow","crossbow","claw","knuckle","gun","dualBowgun","handCannon","lapis","lazuli","armCannon","ancientBow","_renderAutoSizer","height","e","document","getElementsByClassName","scrollTop","deltaY","mouseOutSimilar","_height","onResize","_onResize","_renderMasonry","width","_width","_calculateColumnCount","_initCellPositioner","cellCount","length","cellPositioner","_cellPositioner","cellRenderer","ref","_setMasonryRef","_columnCount","createMasonryCellPositioner","columnCount","spacer","_columnHeights","_resetCellPositioner","_masonry","recomputeCellPositions","reset","index","parent","style","showSimilarTo","cache","itemIcon","hideSimilar","onWheel","onSimilarScroll","src","selectItem","alt","title","onMouseOver","showSimilar","iconImg","getElementById","parentElement","masonryContainer","x","offsetLeft","y","offsetTop","primaryCategory","proxy","flatMap","values","a","selectCategory","preventDefault","stopPropagation","childCategory","onItemSelected","Component","EquippedItems","textContent","classList","add","remove","slider","baseColorValue","mixColorValue","rtImg","opacity","ltColor","rtColor","itemId","canvasLt","canvasRt","listLt","window","getComputedStyle","getPropertyValue","listRt","contains","unselected","selected","ColorPicked","silceId","slice","num","colorChage","str","replace","setAttribute","s","substr","backgroundImage","equippedItems","Hair","resettingValues","silceIdFr","silceIdEd","colorEyeChage","Face","sliderValue","newopacity","skinId","chgColor","min","max","changeZoom","chgEyeColor","removeItem","onRemoveItem","onUpdateItem","visible","undefined","onRemoveItems","newHue","hue","newContrast","contrast","newBrightness","brightness","newAlpha","alpha","newSaturation","saturation","newISlot","islot","newVSlot","vslot","updateItemHue","handle","updateItemContrast","step","updateItemBrightness","updateItemSaturation","updateItemAlpha","updateItemISlot","updateItemVSlot","toggleVisibility","Handle","createSliderWithTooltip","Slider","Range","dragging","restProps","prefixCls","overlay","placement","border","CharacterEntry","actions","emotions","frames","stand1","stand2","frameDelay","updateCharacterDetails","prevProps","find","property","isSync","itemEntries","selectedItems","emotion","tryCount","Object","itemEntry","Number","version","region","animationName","backgroundColor","JSON","parse","bgColorText","rgb","r","g","b","itemEntriesPayload","stringify","skin","encodeURIComponent","link","action","animating","frame","mercEars","illiumEars","highFloraEars","zoom","encodeURI","flipX","includeBackground","linkUsed","details","isSelected","canvasMode","otherProps","onUpdateCharacter","onDeleteCharacter","itemEntriesT","newHair","backgroundColorT","bgColorTextT","itemEntriesPayloadT","linkT","html","customizeCharacter","delay","position","interactive","theme","distance","arrow","changeName","expression","disabled","changeEmotion","changeAction","changeSkin","changeIlliumEars","changeHighFloraEars","changeMercEars","animate","changeAnimating","addBgToGif","changeIncludeBackground","flipHorizontal","toggleFlipX","href","imageSaveLocal","deleteCharacter","imgOpcy","mergeImages","b64","blob","imgData","atob","split","len","buf","ArrayBuffer","view","Uint8Array","charCodeAt","Blob","navigator","msSaveOrOpenBlob","createElement","download","body","appendChild","click","setTimeout","removeChild","fhSnap","confirm","deleteCharacterConfirm","onClone","payload","url","URL","createObjectURL","revokeObjectURL","locked","petLoader","petResp","uniqPets","uniqBy","pets","petId","PetEntry","response","sortBy","petsLoaded","onUpdatePet","onDeletePet","customizePet","summary","transform","deletePet","petType","changePetId","animation","changeFrame","footholdSnapping","toggleFHSnap","lock","toggleLock","CharacterList","renderables","selectedIndex","clickCharacter","onCloneCharacter","renderAddList","display","onImportCharacter","multiple","onAddCharacter","onAddPet","onOpenImportCharacter","importCharacter","currentTarget","onUpdateSelectedCharacter","GenericCanvasElement","renderable","onUpdateRenderablePosition","onStart","onStop","imgLink","onDrag","draggable","onError","showError","touchAction","CharacterCanvasElement","styling","crossorigin","renderFootholds","RenderCanvas","childDragCount","selectedRenderable","isNaN","round","mapId","mapData","focusRenderable","vrBounds","stateChanges","mapOrigin","styleOptions","backgroundPositionX","backgroundPositionY","o","deltaX","childDragging","dragCount","clickCanvas","mapLoadingError","viewBox","footholds","fh","x1","x2","y1","y2","strokeWidth","stroke","getRenderableElement","childStopDragging","onClickRenderable","handleRenderableElementMovement","cursorX","cursorY","alignedFootholds","isVertical","isWithin","yAtX","abs","difference","snapFoothold","onUpdateRenderable","NotificationManager","warning","en","maplestory","design","understand","quickView","removeAll","prototype","unofficialNotice","properties","downloadSpriteSheet","willDownloadZip","downloadLayeredSpriteSheet","requiresPDNPlugin","belt","earring","powerSource","totem","testArmor","other","android","dragonEquipment","mechanicalHeart","mechanicEquipment","petEquipment","bits","shovel","pickaxe","skillEffect","petUse","scepter","testWeapon","secondaryWeapon","ballast","magicMarble","spellbook","arrowFletching","powderKeg","farSight","card","ironChain","bowThimble","jewel","magicArrow","charm","orb","rosary","daggerScabbard","wristBand","arrowhead","jettSCore","novaSEssence","soulRing","magnum","kodachi","whistle","jettFists","mass","foxMarble","coreController","charges","chessPiece","transmitter","wings","katana","fan","kr","downloadMinimalSpriteSheet","monster","crusaderCodex","monsterBattle","consumable","potion","foodAndDrink","statusCure","petFood","transformation","eXPPotion","characterModification","timeSaver","equipmentBox","teleportItem","eXPBuff","appearance","armorScroll","helmet","eye","topwear","bottomwear","gloves","shoulder","equipment","weaponScroll","oneHandedBW","twoHandedBW","polearm","zero","specialScroll","cleanSlateScroll","slotCarver","bonusPotentialScroll","chaosScroll","equipEnhancement","potentialScroll","awakeningStamp","innocenceScroll","fusionAnvil","whiteScroll","hammer","magnifyingGlass","timeExtension","luckyDayScroll","protectionScroll","safetyScroll","guardianScroll","equipmentChange","soulWeapon","miracleCube","trade","masteryBook","aPSPReset","monsterTaming","circulator","dust","tablet","projectile","thrown","crossbowBolt","bullet","monsterFamiliar","monsterCard","familiarSkill","familiarCard","recipe","smithingRecipe","accessoryCraftingRecipe","alchemyRecipe","synergyMachine","megaphone","summoningSack","message","lieDetector","wedding","owl","capsule","itemPot","monsterDrop","questItem","cosmetic","minigame","petCommand","book","effect","coin","container","eXPTicket","eventItem","cashShop","rewardItem","potentialLock","fusion","coupon","crafting","mineralOre","mineralProcessed","rareOre","rareProcessedOre","craftingItem","herb","herbOil","maker","extractor","decoration","commerci","tradeGood","shipEnhancement","evolutionLab","core","mission","nebulite","rankDNebulite","rankCNebulite","rankBNebulite","rankANebulite","rankSNebulite","teleportRock","package","itemStore","questHelper","randomReward","specialItem","gachapon","surpriseBox","exchangeCoupon","equipmentModification","scroll","upgradeSlot","sPAPModification","protection","eXPCoupon","dropCoupon","entryPass","inventorySlot","eXPCoupons","skillModification","weapon","hairCoupon","hairColorCoupon","faceCoupon","cosmeticLens","skinCoupon","ear","facialExpression","special","petAppearance","freeMarket","hiredMerchant","storePermit","auctionHouse","messengerAndSocial","weatherEffect","messenger","kite","note","song","characterEffect","guildForumEmoticon","messageboard","miscellaneous","cakeVsPie","language","playMusic","gender","mql","matchMedia","startsWith","throttledErrorNotification","throttle","error","leading","versions","GMS","MapleVersionId","IsReady","KMS","TMS","CMS","JMS","SEA","wzPromise","WZs","wzEntry","isReady","findIndex","ver","mapleVersionId","location","reload","maps","mapsFilter","mapPromise","label","streetName","join","createFilterOptions","options","App","isOpen","isModalOpen","characters","selectedMap","mapPosition","colorPickerOpen","music","sidebarDocked","matches","sidebarOpen","sidebarRDocked","sidebarROpen","isEmpty","currentCharacter","push","getNewCharacter","forEach","Date","now","newFace","characterItems","toCamel","newO","origKey","newKey","Array","hasOwnProperty","charAt","constructor","keyBy","otherCharacters","allCharacters","addEventListener","handleClick","mapsLoaded","mediaQueryChanged","onSetSidebarOpen","onSetRightSidebarOpen","changEvent","changEventEye","addListener","removeListener","open","element","found","Localize","sidebar","userSelectedItem","docked","onSetOpen","styles","zIndex","boxShadow","content","userRemovedItem","updateItem","userRemovedItems","pullRight","shadow","updateRenderable","userUpdateSelectedRenderable","addCharacter","addPet","removeCharacter","cloneCharacter","removePet","userUpdateCharacter","userUpdatePet","autoPlay","loop","openColorPicker","color","onChangeColor","changeLanguage","filterOptions","isLoading","searchable","clearable","simpleValue","selectMap","maxHeight","menuList","menu","changeRegionVersion","versionName","toggleMusic","exportAllCharacters","newZoom","newProps","getNewPet","andysFavePetIds","random","importAll","call","files","file","rej","lastIndexOf","reader","FileReader","onload","ev","result","readAsText","warn","indexOfCharacter","splice","newCharacterIndex","callback","petIndex","currentPet","characterIndex","updateItems","updateSelectedRenderable","event","generateAvatarLink","linkType","host","isOnDomain","isOnHttps","protocol","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9b4e67db.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './index.css'\r\nimport axios from 'axios'\r\nimport _ from 'lodash'\r\nimport {\r\n  CellMeasurer,\r\n  CellMeasurerCache,\r\n  createMasonryCellPositioner,\r\n  Masonry,\r\n  AutoSizer\r\n} from 'react-virtualized';\r\n\r\n// Black list for individual sub categories\r\nconst blacklistSubcategories = [\r\n  \"Monster Battle\",\r\n  \"Skill Effect\",\r\n  \"Pet Use\",\r\n  \"Test Armor\",\r\n  \"Test Weapon\",\r\n  \"Shovel\",\r\n  \"Pickaxe\",\r\n  \"Totem\"\r\n]\r\n\r\n// White list for categories\r\nconst applicableCategories = {\r\n  character: ['Character', 'Armor', 'Accessory', 'Mount', 'One-Handed Weapon', 'Two-Handed Weapon'],\r\n  pet: ['Other']\r\n}\r\n\r\n// White list for individual sub categories\r\nconst applicableSubcategories = { pet: ['Pet Equipment'] }\r\n\r\nlet cellMeasurerCache = null\r\n\r\nconst region = !localStorage['region'] ? 'KMS' : localStorage['region']\r\nconst version = !localStorage['version'] ? '328' : localStorage['version']\r\n\r\nconst itemListPromise = axios.get(`https://maplestory.io/api/KMS/328/item/category/equip`);\r\nconst chairListPromise = axios.get(`https://maplestory.io/api/KMS/328/item/category/setup`);\r\n\r\nclass ItemListing extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      items: [],\r\n      categories: {},\r\n      categoryNames: {},\r\n      selectedCategory: null,\r\n      search: '',\r\n      gutterSize: 6,\r\n      columnWidth: 32,\r\n      categoryNameSelected: '',\r\n      selectedGender: '',\r\n      cashItemsOnly: false,\r\n      similarItems: null\r\n    }\r\n\r\n    this._cache = cellMeasurerCache = new CellMeasurerCache({\r\n      defaultHeight: 32,\r\n      defaultWidth: 32,\r\n      fixedWidth: true,\r\n      fixedHeight: true\r\n    });\r\n\r\n    Promise.all([itemListPromise, chairListPromise]).then(responses => {\r\n      if(!_.every(responses, res => res.status === 200)) return;\r\n      const setupData = responses[1].data\r\n      const chairData = setupData.filter(item => Math.floor(item.id / 10000) === 301).map(chair => {\r\n        chair.typeInfo.category = \"Character\" // That way it shows up as part of the character section\r\n        return chair\r\n      })\r\n      const itemData = (responses[0].data || []) || []\r\n      const groupedHair = _.map(\r\n        _.groupBy(\r\n          itemData.filter(item => item.id >= 30000 && item.id <= 60000),\r\n          item => Math.floor(item.id / 10)\r\n        ), itemGrouping => {\r\n          const firstItem = itemGrouping[0]\r\n          firstItem.similar = itemGrouping\r\n          return firstItem\r\n        }\r\n      )\r\n      const groupedFaces = _.map(\r\n        _.groupBy(\r\n          itemData.filter(item => item.id >= 10000 && item.id < 30000),\r\n          item => (item.id % 100) + (item.id - (item.id % 1000))\r\n        ), itemGrouping => {\r\n          const firstItem = itemGrouping[0]\r\n          firstItem.similar = itemGrouping\r\n          return firstItem\r\n        }\r\n      )\r\n      const categories = _.mapValues(\r\n        _.groupBy(\r\n          itemData\r\n            .filter(item => item.id < 10000 || item.id > 50000)\r\n            .concat(groupedHair)\r\n            .concat(groupedFaces)\r\n            .concat(chairData),\r\n          item => item.typeInfo.category),\r\n        items => _.groupBy(items, item => item.typeInfo.subCategory)\r\n      );\r\n\r\n      const categoryNames = _.mapValues(categories, _.keys);\r\n      const categoryNamesKeys = _.keys(categoryNames).filter((categoryName) => categoryName != 'Character');\r\n      categoryNamesKeys.unshift('Character');\r\n\r\n      this.setState({\r\n        items: itemData,\r\n        categories,\r\n        categoryNames,\r\n        categoryNamesKeys\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { categoryNames, categoryNamesKeys, selectedCategory, items, categoryNameSelected, cashItemsOnly, selectedGender, similarItems } = this.state\r\n    const search = this.state.search.toLowerCase()\r\n    const { localized } = this.props\r\n\r\n    if (search) console.log(`Searching for ${search}`)\r\n\r\n    const selectedType = this.props.target.type || 'character'\r\n    const applicableItems = (items || []).filter(item => {\r\n      return applicableCategories[selectedType].indexOf(item.typeInfo.category) !== -1 && blacklistSubcategories.indexOf(item.typeInfo.subCategory) === -1 && (!applicableSubcategories[selectedType] || applicableSubcategories[selectedType].indexOf(item.typeInfo.subCategory) !== -1)\r\n    })\r\n\r\n    this.showIcons = !search ? (selectedCategory || applicableItems) : applicableItems.filter((item, i) => {\r\n      return (item.name || '').toLowerCase().indexOf(search) !== -1 ||\r\n        item.id.toString().toLowerCase().indexOf(search) !== -1 ||\r\n        (item.desc || '').toLowerCase().indexOf(search) !== -1\r\n    })\r\n\r\n    if (cashItemsOnly)\r\n      this.showIcons = this.showIcons.filter(item => item.isCash)\r\n\r\n    if (selectedGender)\r\n      this.showIcons = this.showIcons.filter(c => c.requiredGender == selectedGender);\r\n\r\n    this.showIcons = this.showIcons.filter(item => item && item.id)\r\n\r\n    return (\r\n      <div className='item-listing'>\r\n        <div className='item-listing-header'>\r\n          <input type=\"search\" value={search} onChange={this.search.bind(this)} placeholder=\"Search..\" className=\"item-search\"/>\r\n\r\n        </div>\r\n        <div className='filters'>\r\n          <label>\r\n            <input type=\"checkbox\" onChange={this.toggleCashItems.bind(this)} checked={this.cashItemsOnly} />\r\n            {localized.isCashFilter}\r\n          </label>\r\n          <select onChange={this.changeGender.bind(this)} value={this.selectedGender} className=\"gender-select\">\r\n            <option value=\"\">{localized.genderFilter}</option>\r\n            <option value=\"0\">{localized.male}</option>\r\n            <option value=\"1\">{localized.female}</option>\r\n            <option value=\"2\">{localized.universal}</option>\r\n          </select>\r\n        </div>\r\n        <div className='item-listing-content'>\r\n          <div className='item-listing-categories'>\r\n          <ul>\r\n          {\r\n            _.map((categoryNamesKeys || []).filter(categoryName => applicableCategories[selectedType].indexOf(categoryName) !== -1), category => {\r\n              const subCategories = categoryNames[category];\r\n              return (<li key={category} onClick={this.selectPrimaryCategory.bind(this, category)}>\r\n              <span className={'category' + (category === categoryNameSelected ? ' active' : '')}>\r\n              {\r\n                (category === \"Character\")\r\n                ? (<span>{localized.charactor}</span>)\r\n                : (<span></span>)\r\n              }\r\n              {\r\n                (category === \"Armor\")\r\n                ? (<span>{localized.armor}</span>)\r\n                : (<span></span>)\r\n              }\r\n              {\r\n                (category === \"Accessory\")\r\n                ? (<span>{localized.accessory}</span>)\r\n                : (<span></span>)\r\n              }\r\n              {\r\n                (category === \"Mount\")\r\n                ? (<span>{localized.mount}</span>)\r\n                : (<span></span>)\r\n              }\r\n              {\r\n                (category === \"One-Handed Weapon\")\r\n                ? (<span>{localized.oneHandedWeapon}</span>)\r\n                : (<span></span>)\r\n              }\r\n              {\r\n                (category === \"Two-Handed Weapon\")\r\n                ? (<span>{localized.twoHandedWeapon}</span>)\r\n                : (<span></span>)\r\n              }\r\n              </span>\r\n              <ul>\r\n                {\r\n                  subCategories.filter(categoryName => blacklistSubcategories.indexOf(categoryName) === -1 && (!applicableSubcategories[selectedType] || applicableSubcategories[selectedType].indexOf(categoryName) !== -1)).map(subCategory => <li\r\n                    key={subCategory}\r\n                    className={subCategory === categoryNameSelected ? 'active' : ''}\r\n                    onClick={this.selectChildCategory.bind(this, category, subCategory)}>\r\n                    {\r\n                      (subCategory === \"Hair\")\r\n                      ? (<span>{localized.hair}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Face\")\r\n                      ? (<span>{localized.face}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Chair\")\r\n                      ? (<span>{localized.chair}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Face Accessory\")\r\n                      ? (<span>{localized.faceAccessory}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Eye Decoration\")\r\n                      ? (<span>{localized.eyeDecoration}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Earrings\")\r\n                      ? (<span>{localized.earrings}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Pendant\")\r\n                      ? (<span>{localized.pendant}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Belt\")\r\n                      ? (<span>{localized.belts}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Medal\")\r\n                      ? (<span>{localized.medal}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Shoulder Accessory\")\r\n                      ? (<span>{localized.shoulderAccessory}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Pocket Item\")\r\n                      ? (<span>{localized.pocketItem}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Badge\")\r\n                      ? (<span>{localized.badge}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Emblem\")\r\n                      ? (<span>{localized.emblem}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Ring\")\r\n                      ? (<span>{localized.ring}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Hat\")\r\n                      ? (<span>{localized.hat}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Cape\")\r\n                      ? (<span>{localized.cape}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Top\")\r\n                      ? (<span>{localized.top}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Glove\")\r\n                      ? (<span>{localized.glove}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Overall\")\r\n                      ? (<span>{localized.overall}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Bottom\")\r\n                      ? (<span>{localized.bottom}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Shield\")\r\n                      ? (<span>{localized.shield}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Shoes\")\r\n                      ? (<span>{localized.shoes}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Mount\")\r\n                      ? (<span>{localized.mount}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Shining Rod\")\r\n                      ? (<span>{localized.shiningRod}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Soul Shooter\")\r\n                      ? (<span>{localized.soulShooter}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Desperado\")\r\n                      ? (<span>{localized.desperado}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Whip Blade\")\r\n                      ? (<span>{localized.whipBlade}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Psy-limiter\")\r\n                      ? (<span>{localized.psyLimiter}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Chain\")\r\n                      ? (<span>{localized.chain}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Gauntlet\")\r\n                      ? (<span>{localized.gauntlet}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"One-Handed Sword\")\r\n                      ? (<span>{localized.oneHandedSword}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"One-Handed Axe\")\r\n                      ? (<span>{localized.oneHandedAxe}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"One-Handed Blunt Weapon\")\r\n                      ? (<span>{localized.oneHandedBluntWeapon}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Dagger\")\r\n                      ? (<span>{localized.dagger}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Katara\")\r\n                      ? (<span>{localized.katara}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Cane\")\r\n                      ? (<span>{localized.cane}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Wand\")\r\n                      ? (<span>{localized.wand}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Staff\")\r\n                      ? (<span>{localized.staff}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Cash\")\r\n                      ? (<span>{localized.cash}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Two-Handed Sword\")\r\n                      ? (<span>{localized.twoHandedSword}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Two-Handed Axe\")\r\n                      ? (<span>{localized.twoHandedAxe}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Two-Handed Blunt\")\r\n                      ? (<span>{localized.twoHandedBlunt}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Spear\")\r\n                      ? (<span>{localized.spear}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Pole Arm\")\r\n                      ? (<span>{localized.poleArm}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Bow\")\r\n                      ? (<span>{localized.bow}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Crossbow\")\r\n                      ? (<span>{localized.crossbow}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Claw\")\r\n                      ? (<span>{localized.claw}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Knuckle\")\r\n                      ? (<span>{localized.knuckle}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Gun\")\r\n                      ? (<span>{localized.gun}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Dual Bowgun\")\r\n                      ? (<span>{localized.dualBowgun}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Hand Cannon\")\r\n                      ? (<span>{localized.handCannon}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Lapis\")\r\n                      ? (<span>{localized.lapis}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Lazuli\")\r\n                      ? (<span>{localized.lazuli}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Arm Cannon\")\r\n                      ? (<span>{localized.armCannon}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    {\r\n                      (subCategory === \"Ancient Bow\")\r\n                      ? (<span>{localized.ancientBow}</span>)\r\n                      : (<span></span>)\r\n                    }\r\n                    </li>)\r\n                }\r\n              </ul></li>)\r\n            })\r\n          }\r\n          </ul>\r\n          </div>\r\n          <div className='item-listing-icons'>\r\n          \r\n            { this._renderAutoSizer({ height: 32 }) }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  onSimilarScroll(e) {\r\n    var masonry = document.getElementsByClassName(\"ReactVirtualized__Masonry\")[0]\r\n    masonry.scrollTop += e.deltaY\r\n    this.mouseOutSimilar()\r\n  }\r\n\r\n  mouseOutSimilar() {\r\n    this.setState({ similarItems: null })\r\n  }\r\n\r\n  toggleCashItems (e) {\r\n    this.setState({ cashItemsOnly: e.target.checked })\r\n  }\r\n\r\n  changeGender (e) {\r\n    this.setState({ selectedGender: e.target.value })\r\n  }\r\n\r\n  _renderAutoSizer ({ height }) {\r\n    this._height = height || 32\r\n\r\n    return (\r\n      <AutoSizer\r\n        onResize={this._onResize.bind(this)}\r\n      >\r\n        {this._renderMasonry.bind(this)}\r\n      </AutoSizer>\r\n    )\r\n  }\r\n\r\n  _renderMasonry({ height, width }) {\r\n    this._width = width\r\n    this._height = height\r\n\r\n    this._calculateColumnCount()\r\n    this._initCellPositioner()\r\n\r\n    return <Masonry\r\n      cellCount={this.showIcons.length - 1}\r\n      cellMeasurerCache={cellMeasurerCache}\r\n      cellPositioner={this._cellPositioner}\r\n      cellRenderer={this.cellRenderer.bind(this)}\r\n      ref={this._setMasonryRef.bind(this)}\r\n      width={width}\r\n      height={this._height}\r\n      />\r\n  }\r\n\r\n  _calculateColumnCount () {\r\n    const {\r\n      columnWidth,\r\n      gutterSize\r\n    } = this.state\r\n\r\n    this._columnCount = Math.floor(this._width / (columnWidth + gutterSize))\r\n  }\r\n\r\n  _initCellPositioner () {\r\n    if (typeof this._cellPositioner === 'undefined') {\r\n      const {\r\n        columnWidth,\r\n        gutterSize\r\n      } = this.state\r\n\r\n      this._cellPositioner = createMasonryCellPositioner({\r\n        cellMeasurerCache: this._cache,\r\n        columnCount: this._columnCount,\r\n        columnWidth,\r\n        spacer: gutterSize\r\n      })\r\n    }\r\n  }\r\n\r\n  _onResize ({ height, width }) {\r\n    this._width = width\r\n\r\n    this._columnHeights = {}\r\n    this._calculateColumnCount()\r\n    this._resetCellPositioner()\r\n    this._masonry.recomputeCellPositions()\r\n  }\r\n\r\n  _resetCellPositioner () {\r\n    const {\r\n      columnWidth,\r\n      gutterSize\r\n    } = this.state\r\n\r\n    this._cellPositioner.reset({\r\n      columnCount: this._columnCount,\r\n      columnWidth,\r\n      spacer: gutterSize\r\n    })\r\n  }\r\n\r\n  _setMasonryRef (ref) {\r\n    this._masonry = ref\r\n  }\r\n\r\n  cellRenderer ({ index, key, parent, style }) {\r\n    const item = this.showIcons[index]\r\n    const { showSimilarTo } = this.state\r\n\r\n    if (!item) return\r\n\r\n    return (\r\n      <CellMeasurer\r\n        cache={cellMeasurerCache}\r\n        index={index}\r\n        key={item.id}\r\n        parent={parent}\r\n      >\r\n        <div className=\"item-img-container\" style={{\r\n          ...style,\r\n          width: 32,\r\n          height: 32\r\n        }}>\r\n          { this.itemIcon(item, this.state.search) }\r\n        </div>\r\n      </CellMeasurer>\r\n    )\r\n  }\r\n\r\n  containedItemIcon(item, hideSimilar) {\r\n    return (\r\n      <div\r\n        onWheel={!hideSimilar ? this.onSimilarScroll.bind(this) : false}\r\n        >\r\n        { this.itemIcon(item, hideSimilar) }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  itemIcon(item, hideSimilar) {\r\n    return (<img\r\n      src={`https://maplestory.io/api/KMS/328/item/${item.id}/icon`}\r\n      onClick={this.selectItem.bind(this, item)}\r\n      alt={item.name}\r\n      title={item.name}\r\n      id={item.id}\r\n      key={item.id}\r\n      onMouseOver={!hideSimilar && item.similar ? this.showSimilar.bind(this, item) : false} />)\r\n  }\r\n\r\n  showSimilar(item) {\r\n    const iconImg = document.getElementById(item.id).parentElement\r\n    const masonryContainer = document.getElementsByClassName(\"ReactVirtualized__Masonry\")[0]\r\n    this.setState({\r\n      similarItems: {\r\n        item,\r\n        x: iconImg.offsetLeft + masonryContainer.offsetLeft,\r\n        y: iconImg.offsetTop + masonryContainer.offsetTop - iconImg.parentElement.parentElement.scrollTop\r\n      }\r\n    })\r\n  }\r\n\r\n  search(e) {\r\n    this.setState({\r\n      search: e.target.value\r\n    })\r\n  }\r\n\r\n  selectPrimaryCategory(primaryCategory, proxy, e) {\r\n    const selectedCategory = _.flatMap(_.values(this.state.categories[primaryCategory], a => a))\r\n    this.selectCategory(selectedCategory, primaryCategory)\r\n    proxy.preventDefault()\r\n    proxy.stopPropagation()\r\n  }\r\n\r\n  selectChildCategory(primaryCategory, childCategory, proxy, e) {\r\n    const selectedCategory = this.state.categories[primaryCategory][childCategory]\r\n    this.selectCategory(selectedCategory, childCategory)\r\n    proxy.preventDefault()\r\n    proxy.stopPropagation()\r\n  }\r\n\r\n  selectCategory(selectedCategory, categoryNameSelected) {\r\n    console.log(`Selected category: ${categoryNameSelected}`)\r\n    this.setState({\r\n      selectedCategory,\r\n      categoryNameSelected,\r\n      search: ''\r\n    })\r\n  }\r\n\r\n  selectItem(item){\r\n    this.props.onItemSelected(item)\r\n  }\r\n}\r\n\r\nexport default ItemListing\r\n","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport _ from 'lodash'\r\n\r\nimport 'rc-slider/assets/index.css'\r\nimport 'rc-tooltip/assets/bootstrap.css'\r\nimport 'react-tippy/dist/tippy.css';\r\nimport RcTooltip from 'rc-tooltip'\r\nimport Slider from 'rc-slider'\r\nimport { Tooltip } from 'react-tippy'\r\nimport Toggle from 'react-toggle'\r\nimport textContent from 'react-addons-text-content'\r\n\r\nclass EquippedItems extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  selected(item){\r\n\r\n    item.textContent = \"∨\";\r\n    item.classList.add(\"select\");\r\n  }\r\n\r\n  unselected(item){\r\n    item.textContent = \"\";\r\n    item.classList.remove(\"select\");\r\n  }\r\n\r\n  resettingValues(){\r\n    const slider = document.getElementById(\"slider\");\r\n    const baseColorValue = document.getElementById(\"baseColorValue\");\r\n    const mixColorValue = document.getElementById(\"mixColorValue\");\r\n    const rtImg = document.getElementById(\"rightImage\");\r\n\r\n    slider.value = 50;\r\n    mixColorValue.textContent = \"50%\";\r\n    baseColorValue.textContent = \"50%\";\r\n    rtImg.style.opacity = \".5\";\r\n  }\r\n\r\n  chgColor(e){\r\n    const ltColor = document.getElementsByClassName(\"lt\");\r\n    const rtColor = document.getElementsByClassName(\"rt\");\r\n    const itemId = document.getElementById(\"itemId\").value;\r\n    const rtImg = document.getElementById(\"rightImage\");\r\n    const ltImg = document.getElementById(\"leftImage\");\r\n    /*RenderCanvas*/\r\n    const canvasLt = document.getElementById(\"leftImg\").src;\r\n    const canvasRt = document.getElementById(\"rightImg\").src;\r\n\r\n    /*CharacterList*/\r\n    const listLt = window.getComputedStyle(document.getElementById(\"listImgLt\")).getPropertyValue('background-image');\r\n    const listRt = window.getComputedStyle(document.getElementById(\"listImgRt\")).getPropertyValue('background-image');\r\n\r\n    for(let i=0; i<8; i++){\r\n      if(ltColor[i].classList.contains(\"select\") && ltColor[i] != e.target && e.target.classList.contains(\"lt\")){\r\n        this.unselected(ltColor[i]);\r\n      }\r\n      if(rtColor[i].classList.contains(\"select\") && rtColor[i] != e.target && e.target.classList.contains(\"rt\")){\r\n        this.unselected(rtColor[i]);\r\n      }\r\n    };\r\n\r\n\r\n\r\n    if(e.target.classList.contains(\"select\")) {\r\n      console.log(\"selected already\");\r\n      this.unselected(e.target);\r\n    }else{\r\n      this.selected(e.target);\r\n      var ColorPicked = e.target.classList[1];\r\n      var silceId = itemId.slice(0,-1);\r\n      var num = \"\";\r\n      if(e.target.classList.contains(\"rt\")){\r\n        if(ColorPicked == \"black\"){\r\n          num = \"0\";\r\n        }else if(ColorPicked == \"red\"){\r\n          num = \"1\";\r\n        }else if(ColorPicked == \"orange\"){\r\n          num = \"2\";\r\n        }else if(ColorPicked == \"yellow\"){\r\n          num = \"3\";\r\n        }else if(ColorPicked == \"grin\"){\r\n          num = \"4\";\r\n        }else if(ColorPicked == \"blue\"){\r\n          num = \"5\";\r\n        }else if(ColorPicked == \"purple\"){\r\n          num = \"6\";\r\n        }else if(ColorPicked == \"brown\"){\r\n          num = \"7\";\r\n        }\r\n\r\n        this.props.colorChage(silceId+num)\r\n\r\n        /*RenderCanvas*/\r\n        if(canvasRt.indexOf(itemId) != -1){\r\n          const str = canvasRt.replace(itemId, silceId+num);\r\n          document.getElementById(\"rightImg\").setAttribute('crossOrigin', 'Anonymous');\r\n          document.getElementById(\"rightImg\").src = str;\r\n          document.getElementById(\"rtLinkRl\").value = str;\r\n        }else{\r\n          if(canvasRt.indexOf(silceId) != -1){\r\n            const s = canvasRt.substr(0, canvasRt.indexOf(silceId)+4) + num + canvasRt.substr(canvasRt.indexOf(silceId)+4+num.length);\r\n            document.getElementById(\"rightImg\").setAttribute('crossOrigin', 'Anonymous');\r\n            document.getElementById(\"rightImg\").src = s;\r\n            document.getElementById(\"rtLinkRl\").value = s;\r\n          }\r\n        }\r\n\r\n        /*CharacterList*/\r\n        if(listRt.indexOf(itemId) != -1){\r\n          const str = listRt.replace(itemId, silceId+num);\r\n          document.getElementById(\"listImgRt\").style.backgroundImage = str;\r\n        }else{\r\n          if(listRt.indexOf(silceId) != -1){\r\n            const s = listRt.substr(0, listRt.indexOf(silceId)+4) + num + listRt.substr(listRt.indexOf(silceId)+4+num.length);\r\n            document.getElementById(\"listImgRt\").style.backgroundImage = s;\r\n          }\r\n        }\r\n\r\n      }else{\r\n        if(ColorPicked == \"black\"){\r\n          num = \"0\";\r\n        }else if(ColorPicked == \"red\"){\r\n          num = \"1\";\r\n        }else if(ColorPicked == \"orange\"){\r\n          num = \"2\";\r\n        }else if(ColorPicked == \"yellow\"){\r\n          num = \"3\";\r\n        }else if(ColorPicked == \"grin\"){\r\n          num = \"4\";\r\n        }else if(ColorPicked == \"blue\"){\r\n          num = \"5\";\r\n        }else if(ColorPicked == \"purple\"){\r\n          num = \"6\";\r\n        }else if(ColorPicked == \"brown\"){\r\n          num = \"7\";\r\n        }\r\n\r\n        this.props.equippedItems.Hair.id = silceId+num;\r\n\r\n        /*RenderCanvas*/\r\n        if(canvasLt.indexOf(itemId) != -1){\r\n          const str = canvasLt.replace(itemId, silceId+num);\r\n          document.getElementById(\"leftImg\").setAttribute('crossOrigin', 'Anonymous');\r\n          document.getElementById(\"leftImg\").src = str;\r\n        }else{\r\n          if(canvasLt.indexOf(silceId) != -1){\r\n            const s = canvasLt.substr(0, canvasLt.indexOf(silceId)+4) + num + canvasLt.substr(canvasLt.indexOf(silceId)+4+num.length);\r\n            document.getElementById(\"leftImg\").setAttribute('crossOrigin', 'Anonymous');\r\n            document.getElementById(\"leftImg\").src = s;\r\n          }\r\n        }\r\n\r\n        /*CharacterList*/\r\n        if(listLt.indexOf(itemId) != -1){\r\n          const str = listLt.replace(itemId, silceId+num);\r\n          document.getElementById(\"listImgLt\").style.backgroundImage = str;\r\n        }else{\r\n          if(listLt.indexOf(silceId) != -1){\r\n            const s = listLt.substr(0, listLt.indexOf(silceId)+4) + num + listLt.substr(listLt.indexOf(silceId)+4+num.length);\r\n            document.getElementById(\"listImgLt\").style.backgroundImage = s;\r\n          }\r\n        }\r\n      }\r\n      this.resettingValues.bind();\r\n    }\r\n  }\r\n\r\n  chgEyeColor(e){\r\n    const ltColor = document.getElementsByClassName(\"lte\");\r\n    const rtColor = document.getElementsByClassName(\"rte\");\r\n    const itemId = document.getElementById(\"itemIde\").value;\r\n\r\n    /*RenderCanvas*/\r\n    const canvasLt = document.getElementById(\"leftImg\").src;\r\n    const canvasRt = document.getElementById(\"rightImg\").src;\r\n\r\n    /*CharacterList*/\r\n    const listLt = window.getComputedStyle(document.getElementById(\"listImgLt\")).getPropertyValue('background-image');\r\n    const listRt = window.getComputedStyle(document.getElementById(\"listImgRt\")).getPropertyValue('background-image');\r\n\r\n    for(let i=0; i<8; i++){\r\n      if(ltColor[i].classList.contains(\"select\") && ltColor[i] != e.target && e.target.classList.contains(\"lte\")){\r\n        this.unselected(ltColor[i]);\r\n      }\r\n      if(rtColor[i].classList.contains(\"select\") && rtColor[i] != e.target && e.target.classList.contains(\"rte\")){\r\n        this.unselected(rtColor[i]);\r\n      }\r\n    };\r\n\r\n    if(e.target.classList.contains(\"select\")) {\r\n      console.log(\"selected already\");\r\n      this.unselected(e.target);\r\n    }else{\r\n      this.selected(e.target);\r\n      var ColorPicked = e.target.classList[1];\r\n      var silceIdFr = itemId.slice(0,2);\r\n      var silceIdEd = itemId.slice(3,5);\r\n      var num = \"\";\r\n      if(e.target.classList.contains(\"rte\")){\r\n        if(ColorPicked == \"black\"){\r\n          num = \"0\";\r\n        }else if(ColorPicked == \"blue\"){\r\n          num = \"1\";\r\n        }else if(ColorPicked == \"red\"){\r\n          num = \"2\";\r\n        }else if(ColorPicked == \"grin\"){\r\n          num = \"3\";\r\n        }else if(ColorPicked == \"brown\"){\r\n          num = \"4\";\r\n        }else if(ColorPicked == \"emerald\"){\r\n          num = \"5\";\r\n        }else if(ColorPicked == \"purple\"){\r\n          num = \"6\";\r\n        }else if(ColorPicked == \"amethyst\"){\r\n          num = \"7\";\r\n        }\r\n\r\n        this.props.colorEyeChage(silceIdFr+num+silceIdEd);\r\n\r\n        /*RenderCanvas*/\r\n        if(canvasRt.indexOf(itemId) != -1){\r\n          const str = canvasRt.replace(itemId, silceIdFr+num+silceIdEd);\r\n          document.getElementById(\"rightImg\").setAttribute('crossOrigin', 'Anonymous');\r\n          document.getElementById(\"rightImg\").src = str;\r\n        }else{\r\n          if(canvasRt.indexOf(silceIdFr) != -1 && canvasRt.indexOf(silceIdEd) != -1){\r\n            const s = canvasRt.substr(0, canvasRt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17) + num + canvasRt.substr(canvasRt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17+num.length);\r\n            document.getElementById(\"rightImg\").setAttribute('crossOrigin', 'Anonymous');\r\n            document.getElementById(\"rightImg\").src = s;\r\n          }\r\n        }\r\n\r\n        /*CharacterList*/\r\n        if(listRt.indexOf(itemId) != -1){\r\n          const str = listRt.replace(itemId, silceIdFr+num+silceIdEd);\r\n          document.getElementById(\"listImgRt\").style.backgroundImage = str;\r\n        }else{\r\n          if(listRt.indexOf(silceIdFr) != -1 && listRt.indexOf(silceIdEd) != -1){\r\n            const s = listRt.substr(0, listRt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17) + num + listRt.substr(listRt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17+num.length);\r\n            document.getElementById(\"listImgRt\").style.backgroundImage = s;\r\n          }\r\n        }\r\n      }else{\r\n        if(ColorPicked == \"black\"){\r\n          num = \"0\";\r\n        }else if(ColorPicked == \"blue\"){\r\n          num = \"1\";\r\n        }else if(ColorPicked == \"red\"){\r\n          num = \"2\";\r\n        }else if(ColorPicked == \"grin\"){\r\n          num = \"3\";\r\n        }else if(ColorPicked == \"brown\"){\r\n          num = \"4\";\r\n        }else if(ColorPicked == \"emerald\"){\r\n          num = \"5\";\r\n        }else if(ColorPicked == \"purple\"){\r\n          num = \"6\";\r\n        }else if(ColorPicked == \"amethyst\"){\r\n          num = \"7\";\r\n        }\r\n\r\n        this.props.equippedItems.Face.id = silceIdFr+num+silceIdEd;\r\n\r\n        /*RenderCanvas*/\r\n        if(canvasLt.indexOf(itemId) != -1){\r\n          const str = canvasLt.replace(itemId, silceIdFr+num+silceIdEd);\r\n          document.getElementById(\"leftImg\").setAttribute('crossOrigin', 'Anonymous');\r\n          document.getElementById(\"leftImg\").src = str;\r\n        }else{\r\n          if(canvasLt.indexOf(silceIdFr) != -1 && canvasLt.indexOf(silceIdEd) != -1){\r\n            const s = canvasLt.substr(0, canvasLt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17) + num + canvasLt.substr(canvasLt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17+num.length);\r\n            document.getElementById(\"leftImg\").setAttribute('crossOrigin', 'Anonymous');\r\n            document.getElementById(\"leftImg\").src = s;\r\n          }\r\n        }\r\n\r\n        /*CharacterList*/\r\n        if(listLt.indexOf(itemId) != -1){\r\n          const str = listLt.replace(itemId, silceIdFr+num+silceIdEd);\r\n          document.getElementById(\"listImgLt\").style.backgroundImage = str;\r\n        }else{\r\n          if(listLt.indexOf(silceIdFr) != -1 && listLt.indexOf(silceIdEd) != -1){\r\n            const s = listLt.substr(0, listLt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17) + num + listLt.substr(listLt.indexOf(\"%22itemId%22%3A\"+silceIdFr)+17+num.length);\r\n            document.getElementById(\"listImgLt\").style.backgroundImage = s;\r\n          }\r\n        }\r\n      }\r\n      this.resettingValues.bind();\r\n\r\n    }\r\n  }\r\n\r\n  changeZoom(e){\r\n    const baseColorValue = document.getElementById(\"baseColorValue\");\r\n    const mixColorValue = document.getElementById(\"mixColorValue\");\r\n    const rtImg = document.getElementById(\"rightImage\");\r\n    var sliderValue = e.target.value;\r\n\r\n    document.getElementById(\"slider\").value = e.target.value;\r\n    mixColorValue.textContent = (100-sliderValue) + \"%\";\r\n    baseColorValue.textContent = sliderValue + \"%\";\r\n    var newopacity = (100-sliderValue)/100; // opacity [0.0-1.0]=\r\n    rtImg.style.opacity = newopacity;\r\n    document.getElementById(\"rightImg\").style.opacity = newopacity;\r\n    document.getElementById(\"listImgRt\").style.opacity = newopacity;\r\n  }\r\n\r\n  render() {\r\n    const { equippedItems, localized, name, skinId, ...otherProps } = this.props\r\n\r\n    const isGMSRegion = localStorage['region'].toLowerCase() == 'kms'\r\n    const hasName = name && name.length > 0\r\n    const ltColor = document.getElementsByClassName(\"lt\")\r\n    const rtColor = document.getElementsByClassName(\"rt\")\r\n    const ltList = ltColor[0]\r\n    const ltImg = document.getElementById(\"leftImage\")\r\n    const rtList = rtColor[1]\r\n    const rtImg = document.getElementById(\"rightImage\")\r\n\r\n    return (\r\n      <div className='equipped-items'>\r\n        <div className='equipped-items-listing'>\r\n          {\r\n            _.map(equippedItems, item => {\r\n              return (\r\n                <div className='equipped-items-item'>\r\n                  <img src={`https://maplestory.io/api/KMS/328/item/${item.id}/icon`} alt={item.name} id=\"leftImage\"/>\r\n                  <img src={`https://maplestory.io/api/KMS/328/item/${item.id}/icon`} alt={item.name} id=\"rightImage\"/>\r\n                  <div className='equipped-items-item-meta'>\r\n                    <div className='equipped-items-item-meta-name'>{item.name}</div>\r\n                    <div className='equipped-items-item-meta-category'>{item.typeInfo.subCategory}</div>\r\n                    {\r\n                      (item.typeInfo.subCategory === \"Hair\")\r\n                      ? (<div className='equipped-items-item-meta-color'>\r\n                      <input type=\"hidden\" id=\"itemId\" value={item.id}/>\r\n                          <div className='equipped-items-item-meta-colors'>\r\n                            <button className='lt black' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='lt red' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='lt orange' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='lt yellow' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='lt grin' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='lt blue' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='lt purple' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='lt brown' onClick={this.chgColor.bind(this)}></button>\r\n                          </div>\r\n                          <div className='equipped-items-item-meta-colors'>\r\n                            <button className='rt black' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='rt red' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='rt orange' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='rt yellow' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='rt grin' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='rt blue' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='rt purple' onClick={this.chgColor.bind(this)}></button>\r\n                            <button className='rt brown' onClick={this.chgColor.bind(this)}></button>\r\n                          </div>\r\n                          <input type=\"range\" min=\"0\" max=\"100\" id=\"slider\" onChange={this.changeZoom.bind(this)}/>\r\n                          <div className=\"values\">\r\n                            <span id=\"baseColorValue\">50%</span>\r\n                            <span id=\"mixColorValue\">50%</span>\r\n                          </div>\r\n                        </div>)\r\n                      : (<div className='equipped-items-item-meta'></div>)\r\n                    }\r\n                    {\r\n                      (item.typeInfo.subCategory === \"Face\")\r\n                      ? (<div className='equipped-items-item-meta-color'>\r\n                      <input type=\"hidden\" id=\"itemIde\" value={item.id}/>\r\n                          <div className='equipped-items-item-meta-colors'>\r\n                            <button className='lte black' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='lte blue' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='lte red' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='lte grin' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='lte brown' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='lte emerald' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='lte purple' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='lte amethyst' onClick={this.chgEyeColor.bind(this)}></button>\r\n                          </div>\r\n                          <div className='equipped-items-item-meta-colors'>\r\n                            <button className='rte black' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='rte blue' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='rte red' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='rte grin' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='rte brown' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='rte emerald' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='rte purple' onClick={this.chgEyeColor.bind(this)}></button>\r\n                            <button className='rte amethyst' onClick={this.chgEyeColor.bind(this)}></button>\r\n                          </div>\r\n                        </div>)\r\n                      : (<div className='equipped-items-item-meta'></div>)\r\n                    }\r\n                  </div>\r\n                  <span onClick={this.removeItem.bind(this, item)} className=\"btn bg-red text-white right\"><i className=\"fa fa-times\"></i></span>\r\n                </div>\r\n            )})\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  removeItem(item) {\r\n    this.props.onRemoveItem(item);\r\n  }\r\n\r\n  toggleVisibility(item) {\r\n    this.props.onUpdateItem(item, { visible: !(item.visible === undefined ? true : item.visible) })\r\n  }\r\n\r\n  removeItems() {\r\n    this.props.onRemoveItems();\r\n  }\r\n\r\n  updateItemHue(item, newHue) {\r\n    if (newHue.target) newHue = newHue.target.value\r\n    this.props.onUpdateItem(item, {hue: newHue});\r\n  }\r\n\r\n  updateItemContrast(item, newContrast) {\r\n    if(newContrast.target) newContrast = newContrast.target.value\r\n    this.props.onUpdateItem(item, {contrast: newContrast})\r\n  }\r\n\r\n  updateItemBrightness(item, newBrightness) {\r\n    if(newBrightness.target) newBrightness = newBrightness.target.value\r\n    this.props.onUpdateItem(item, {brightness: newBrightness})\r\n  }\r\n\r\n  updateItemAlpha(item, newAlpha) {\r\n    if(newAlpha.target) newAlpha = newAlpha.target.value\r\n    this.props.onUpdateItem(item, {alpha: newAlpha})\r\n  }\r\n\r\n  updateItemSaturation(item, newSaturation) {\r\n    if(newSaturation.target) newSaturation = newSaturation.target.value\r\n    this.props.onUpdateItem(item, {saturation: newSaturation})\r\n  }\r\n\r\n  updateItemISlot(item, newISlot) {\r\n    if(newISlot.target) newISlot = newISlot.target.value\r\n    this.props.onUpdateItem(item, {islot: newISlot})\r\n  }\r\n\r\n  updateItemVSlot(item, newVSlot) {\r\n    if(newVSlot.target) newVSlot = newVSlot.target.value\r\n    this.props.onUpdateItem(item, {vslot: newVSlot})\r\n  }\r\n\r\n  customizeItem(item) {\r\n    return (<div className='customizing-item'>\r\n      <span>\r\n        <span className='flex'>Hue<input type='number' className='hue-picker-value' value={item.hue || 0} onChange={this.updateItemHue.bind(this, item)} /></span>\r\n        <Slider\r\n          className='hue-picker'\r\n          value={item.hue || 0}\r\n          min={0}\r\n          max={360}\r\n          handle={handle}\r\n          onChange={this.updateItemHue.bind(this, item)} />\r\n      </span>\r\n      <span>\r\n        <span className='flex'>Contrast<input type='number' className='contrast-picker-value' value={item.contrast === undefined ? 1 : item.contrast} onChange={this.updateItemContrast.bind(this, item)} /></span>\r\n        <Slider\r\n          className='contrast-picker'\r\n          value={item.contrast === undefined ? 1 : item.contrast}\r\n          min={0}\r\n          step={0.1}\r\n          max={10}\r\n          handle={handle}\r\n          onChange={this.updateItemContrast.bind(this, item)} />\r\n      </span>\r\n      <span>\r\n        <span className='flex'>Brightness<input type='number' className='brightness-picker-value' value={item.brightness === undefined ? 1 : item.brightness} onChange={this.updateItemBrightness.bind(this, item)} /></span>\r\n        <Slider\r\n          className='brightness-picker'\r\n          value={item.brightness === undefined ? 1 : item.brightness}\r\n          min={0}\r\n          step={0.1}\r\n          max={10}\r\n          handle={handle}\r\n          onChange={this.updateItemBrightness.bind(this, item)} />\r\n      </span>\r\n      <span>\r\n        <span className='flex'>Saturation<input type='number' className='saturation-picker-value' value={item.saturation === undefined ? 1 : item.saturation} onChange={this.updateItemSaturation.bind(this, item)} /></span>\r\n        <Slider\r\n          className='saturation-picker'\r\n          value={item.saturation === undefined ? 1 : item.saturation}\r\n          min={0}\r\n          step={0.1}\r\n          max={10}\r\n          handle={handle}\r\n          onChange={this.updateItemSaturation.bind(this, item)} />\r\n      </span>\r\n      <span>\r\n        <span className='flex'>Alpha<input type='number' className='alpha-picker-value' value={item.alpha === undefined ? 1 : item.alpha} onChange={this.updateItemAlpha.bind(this, item)} /></span>\r\n        <Slider\r\n          className='alpha-picker'\r\n          value={item.alpha === undefined ? 1 : item.alpha}\r\n          min={0}\r\n          step={0.1}\r\n          max={1}\r\n          handle={handle}\r\n          onChange={this.updateItemAlpha.bind(this, item)} />\r\n      </span>\r\n      <span>\r\n        <span className='flex item-property'>\r\n          ISlot\r\n          <input\r\n            className='item-islot'\r\n            value={item.islot}\r\n            onChange={this.updateItemISlot.bind(this, item)} />\r\n        </span>\r\n      </span>\r\n      <span>\r\n        <span className='flex item-property'>\r\n          VSlot\r\n          <input\r\n            className='item-vslot'\r\n            value={item.vslot}\r\n            onChange={this.updateItemVSlot.bind(this, item)} />\r\n        </span>\r\n      </span>\r\n      <label>\r\n        <span>Visible</span>\r\n        <Toggle onChange={this.toggleVisibility.bind(this, item)} checked={item.visible === undefined ? true: item.visible} />\r\n      </label>\r\n    </div>);\r\n  }\r\n}\r\n\r\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\r\nconst Range = createSliderWithTooltip(Slider.Range);\r\nconst Handle = Slider.Handle;\r\n\r\nconst handle = (props) => {\r\n  const { value, dragging, index, ...restProps } = props;\r\n  return (\r\n    <RcTooltip\r\n      prefixCls=\"rc-slider-tooltip\"\r\n      overlay={value}\r\n      visible={dragging}\r\n      placement=\"top\"\r\n      style={{border: \"solid 2px hsl(\"+value+\", 53%, 53%)\"}}\r\n      key={index}\r\n    >\r\n      <Handle value={value} {...restProps} />\r\n    </RcTooltip>\r\n  );\r\n};\r\n\r\nexport default EquippedItems\r\n","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport _ from 'lodash'\r\nimport Toggle from 'react-toggle'\r\nimport { Tooltip } from 'react-tippy'\r\nimport axios from 'axios'\r\nimport 'rc-slider/assets/index.css'\r\nimport 'rc-tooltip/assets/bootstrap.css'\r\nimport 'react-tippy/dist/tippy.css';\r\nimport RcTooltip from 'rc-tooltip'\r\nimport Slider from 'rc-slider'\r\nimport mergeImages from 'merge-images';\r\n\r\nclass CharacterEntry extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      actions: ['stand1', 'stand2'],\r\n      emotions: [\r\n        'angry',\r\n        'bewildered',\r\n        'blaze',\r\n        'blink',\r\n        'bowing',\r\n        'cheers',\r\n        'chu',\r\n        'cry',\r\n        'dam',\r\n        'default',\r\n        'despair',\r\n        'glitter',\r\n        'hit',\r\n        'hot',\r\n        'hum',\r\n        'love',\r\n        'oops',\r\n        'pain',\r\n        'qBlue',\r\n        'shine',\r\n        'smile',\r\n        'stunned',\r\n        'troubled',\r\n        'vomit',\r\n        'wink'\r\n      ],\r\n      frames: { stand1: 3, stand2: 3 },\r\n      frameDelay: 1000\r\n    }\r\n\r\n    this.updateCharacterDetails(props, true)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const ifChanged = ['skin', 'selectedItems', 'action', 'frame', 'mercEars', 'illiumEars', 'zoom', 'flipX']\r\n    if (_.find(ifChanged, (property) => this.props.character[property] != prevProps.character[property])){\r\n      this.updateCharacterDetails(this.props, false)\r\n    }\r\n  }\r\n\r\n  updateCharacterDetails(props, isSync) {\r\n    const { character } = props\r\n    const itemsWithEmotion = _.values(character.selectedItems)\r\n    .filter(item => item.id && (item.visible === undefined || item.visible))\r\n    .map(item => {\r\n      var itemEntry = item.id >= 20000 && item.id <= 29999 ? `${item.id}:${character.emotion}` : item.id\r\n      return itemEntry\r\n    });\r\n\r\n    const { tryCount } = this.state\r\n\r\n    let itemEntries = Object.values(character.selectedItems).filter(item => item.id && (item.visible === undefined || item.visible)).map(item => {\r\n      let itemEntry = {\r\n        itemId: Number(item.id),\r\n        version: \"328\",\r\n        region: \"KMS\"\r\n      }\r\n\r\n      if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.animationName = character.emotion\r\n      if (item.region && item.region.toLowerCase() != 'kms') itemEntry.region = item.region\r\n      if (item.version && item.version.toLowerCase() != '328') itemEntry.version = item.version\r\n      if (item.hue) itemEntry.hue = item.hue\r\n      if (item.saturation != 1) itemEntry.saturation = item.saturation\r\n      if (item.contrast != 1) itemEntry.contrast = item.contrast\r\n      if (item.brightness != 1) itemEntry.brightness = item.brightness\r\n      if (item.alpha != 1) itemEntry.alpha = item.alpha\r\n      if (item.islot) itemEntry.islot = item.islot\r\n      if (item.vslot) itemEntry.vslot = item.vslot\r\n\r\n      return itemEntry\r\n    })\r\n\r\n    let backgroundColor = JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"}\r\n    const bgColorText = `${backgroundColor.rgb.r},${backgroundColor.rgb.g},${backgroundColor.rgb.b},${backgroundColor.rgb.a}`\r\n\r\n    let itemEntriesPayload = JSON.stringify([\r\n      ...itemEntries,\r\n      { itemId: Number(character.skin), version: \"210.1.1\" },\r\n      { itemId: Number(character.skin) + 10000, version: \"210.1.1\"}\r\n    ])\r\n    itemEntriesPayload = encodeURIComponent(itemEntriesPayload.substr(1, itemEntriesPayload.length - 2))\r\n\r\n    const link = `https://maplestory.io/api/Character/${itemEntriesPayload}/${character.action}/${character.animating ? 'animated' : character.frame}?showears=${character.mercEars}&showLefEars=${character.illiumEars}&showHighLefEars=${character.highFloraEars}&resize=${character.zoom}&name=${encodeURI(character.name || '')}&flipX=${character.flipX}` + (character.includeBackground ? `&bgColor=${bgColorText}` : '')\r\n\r\n    if (isSync) {\r\n      this.state.linkUsed = link\r\n      axios.get(link).then(function(res) {\r\n        if (this.state.linkUsed == link) {\r\n          this.setState({\r\n            details: res.data\r\n          })\r\n        }\r\n      }.bind(this))\r\n    } else this.setState({ linkUsed: link }, () => {\r\n      axios.get(link).then(function(res) {\r\n        if (this.state.linkUsed == link) {\r\n          this.setState({\r\n            details: res.data\r\n          })\r\n        }\r\n      }.bind(this))\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { character, isSelected, canvasMode, onUpdateCharacter, onDeleteCharacter, ...otherProps } = this.props\r\n\r\n    let itemEntries = Object.values(character.selectedItems).filter(item => item.id && (item.visible === undefined || item.visible)).map(item => {\r\n      let itemEntry = {\r\n        itemId: Number(item.id),\r\n        version: \"328\",\r\n        region: \"KMS\"\r\n      }\r\n\r\n      if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.animationName = character.emotion\r\n      if (item.region && item.region.toLowerCase() != 'kms') itemEntry.region = item.region\r\n      if (item.version && item.version.toLowerCase() != '328') itemEntry.version = item.version\r\n      if (item.hue) itemEntry.hue = item.hue\r\n      if (item.saturation != 1) itemEntry.saturation = item.saturation\r\n      if (item.contrast != 1) itemEntry.contrast = item.contrast\r\n      if (item.brightness != 1) itemEntry.brightness = item.brightness\r\n      if (item.alpha != 1) itemEntry.alpha = item.alpha\r\n      if (item.islot) itemEntry.islot = item.islot\r\n      if (item.vslot) itemEntry.vslot = item.vslot\r\n\r\n      return itemEntry\r\n    })\r\n\r\n    let backgroundColor = JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"}\r\n    const bgColorText = `${backgroundColor.rgb.r},${backgroundColor.rgb.g},${backgroundColor.rgb.b},${backgroundColor.rgb.a}`\r\n\r\n    let itemEntriesPayload = JSON.stringify([\r\n      ...itemEntries,\r\n      { itemId: Number(character.skin), version: \"210.1.1\"  },\r\n      { itemId: Number(character.skin) + 10000, version: \"210.1.1\" }\r\n    ])\r\n    itemEntriesPayload = encodeURIComponent(itemEntriesPayload.substr(1, itemEntriesPayload.length - 2))\r\n\r\n    const link = `https://maplestory.io/api/Character/${itemEntriesPayload}/${character.action}/${character.animating ? 'animated' : character.frame}?showears=${character.mercEars}&showLefEars=${character.illiumEars}&showHighLefEars=${character.highFloraEars}&resize=${character.zoom}&name=${encodeURI(character.name || '')}&flipX=${character.flipX}` + (character.includeBackground ? `&bgColor=${bgColorText}` : '')\r\n\r\n    /*IMG 2*/\r\n        let itemEntriesT = Object.values(character.selectedItems).filter(item => item.id && (item.visible === undefined || item.visible)).map(item => {\r\n          let itemEntry = {\r\n            itemId: Number(item.id),\r\n            version: \"328\",\r\n            region: \"KMS\"\r\n          }\r\n\r\n          if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.animationName = character.emotion\r\n          if (item.region && item.region.toLowerCase() != 'kms') itemEntry.region = item.region\r\n          if (item.version && item.version.toLowerCase() != '328') itemEntry.version = item.version\r\n          if (item.hue) itemEntry.hue = item.hue\r\n          if (item.saturation != 1) itemEntry.saturation = item.saturation\r\n          if (item.contrast != 1) itemEntry.contrast = item.contrast\r\n          if (item.brightness != 1) itemEntry.brightness = item.brightness\r\n          if (item.alpha != 1) itemEntry.alpha = item.alpha\r\n          if (item.islot) itemEntry.islot = item.islot\r\n          if (item.vslot) itemEntry.vslot = item.vslot\r\n          if ((item.id >= 30000 && item.id < 49999) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.itemId = character.newHair\r\n        //  if ((item.id >= 20000 && item.id < 29999) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.itemId = character.newFace\r\n\r\n          return itemEntry\r\n        })\r\n\r\n        let backgroundColorT = JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"}\r\n        const bgColorTextT = `${backgroundColorT.rgb.r},${backgroundColorT.rgb.g},${backgroundColorT.rgb.b},${backgroundColorT.rgb.a}`\r\n\r\n        let itemEntriesPayloadT = JSON.stringify([\r\n          ...itemEntriesT,\r\n          { itemId: Number(character.skin), version: \"210.1.1\" },\r\n          { itemId: Number(character.skin) + 10000, version: \"210.1.1\"}\r\n        ])\r\n        itemEntriesPayloadT = encodeURIComponent(itemEntriesPayloadT.substr(1, itemEntriesPayloadT.length - 2))\r\n\r\n        const linkT = `https://maplestory.io/api/Character/${itemEntriesPayloadT}/${character.action}/${character.animating ? 'animated' : character.frame}?showears=${character.mercEars}&showLefEars=${character.illiumEars}&showHighLefEars=${character.highFloraEars}&resize=${character.zoom}&name=${encodeURI(character.name || '')}&flipX=${character.flipX}` + (character.includeBackground ? `&bgColor=${bgColorTextT}` : '')\r\n\r\n    /*//--IMG 2*/\r\n\r\n    return (\r\n      <Tooltip html={this.customizeCharacter(character)} delay={[100, 300]} position={canvasMode ? undefined : 'bottom'} interactive={true} theme='light' distance={400} arrow={true}>\r\n        <div\r\n          className={'character ' + (character.visible ? 'disabled ' : 'enabled ') + (isSelected ? 'active' : 'inactive')}\r\n          style={{\r\n            backgroundImage: 'url('+link+')'\r\n          }}\r\n          id=\"listImgLt\"\r\n          {...otherProps}>&nbsp;</div>\r\n          <div\r\n            className={'character ' + (character.visible ? 'disabled ' : 'enabled ') + (isSelected ? 'active' : 'inactive')}\r\n            style={{\r\n              backgroundImage: 'url('+linkT+')'\r\n            }}\r\n            id=\"listImgRt\"\r\n            {...otherProps}>&nbsp;</div>\r\n      </Tooltip>\r\n    )\r\n  }\r\n\r\n  customizeCharacter(character) {\r\n    const { localized } = this.props\r\n    const { actions, frames, emotions } = this.state\r\n    const isGMSRegion = localStorage['region'].toLowerCase() == 'kms'\r\n    const hasName = character.name && character.name.length > 0\r\n    return (<div className='character-customizeable-options-container'>\r\n    <div className='character-customizeable-options'>\r\n      <label className='name'>\r\n        <span>{localized.name}</span>\r\n        <input type='text' value={character.name} onChange={this.changeName.bind(this)} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.expression}</span>\r\n        <select disabled={!character.selectedItems.Face} onChange={this.changeEmotion.bind(this)} value={character.emotion}>\r\n          {\r\n            emotions.map(e => (\r\n              <option value={e} key={e}>{e}</option>\r\n            ))\r\n          }\r\n        </select>\r\n      </label>\r\n      <label>\r\n        <span>{localized.action}</span>\r\n        <select onChange={this.changeAction.bind(this)} value={character.action}>\r\n        <option value=\"stand1\">Standing (1-Handed)</option>\r\n        <option value=\"stand2\">Standing (2-Handed)</option>\r\n        <option value=\"walk1\">Walking (1-Handed)</option>\r\n        <option value=\"walk2\">Walking (2-Handed)</option>\r\n        <option value=\"alert\">Alert</option>\r\n        <option value=\"fly\">Flying</option>\r\n        <option value=\"heal\">Healing</option>\r\n        <option value=\"jump\">Jumping</option>\r\n        <option value=\"ladder\">Ladder</option>\r\n        <option value=\"rope\">Rope</option>\r\n        <option value=\"prone\">Prone</option>\r\n        <option value=\"proneStab\">Prone + Stab</option>\r\n        <option value=\"shoot1\">Shoot (1-Handed)</option>\r\n        <option value=\"shoot2\">Shoot (2-Handed)</option>\r\n        <option value=\"shootF\">Shoot (0F)</option>\r\n        <option value=\"sit\">Sitting</option>\r\n        <option value=\"stabO1\">Stab (01)</option>\r\n        <option value=\"stabO2\">Stab (02)</option>\r\n        <option value=\"stabOF\">Stab (0F)</option>\r\n        <option value=\"stabT1\">Stab (T1)</option>\r\n        <option value=\"stabT2\">Stab (T2)</option>\r\n        <option value=\"stabTF\">Stab (TF)</option>\r\n        <option value=\"swingO1\">Swing (01)</option>\r\n        <option value=\"swingO2\">Swing (02)</option>\r\n        <option value=\"swingO3\">Swing (03)</option>\r\n        <option value=\"swingOF\">Swing (0F)</option>\r\n        <option value=\"swingP1\">Swing (P1)</option>\r\n        <option value=\"swingP2\">Swing (P2)</option>\r\n        <option value=\"swingPF\">Swing (PF)</option>\r\n        <option value=\"swingT1\">Swing (T1)</option>\r\n        <option value=\"swingT2\">Swing (T2)</option>\r\n        <option value=\"swingT3\">Swing (T3)</option>\r\n        <option value=\"swingTF\">Swing (TF)</option>\r\n        </select>\r\n      </label>\r\n      <label>\r\n        <span>{localized.skin}</span>\r\n        <select onChange={this.changeSkin.bind(this)} value={character.skin}>\r\n            <option value='2000'>크림 피부</option>\r\n            <option value='2004'>스산 피부</option>\r\n            <option value='2010'>노블레스 피부</option>\r\n            <option value='2001'>태닝 피부</option>\r\n            <option value='2003'>밀키 피부</option>\r\n            <option value='2009'>창백 피부</option>\r\n            <option value='2013'>데모닉 피부</option>\r\n            <option value='2002'>헬시 피부</option>\r\n            <option value='2011'>고져스 피부</option>\r\n            <option value='2012'>엘프 피부</option>\r\n            <option value='2015'>뽀송 꽃잎 피부</option>\r\n            <option value='2016'>홍조 꽃잎 피부</option>\r\n          </select>\r\n      </label>\r\n      <label>\r\n        <span>{localized.visible}</span>\r\n        <Toggle onChange={this.toggleVisibility.bind(this)} checked={character.visible} />\r\n      </label>\r\n      <label className=\"section-title\">\r\n        <span>귀 모양</span>\r\n      </label>\r\n      <label>\r\n        <span>{localized.illiumEars}</span>\r\n        <Toggle\r\n          onChange={this.changeIlliumEars.bind(this)}\r\n          checked={character.illiumEars} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.highFloraEars}</span>\r\n        <Toggle\r\n          onChange={this.changeHighFloraEars.bind(this)}\r\n          checked={character.highFloraEars} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.mercEars}</span>\r\n        <Toggle\r\n          onChange={this.changeMercEars.bind(this)}\r\n          checked={character.mercEars} />\r\n      </label>\r\n      <label className=\"section-title\">\r\n        <span>추가 옵션</span>\r\n      </label>\r\n      <label>\r\n        <span>{localized.animate}</span>\r\n        <Toggle\r\n          onChange={this.changeAnimating.bind(this)}\r\n          checked={character.animating} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.addBgToGif}</span>\r\n        <Toggle\r\n          onChange={this.changeIncludeBackground.bind(this)}\r\n          checked={character.includeBackground} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.flipHorizontal}</span>\r\n        <Toggle onChange={this.toggleFlipX.bind(this)} checked={character.flipX} />\r\n      </label>\r\n      <br />\r\n      <div className=\"margin-btn-new\">\r\n        <a href=\"#\" className='btn btn-large bg-blue text-white right' onClick={this.imageSaveLocal.bind(this)}>이미지로 저장하기</a>\r\n        <img src=\"\" id=\"bsImg\" />\r\n      </div>\r\n    </div>\r\n\r\n    <div className=\"margin-top-10\">\r\n      <a href=\"#\" className='btn btn-large bg-red text-white right' onClick={this.deleteCharacter.bind(this)}>{localized.deleteCharacter}</a>\r\n    </div>\r\n    </div>)\r\n  }\r\n\r\n  imageSaveLocal(){\r\n    const canvasLt = document.getElementById(\"leftImg\").src;\r\n    const canvasRt = document.getElementById(\"rightImg\").src;\r\n    const imgOpcy = window.getComputedStyle(document.getElementById(\"rightImg\")).getPropertyValue('opacity');\r\n    const imageSrc = \"\";\r\n\r\n    mergeImages([\r\n      { src: canvasLt },\r\n      { src: canvasRt, opacity: imgOpcy }\r\n    ]).then(b64 => {\r\n      var img = document.getElementById(\"bsImg\")\r\n      var imgData = atob(b64.split(\",\")[1])\r\n      var len = imgData.length\r\n      var buf = new ArrayBuffer(len) // 비트를 담을 버퍼를 만든다.\r\n      var view = new Uint8Array(buf) // 버퍼를 8bit Unsigned Int로 담는다.\r\n      var blob, i\r\n\r\n      for (i = 0; i < len; i++) {\r\n        view[i] = imgData.charCodeAt(i) & 0xff // 비트 마스킹을 통해 msb를 보호한다.\r\n      }\r\n      // Blob 객체를 image/png 타입으로 생성한다. (application/octet-stream도 가능)\r\n      blob = new Blob([view], { type: \"application/octet-stream\" })\r\n\r\n      if (window.navigator.msSaveOrOpenBlob) {\r\n        window.navigator.msSaveOrOpenBlob(blob, \"new_file_name.png\")\r\n      } else {\r\n        //var url = URL.createObjectURL(blob);\r\n        var a = document.createElement(\"a\")\r\n        a.style = \"display: none\"\r\n        //a.href = url;\r\n        a.href = b64\r\n        a.download = \"new_file_name.png\"\r\n        document.body.appendChild(a)\r\n        a.click()\r\n\r\n        setTimeout(function() {\r\n          document.body.removeChild(a)\r\n          //URL.revokeObjectURL(url);\r\n        }, 100)\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  changeIncludeBackground() {\r\n    this.props.onUpdateCharacter(this.props.character, { includeBackground: !this.props.character.includeBackground })\r\n  }\r\n\r\n  changeAnimating() {\r\n    this.props.onUpdateCharacter(this.props.character, { animating: !this.props.character.animating })\r\n  }\r\n\r\n  changeName(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { name: e.target.value })\r\n  }\r\n\r\n  toggleFHSnap(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { fhSnap: !this.props.character.fhSnap })\r\n  }\r\n\r\n  toggleFlipX(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { flipX: !this.props.character.flipX })\r\n  }\r\n\r\n  deleteCharacter() {\r\n    const { localized } = this.props;\r\n    const confirmation = window.confirm(localized.deleteCharacterConfirm);\r\n\r\n    if(confirmation) {\r\n      this.props.onDeleteCharacter(this.props.character)\r\n    }\r\n  }\r\n\r\n  onClone() {\r\n    this.props.onClone(this.props.character)\r\n  }\r\n\r\n  onExport() {\r\n    const a = document.createElement('a')\r\n    a.style = 'display: none;'\r\n    document.body.appendChild(a)\r\n\r\n    const payload = JSON.stringify(this.props.character, null, 2),\r\n      blob = new Blob([payload], {type: 'octet/stream'}),\r\n      url = window.URL.createObjectURL(blob)\r\n    a.href = url\r\n    if (this.props.character.name)\r\n      a.download = this.props.character.name + '-data.json'\r\n    else\r\n      a.download = 'character-data.json'\r\n    a.click()\r\n\r\n    window.URL.revokeObjectURL(url)\r\n    a.remove()\r\n  }\r\n\r\n  changeSkin(e) {\r\n    this.props.onUpdateCharacter(this.props.character, {skin: e.target.value})\r\n  }\r\n\r\n  changeEmotion(e) {\r\n    this.props.onUpdateCharacter(this.props.character, {emotion: e.target.value})\r\n  }\r\n\r\n  changeAction (e) {\r\n    this.props.onUpdateCharacter(this.props.character, { action: e.target.value })\r\n  }\r\n\r\n  changeMercEars(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { mercEars: e.target.checked });\r\n  }\r\n\r\n  changeHighFloraEars(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { highFloraEars: e.target.checked });\r\n  }\r\n\r\n  changeIlliumEars(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { illiumEars: e.target.checked });\r\n  }\r\n\r\n  changeZoom(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { zoom: e });\r\n  }\r\n\r\n  changeFrame(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { frame: e });\r\n  }\r\n\r\n  toggleVisibility(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { visible: !this.props.character.visible })\r\n  }\r\n\r\n  toggleLock(e) {\r\n    this.props.onUpdateCharacter(this.props.character, { locked: !this.props.character.locked })\r\n  }\r\n}\r\n\r\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\r\nconst Range = createSliderWithTooltip(Slider.Range);\r\nconst Handle = Slider.Handle;\r\n\r\nconst handle = (props) => {\r\n  const { value, dragging, index, ...restProps } = props;\r\n  return (\r\n    <RcTooltip\r\n      prefixCls=\"rc-slider-tooltip\"\r\n      overlay={value}\r\n      visible={dragging}\r\n      placement=\"top\"\r\n      style={{border: \"solid 2px hsl(\"+value+\", 53%, 53%)\"}}\r\n      key={index}\r\n    >\r\n      <Handle value={value} {...restProps} />\r\n    </RcTooltip>\r\n  );\r\n};\r\n\r\nexport default CharacterEntry\r\n","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport _ from 'lodash'\r\nimport Toggle from 'react-toggle'\r\nimport { Tooltip } from 'react-tippy'\r\nimport axios from 'axios'\r\nimport 'rc-slider/assets/index.css'\r\nimport 'rc-tooltip/assets/bootstrap.css'\r\nimport 'react-tippy/dist/tippy.css';\r\nimport RcTooltip from 'rc-tooltip'\r\nimport Slider from 'rc-slider'\r\n\r\nconst petLoader = axios.get(`https://maplestory.io/api/KMS/328/pet`)\r\n  .then(petResp =>\r\n    {\r\n      let uniqPets = _.uniqBy(petResp.data, pet => pet.key)\r\n      pets = uniqPets.map(pet => {\r\n        return {\r\n          petId: pet.key,\r\n          name: pet.value\r\n        }\r\n      })\r\n    }) // For some reason the standard [].map doesn't work here. :(\r\n\r\nlet pets = []\r\n\r\nclass PetEntry extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      actions: ['stand1', 'stand0']\r\n    }\r\n\r\n    // Populate true action list\r\n    axios.get(`https://maplestory.io/api/KMS/328/pet/actions/${(props.pet || {}).petId || 5000000}`)\r\n      .then(response => this.setState({actions: _.sortBy(_.keys(response.data), a => a)}))\r\n    if (pets.length > 0) this.state.petsLoaded = true;\r\n    else petLoader.then(() => this.setState({ petsLoaded: true }))\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.pet && this.props.pet && prevProps.pet.petId == this.props.pet.petId) return\r\n    const { pet: { petId } } = this.props\r\n\r\n    axios.get(`https://maplestory.io/api/KMS/328/pet/actions/${petId || 5000000}`)\r\n      .then(response => this.setState({actions: _.sortBy(_.keys(response.data), a => a)}))\r\n  }\r\n\r\n  render() {\r\n    const { pet, isSelected, canvasMode, onUpdatePet, onDeletePet, ...otherProps } = this.props\r\n    return (\r\n      <Tooltip html={this.customizePet(pet)} delay={[100, 300]} position={canvasMode ? undefined : 'bottom'} interactive={true} theme='light' distance={295} arrow={true}>\r\n        <div\r\n          className={'pet ' + (pet.visible ? 'disabled ' : 'enabled ') + (isSelected ? 'active' : 'inactive')}\r\n          style={{\r\n            backgroundImage: 'url('+pet.summary+')',\r\n            transform: pet.flipX ? 'scaleX(-1)' : ''\r\n          }}\r\n          {...otherProps}>&nbsp;</div>\r\n      </Tooltip>\r\n    )\r\n  }\r\n\r\n  customizePet(pet) {\r\n    const { localized } = this.props\r\n    return (<div className='pet-customizeable-options'>\r\n      <div>\r\n        <a href=\"#\" className='btn bg-red text-white right' onClick={this.deletePet.bind(this)}>{localized.deletePet}</a>\r\n      </div>\r\n      <label>\r\n        <span>{localized.petType}</span>\r\n        <select onChange={this.changePetId.bind(this)} value={pet.petId}>\r\n          {\r\n            pets.map(a => (\r\n              <option value={a.petId} key={'petSelect' + a.petId}>{a.name}</option>\r\n            ))\r\n          }\r\n        </select>\r\n      </label>\r\n      <label>\r\n        <span>{localized.action}</span>\r\n        <select onChange={this.changeAction.bind(this)} value={pet.animation}>\r\n          {\r\n            this.state.actions.map(a => (\r\n              <option value={a} key={a}>{a}</option>\r\n            ))\r\n          }\r\n        </select>\r\n      </label>\r\n      <label>\r\n        <span>{localized.frame}</span>\r\n        <Slider\r\n          value={pet.frame || 0}\r\n          min={0}\r\n          max={10}\r\n          handle={handle}\r\n          onChange={this.changeFrame.bind(this)} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.zoom}</span>\r\n        <Slider\r\n          value={pet.zoom || 1}\r\n          min={1}\r\n          max={10}\r\n          handle={handle}\r\n          onChange={this.changeZoom.bind(this)} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.visible}</span>\r\n        <Toggle onChange={this.toggleVisibility.bind(this)} checked={pet.visible} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.flipHorizontal}</span>\r\n        <Toggle onChange={this.toggleFlipX.bind(this)} checked={pet.flipX} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.footholdSnapping}</span>\r\n        <Toggle onChange={this.toggleFHSnap.bind(this)} checked={pet.fhSnap || false} />\r\n      </label>\r\n      <label>\r\n        <span>{localized.lock}</span>\r\n        <Toggle onChange={this.toggleLock.bind(this)} checked={pet.locked} />\r\n      </label>\r\n    </div>)\r\n  }\r\n\r\n  toggleFHSnap(e) {\r\n    this.props.onUpdatePet(this.props.pet, { fhSnap: !this.props.pet.fhSnap })\r\n  }\r\n\r\n  toggleFlipX(e) {\r\n    this.props.onUpdatePet(this.props.pet, { flipX: !this.props.pet.flipX })\r\n  }\r\n\r\n  deletePet() {\r\n    this.props.onDeletePet(this.props.pet)\r\n  }\r\n\r\n  changePetId (e) {\r\n    this.props.onUpdatePet(this.props.pet, { petId: e.target.value })\r\n  }\r\n\r\n  changeAction (e) {\r\n    this.props.onUpdatePet(this.props.pet, { animation: e.target.value })\r\n  }\r\n\r\n  changeFrame(e) {\r\n    this.props.onUpdatePet(this.props.pet, { frame: e });\r\n  }\r\n\r\n  changeZoom(e) {\r\n    this.props.onUpdatePet(this.props.pet, { zoom: e });\r\n  }\r\n\r\n  toggleVisibility(e) {\r\n    this.props.onUpdatePet(this.props.pet, { visible: !this.props.pet.visible })\r\n  }\r\n\r\n  toggleLock(e) {\r\n    this.props.onUpdatePet(this.props.pet, { locked: !this.props.pet.locked })\r\n  }\r\n}\r\n\r\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\r\nconst Range = createSliderWithTooltip(Slider.Range);\r\nconst Handle = Slider.Handle;\r\n\r\nconst handle = (props) => {\r\n  const { value, dragging, index, ...restProps } = props;\r\n  return (\r\n    <RcTooltip\r\n      prefixCls=\"rc-slider-tooltip\"\r\n      overlay={value}\r\n      visible={dragging}\r\n      placement=\"top\"\r\n      style={{border: \"solid 2px hsl(\"+value+\", 53%, 53%)\"}}\r\n      key={index}\r\n    >\r\n      <Handle value={value} {...restProps} />\r\n    </RcTooltip>\r\n  );\r\n};\r\n\r\nexport default PetEntry\r\n","import React, { Component } from 'react'\nimport './index.css'\nimport _ from 'lodash'\nimport Toggle from 'react-toggle'\nimport { Tooltip } from 'react-tippy'\nimport CharacterEntry from './CharacterEntry'\nimport PetEntry from './PetEntry'\n\nclass CharacterList extends Component {\n  render() {\n    const { renderables, selectedIndex, localized } = this.props\n    return (\n      <div className='character-list'>\n        <div>\n          {renderables.map((c, i) => {\n            if (c.type === undefined || c.type == 'character') {\n              return (<CharacterEntry\n                character={c}\n                isSelected={i == selectedIndex}\n                onClick={this.clickCharacter.bind(this, c)}\n                onUpdateCharacter={this.props.onUpdateCharacter}\n                key={'character' + i}\n                localized={localized}\n                onClone={this.props.onCloneCharacter}\n                onDeleteCharacter={this.props.onDeleteCharacter} />)\n            } else if (c.type == 'pet') {\n              return (<PetEntry\n                  pet={c}\n                  isSelected={i == selectedIndex}\n                  key={'pet' + i}\n                  localized={localized}\n                  onClick={this.clickCharacter.bind(this, c)}\n                  onUpdatePet={this.props.onUpdatePet}\n                  onDeletePet={this.props.onDeletePet}\n                />);\n            }\n          })}\n          <Tooltip html={this.renderAddList()} position='top' theme='light' title=\"Create a new..\" interactive={true}>\n            <div className='add'><span>+</span>\n          </div></Tooltip>\n          <input type='file' id='importFile' style={{display: 'none'}} onChange={this.props.onImportCharacter.bind(this)} multiple />\n        </div>\n      </div>\n    )\n  }\n\n  renderAddList() {\n    return (<ul className='add-possible'>\n      <li className='add-title'>Create a new..</li>\n      <li className='clickable' onClick={this.props.onAddCharacter}>{this.props.localized.character}</li>\n      <li className='clickable' onClick={this.props.onAddPet}>{this.props.localized.pet}</li>\n      <li className='clickable bold' onClick={this.onOpenImportCharacter}>{this.props.localized.importCharacter}</li>\n    </ul>);\n  }\n\n  onOpenImportCharacter() {\n    document.getElementById('importFile').click()\n  }\n\n  clickCharacter(character, e) {\n    if (e.target == e.currentTarget)\n      this.props.onUpdateSelectedCharacter(character)\n  }\n}\n\nexport default CharacterList\n","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport Draggable, { DraggableCore } from 'react-draggable'\r\nimport { NotificationManager } from 'react-notifications'\r\n\r\nclass GenericCanvasElement extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      tryCount: 0\r\n    }\r\n  }\r\n  render() {\r\n    const { renderable, onUpdateRenderablePosition, summary, onStart, onStop, onClick, selected } = this.props\r\n    const { tryCount } = this.state\r\n    let imgLink = summary\r\n    if (summary.indexOf('?') !== -1) imgLink = summary + `&tryCount=${tryCount}`\r\n    else imgLink = summary + `?tryCount=${tryCount}`\r\n    return (\r\n      <DraggableCore\r\n        onStart={onStart}\r\n        onStop={onStop}\r\n        onDrag={onUpdateRenderablePosition}\r\n        position={renderable.position}\r\n        >\r\n        <div className={'flex' + (selected ? ' selected-canvas-element' : '')} style={{ transform: `translate(${renderable.position.x}px, ${renderable.position.y}px) translate(-50%, -100%)` }}>\r\n          <img\r\n            src={imgLink}\r\n            alt=''\r\n            className='renderable-instance'\r\n            draggable={false}\r\n            onClick={onClick}\r\n            onError={this.showError.bind(this)}\r\n            style={{\r\n              position: 'relative',\r\n              touchAction: 'none',\r\n              transform: renderable.flipX ? 'scaleX(-1)' : ''\r\n            }}\r\n            />\r\n        </div>\r\n        </DraggableCore>\r\n    )\r\n  }\r\n\r\n  showError() {\r\n    setTimeout(function () {\r\n      if (this.state.tryCount < 10) {\r\n        setTimeout(function () {\r\n          this.setState({ tryCount: this.state.tryCount + 1 })\r\n        }.bind(this), 2500)\r\n      }\r\n    }.bind(this), 7500)\r\n  }\r\n}\r\n\r\nexport default GenericCanvasElement\r\n","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport Draggable, { DraggableCore } from 'react-draggable'\r\nimport { NotificationManager } from 'react-notifications'\r\nimport axios from 'axios'\r\nimport _ from 'lodash'\r\n\r\nconst region = !localStorage['region'] ? 'KMS' : localStorage['region']\r\nconst version = !localStorage['version'] ? '328' : localStorage['version']\r\n\r\nclass CharacterCanvasElement extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      tryCount: 0\r\n    }\r\n\r\n    this.updateCharacterDetails(props, true)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const ifChanged = ['skin', 'selectedItems', 'action', 'frame', 'mercEars', 'illiumEars', 'zoom', 'flipX']\r\n    if (_.find(ifChanged, (property) => this.props.character[property] != prevProps.character[property])){\r\n      this.updateCharacterDetails(this.props, false)\r\n    }\r\n  }\r\n\r\n  updateCharacterDetails(props, isSync) {\r\n    const { character } = props\r\n    const itemsWithEmotion = _.values(character.selectedItems)\r\n    .filter(item => item.id && (item.visible === undefined || item.visible))\r\n    .map(item => {\r\n      var itemEntry = item.id >= 20000 && item.id <= 29999 ? `${item.id}:${character.emotion}` : item.id\r\n      return itemEntry\r\n    });\r\n\r\n    const { tryCount } = this.state\r\n\r\n    let itemEntries = Object.values(character.selectedItems).filter(item => item.id && (item.visible === undefined || item.visible)).map(item => {\r\n      let itemEntry = {\r\n        itemId: Number(item.id),\r\n        version: \"328\",\r\n        region: \"KMS\"\r\n      }\r\n\r\n      if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.animationName = character.emotion\r\n      if (item.region && item.region.toLowerCase() != 'kms') itemEntry.region = item.region\r\n      if (item.version && item.version.toLowerCase() != '328') itemEntry.version = item.version\r\n      if (item.hue) itemEntry.hue = item.hue\r\n      if (item.saturation != 1) itemEntry.saturation = item.saturation\r\n      if (item.contrast != 1) itemEntry.contrast = item.contrast\r\n      if (item.brightness != 1) itemEntry.brightness = item.brightness\r\n      if (item.alpha != 1) itemEntry.alpha = item.alpha\r\n      if (item.islot) itemEntry.islot = item.islot\r\n      if (item.vslot) itemEntry.vslot = item.vslot\r\n\r\n      return itemEntry\r\n    })\r\n\r\n    let backgroundColor = JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"}\r\n    const bgColorText = `${backgroundColor.rgb.r},${backgroundColor.rgb.g},${backgroundColor.rgb.b},${backgroundColor.rgb.a}`\r\n\r\n    let itemEntriesPayload = JSON.stringify([\r\n      ...itemEntries,\r\n      { itemId: Number(character.skin), version: \"210.1.1\"},\r\n      { itemId: Number(character.skin) + 10000, version: \"210.1.1\"}\r\n    ])\r\n    itemEntriesPayload = encodeURIComponent(itemEntriesPayload.substr(1, itemEntriesPayload.length - 2))\r\n\r\n    const link = `https://maplestory.io/api/Character/${itemEntriesPayload}/${character.action}/${character.animating ? 'animated' : character.frame}?showears=${character.mercEars}&showLefEars=${character.illiumEars}&showHighLefEars=${character.highFloraEars}&resize=${character.zoom}&name=${encodeURI(character.name || '')}&flipX=${character.flipX}` + (character.includeBackground ? `&bgColor=${bgColorText}` : '')\r\n\r\n    if (isSync) {\r\n      this.state.linkUsed = link\r\n      axios.get(link).then(function(res) {\r\n        if (this.state.linkUsed == link) {\r\n          this.setState({\r\n            details: res.data\r\n          })\r\n        }\r\n      }.bind(this), this.showError.bind(this))\r\n    } else this.setState({ linkUsed: link }, () => {\r\n      axios.get(link).then(function(res) {\r\n        if (this.state.linkUsed == link) {\r\n          this.setState({\r\n            details: res.data\r\n          })\r\n        }\r\n      }.bind(this), this.showError.bind(this))\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { character, onUpdateRenderablePosition, onStart, onStop, onClick, selected } = this.props\r\n    const { zoom } = character\r\n    const { details } = this.state\r\n    const styling = {\r\n      transform: `translate(${character.position.x}px, ${character.position.y}px) translate(${details ? -0 : 0}px, ${details ? -0 : 0}px)`\r\n    }\r\n\r\n    const imgStyle = {\r\n      position: 'relative',\r\n      touchAction: 'none'\r\n    }\r\n\r\n/*IMG 1*/\r\n    let itemEntries = Object.values(character.selectedItems).filter(item => item.id && (item.visible === undefined || item.visible)).map(item => {\r\n      let itemEntry = {\r\n        itemId: Number(item.id),\r\n        version: \"328\",\r\n        region: \"KMS\"\r\n      }\r\n\r\n      if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.animationName = character.emotion\r\n      if (item.region && item.region.toLowerCase() != 'kms') itemEntry.region = item.region\r\n      if (item.version && item.version.toLowerCase() != '328') itemEntry.version = item.version\r\n      if (item.hue) itemEntry.hue = item.hue\r\n      if (item.saturation != 1) itemEntry.saturation = item.saturation\r\n      if (item.contrast != 1) itemEntry.contrast = item.contrast\r\n      if (item.brightness != 1) itemEntry.brightness = item.brightness\r\n      if (item.alpha != 1) itemEntry.alpha = item.alpha\r\n      if (item.islot) itemEntry.islot = item.islot\r\n      if (item.vslot) itemEntry.vslot = item.vslot\r\n\r\n      return itemEntry\r\n    })\r\n\r\n    let backgroundColor = JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"}\r\n    const bgColorText = `${backgroundColor.rgb.r},${backgroundColor.rgb.g},${backgroundColor.rgb.b},${backgroundColor.rgb.a}`\r\n\r\n    let itemEntriesPayload = JSON.stringify([\r\n      ...itemEntries,\r\n      { itemId: Number(character.skin), version: \"210.1.1\" },\r\n      { itemId: Number(character.skin) + 10000, version: \"210.1.1\"}\r\n    ])\r\n    itemEntriesPayload = encodeURIComponent(itemEntriesPayload.substr(1, itemEntriesPayload.length - 2))\r\n\r\n    const link = `https://maplestory.io/api/Character/${itemEntriesPayload}/${character.action}/${character.animating ? 'animated' : character.frame}?showears=${character.mercEars}&showLefEars=${character.illiumEars}&showHighLefEars=${character.highFloraEars}&resize=${character.zoom}&name=${encodeURI(character.name || '')}&flipX=${character.flipX}` + (character.includeBackground ? `&bgColor=${bgColorText}` : '')\r\n/*//--IMG 1*/\r\n\r\n/*IMG 2*/\r\n    let itemEntriesT = Object.values(character.selectedItems).filter(item => item.id && (item.visible === undefined || item.visible)).map(item => {\r\n      let itemEntry = {\r\n        itemId: Number(item.id),\r\n        version: \"328\",\r\n        region: \"KMS\"\r\n      }\r\n\r\n      if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.animationName = character.emotion\r\n      if (item.region && item.region.toLowerCase() != 'kms') itemEntry.region = item.region\r\n      if (item.version && item.version.toLowerCase() != '328') itemEntry.version = item.version\r\n      if (item.hue) itemEntry.hue = item.hue\r\n      if (item.saturation != 1) itemEntry.saturation = item.saturation\r\n      if (item.contrast != 1) itemEntry.contrast = item.contrast\r\n      if (item.brightness != 1) itemEntry.brightness = item.brightness\r\n      if (item.alpha != 1) itemEntry.alpha = item.alpha\r\n      if (item.islot) itemEntry.islot = item.islot\r\n      if (item.vslot) itemEntry.vslot = item.vslot\r\n      if ((item.id >= 30000 && item.id < 49999) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.itemId = character.newHair\r\n      //if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.itemId = character.newFace\r\n\r\n      return itemEntry\r\n    })\r\n//console.log(itemEntriesT);\r\n    let backgroundColorT = JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"}\r\n    const bgColorTextT = `${backgroundColorT.rgb.r},${backgroundColorT.rgb.g},${backgroundColorT.rgb.b},${backgroundColorT.rgb.a}`\r\n\r\n    let itemEntriesPayloadT = JSON.stringify([\r\n      ...itemEntriesT,\r\n      { itemId: Number(character.skin), version: \"210.1.1\" },\r\n      { itemId: Number(character.skin) + 10000, version: \"210.1.1\"}\r\n    ])\r\n    itemEntriesPayloadT = encodeURIComponent(itemEntriesPayloadT.substr(1, itemEntriesPayloadT.length - 2))\r\n\r\n    const linkT = `https://maplestory.io/api/Character/${itemEntriesPayloadT}/${character.action}/${character.animating ? 'animated' : character.frame}?showears=${character.mercEars}&showLefEars=${character.illiumEars}&showHighLefEars=${character.highFloraEars}&resize=${character.zoom}&name=${encodeURI(character.name || '')}&flipX=${character.flipX}` + (character.includeBackground ? `&bgColor=${bgColorTextT}` : '')\r\n\r\n/*//--IMG 2*/\r\n\r\n    return (\r\n      <DraggableCore\r\n        onStart={onStart}\r\n        onStop={onStop}\r\n        onDrag={onUpdateRenderablePosition}\r\n        position={character.position}\r\n        >\r\n        <div className={selected ? 'selected-canvas-element' : ''} style={styling}>\r\n         {\r\n            details ? (<div><img\r\n              src={link}\r\n              alt=''\r\n              className='renderable-instance'\r\n              draggable={false}\r\n              onClick={onClick}\r\n              onError={this.showError.bind(this)}\r\n              style={imgStyle}\r\n              id='leftImg'\r\n              crossorigin='anonymous'/>\r\n              <img\r\n                src={linkT}\r\n                alt=''\r\n                draggable={false}\r\n                onClick={onClick}\r\n                onError={this.showError.bind(this)}\r\n                id='rightImg'\r\n                crossorigin='anonymous'/>\r\n              </div>\r\n            ) : <div className='loading-character'>&nbsp;</div>\r\n         }\r\n        </div>\r\n        </DraggableCore>\r\n    )\r\n  }\r\n\r\n  showError() {\r\n    setTimeout(function () {\r\n      if (this.state.tryCount < 10) {\r\n        setTimeout(function () {\r\n          this.setState({ tryCount: this.state.tryCount + 1 }, () => {\r\n            this.updateCharacterDetails(this.props)\r\n          })\r\n        }.bind(this), 1500)\r\n      }\r\n    }.bind(this), 3500)\r\n  }\r\n}\r\n\r\nexport default CharacterCanvasElement\r\n","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport _ from 'lodash'\r\nimport Toggle from 'react-toggle'\r\nimport { Tooltip } from 'react-tippy'\r\nimport axios from 'axios'\r\nimport 'rc-slider/assets/index.css'\r\nimport 'rc-tooltip/assets/bootstrap.css'\r\nimport 'react-tippy/dist/tippy.css';\r\nimport RcTooltip from 'rc-tooltip'\r\nimport Slider from 'rc-slider'\r\nimport GenericCanvasElement from './GenericCanvasElement'\r\nimport CharacterCanvasElement from './CharacterCanvasElement'\r\nimport Draggable, { DraggableCore } from 'react-draggable'\r\nimport { NotificationManager } from 'react-notifications'\r\n\r\nconst renderFootholds = JSON.parse(localStorage['isDebugMode'] || 'false') === true\r\n\r\nconst region = !localStorage['region'] ? 'KMS' : localStorage['region']\r\nconst version = !localStorage['version'] ? '328' : localStorage['version']\r\n\r\nclass RenderCanvas extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      x: Number(localStorage['canvasX']) || 0,\r\n      y: Number(localStorage['canvasX']) || 0,\r\n      childDragCount: 0\r\n    }\r\n\r\n    if (props.selectedRenderable !== undefined && (Number.isNaN(Number(localStorage['canvasX'])) || Number.isNaN(Number(localStorage['canvasY'])))) {\r\n      const renderable = props.renderables[props.selectedRenderable]\r\n      if (renderable){\r\n        this.state = {\r\n          ...this.state,\r\n          x: Math.round(-renderable.position.x),\r\n          y: Math.round(-renderable.position.y)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (props.mapId) {\r\n      axios.get(`https://maplestory.io/api/KMS/328/map/${props.mapId}`)\r\n        .then(response => this.setState({mapData: response.data}))\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.focusRenderable !== this.props.focusRenderable){\r\n      const { focusRenderable, mapId } = this.props\r\n      const { mapData } = this.state\r\n\r\n      const renderable = this.props.renderables[focusRenderable]\r\n      if (renderable)\r\n        this.setState({ x: -renderable.position.x + (mapData ? mapData.vrBounds.x : 0), y: -renderable.position.y + (mapData ? mapData.vrBounds.y : 0) })\r\n    }\r\n    if (prevProps.mapId != this.props.mapId && this.props.mapId) {\r\n      axios.get(`https://maplestory.io/api/KMS/328/map/${this.props.mapId}`)\r\n        .then(response => {\r\n          let stateChanges = {\r\n            mapData: response.data\r\n          };\r\n\r\n          if (this.state.mapData === undefined) {\r\n            const { focusRenderable, mapId } = this.props\r\n            const { mapData } = stateChanges\r\n\r\n            const renderable = this.props.renderables[focusRenderable]\r\n            if (renderable)\r\n              stateChanges = {\r\n                ...stateChanges,\r\n                x: Math.round(-renderable.position.x + (mapData ? mapData.vrBounds.x : 0)),\r\n                y: Math.round(-renderable.position.y + (mapData ? mapData.vrBounds.y : 0))\r\n              }\r\n\r\n              localStorage['canvasX'] = stateChanges.x\r\n              localStorage['canvasY'] = stateChanges.y\r\n          }\r\n\r\n          this.setState(stateChanges)\r\n        })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { renderables, mapId, zoom, backgroundColor, localized } = this.props\r\n    const { mapData } = this.state\r\n    const mapOrigin = {}\r\n\r\n    const styleOptions = { transform: `translate(${this.state.x}px, ${this.state.y}px) translateZ(0)` }\r\n    if (zoom != 1) styleOptions.transform = styleOptions.transform + ` scale(${zoom})`\r\n\r\n    if (mapData) mapOrigin.transform = `translate(${-mapData.vrBounds.x}px, ${-mapData.vrBounds.y}px)`\r\n\r\n    return (\r\n      <div className={'canvas-bg' + (this.state.dragging ? ' dragging' : '')} style={{ backgroundPositionX: `${this.state.x}px`, backgroundPositionY: `${this.state.y}px` }}>\r\n        <DraggableCore\r\n          onDrag={(e, o) => {\r\n            if (!o.deltaX && !o.deltaY) return\r\n            if(!this.state.childDragging && (e.target.classList.contains('canvas-characters') || e.target.classList.contains('map'))) {\r\n              let stateChanges = { x: this.state.x + o.deltaX, y: this.state.y + o.deltaY, dragCount: (this.state.dragCount || 0) + 1 }\r\n              localStorage['canvasX'] = stateChanges.x\r\n              localStorage['canvasY'] = stateChanges.y\r\n              this.setState(stateChanges)\r\n            }\r\n          }}\r\n          onStart={(function() { this.setState({ dragging: true, dragCount: 0 }); console.log('dragging') }).bind(this)}\r\n          onStop={(function() { this.setState({ dragging: false }); console.log('done') }).bind(this)}\r\n          >\r\n          <div className={'canvas-characters' + (this.state.dragging ? ' dragging' : '')} onClick={this.clickCanvas.bind(this)} style={{ backgroundColor }}>\r\n            <div className={'renderables-container' + (this.state.dragging ? ' dragging' : '')} style={styleOptions}>\r\n            {\r\n              mapId ? <img className='map' src={`https://maplestory.io/api/KMS/328/map/${mapId}/render`} draggable={false} onClick={this.clickCanvas.bind(this)} onError={this.mapLoadingError} /> : ''\r\n            }\r\n            {\r\n              (mapData && renderFootholds) ? <svg className='map' onClick={this.clickCanvas.bind(this)} width={mapData.vrBounds.width} height={mapData.vrBounds.height} viewBox={`${mapData.vrBounds.x} ${mapData.vrBounds.y} ${mapData.vrBounds.width} ${mapData.vrBounds.height}`}>{\r\n                ((_.values(mapData.footholds) || []).map((fh, i) =>\r\n                  <line x1={fh.x1} x2={fh.x2} y1={fh.y1} y2={fh.y2} strokeWidth='2' stroke='black' key={'svg' + i} />\r\n                ))\r\n              }</svg> : ''\r\n            }\r\n              <div style={mapOrigin} className='character-container'>\r\n                {\r\n                  renderables\r\n                    .filter(renderable => renderable.visible)\r\n                    .map((renderable, i) => {\r\n                      return this.getRenderableElement(renderable, i)\r\n                    })\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </DraggableCore>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  clickCanvas(e) {\r\n    console.log(this.state.dragCount, 'click')\r\n    if (!this.state.dragCount)\r\n      this.props.onClick(e)\r\n  }\r\n\r\n  getRenderableElement(renderable, index) {\r\n    const { selectedRenderable } = this.props\r\n    return renderable.type == 'character' ? (\r\n    <CharacterCanvasElement\r\n      onStart={this.childDragging.bind(this)}\r\n      onStop={this.childStopDragging.bind(this)}\r\n      onClick={(function (){\r\n        if (this.state.childDragCount === 0)\r\n          this.props.onClickRenderable(renderable)\r\n      }).bind(this)}\r\n      onUpdateRenderablePosition={this.handleRenderableElementMovement.bind(this, renderable)}\r\n      character={renderable}\r\n      selected={selectedRenderable === index}\r\n      localized={this.props.localized}\r\n      key={'canvas' + renderable.id} />\r\n    ) : (\r\n    <GenericCanvasElement\r\n      onStart={this.childDragging.bind(this)}\r\n      onStop={this.childStopDragging.bind(this)}\r\n      onClick={(function (){\r\n        if (this.state.childDragCount === 0)\r\n          this.props.onClickRenderable(renderable)\r\n      }).bind(this)}\r\n      onUpdateRenderablePosition={this.handleRenderableElementMovement.bind(this, renderable)}\r\n      renderable={renderable}\r\n      summary={renderable.summary}\r\n      selected={selectedRenderable === index}\r\n      localized={this.props.localized}\r\n      key={'canvas' + renderable.id} />\r\n    )\r\n  }\r\n\r\n  handleRenderableElementMovement(renderable, o,e) {\r\n    if (!e.deltaX && !e.deltaY) return\r\n\r\n    const { zoom } = this.props\r\n    const { mapData } = this.state\r\n    const footholds = _.values((mapData || {}).footholds)\r\n\r\n    const { deltaX, deltaY } = e\r\n    const cursorX = e.x, cursorY = e.y\r\n    this.setState({ childDragCount: this.state.childDragCount + 1 })\r\n    renderable.position = renderable.position || { x:0, y:0 }\r\n    if(Number.isNaN(renderable.position.x)) renderable.position.x = 0\r\n    if(Number.isNaN(renderable.position.y)) renderable.position.y = 0\r\n    let { x, y } = renderable.position\r\n    x = Math.round(cursorX / zoom);\r\n    y = Math.round(cursorY / zoom);\r\n    if (footholds && renderable.fhSnap) {\r\n      const validFootholds = footholds.filter(fh => {\r\n        const isVertical = fh.x1 == fh.x2\r\n        const isWithin = (fh.x1 < x && fh.x2 > x) || (fh.x2 < x && fh.x1 > x)\r\n        if (isVertical || !isWithin) return false\r\n        const { x1, x2, y1, y2 } = fh\r\n        const yAtX = (x == x1 || x2 == x1 || y2 == y1) ? y1 : (y1 + ((y2 - y1) * ((x - x1) / (x2 - x1))))\r\n        return Math.abs(yAtX - y) < 50\r\n      })\r\n\r\n      const alignedFootholds = validFootholds.map(fh => {\r\n        const { x1, x2, y1, y2 } = fh\r\n        const yAtX = (x == x1 || x2 == x1 || y2 == y1) ? y1 : (y1 + ((y2 - y1) * ((x - x1) / (x2 - x1))))\r\n        return {\r\n          ...fh,\r\n          yAtX,\r\n          difference: Math.abs(yAtX - y)\r\n        }\r\n      })\r\n\r\n      const snapFoothold = _.find(alignedFootholds, fh => fh.difference < 50)\r\n      if (snapFoothold) y = snapFoothold.yAtX\r\n    }\r\n    this.props.onUpdateRenderable(renderable, {\r\n      position: {\r\n        x,\r\n        y\r\n      }\r\n    })\r\n  }\r\n\r\n  mapLoadingError() {\r\n    NotificationManager.warning(`There was an error rendering that map`, '', 10000)\r\n  }\r\n\r\n  childDragging() { this.setState({childDragging: true, childDragCount: 0}) }\r\n  childStopDragging() { this.setState({childDragging: false}) }\r\n}\r\n\r\nexport default RenderCanvas\r\n","const all = {\n  en: {\n    maplestory: 'MapleStory',\n    design: 'Design',\n    understand: 'I understand',\n    isCashFilter: 'Is Cash',\n    genderFilter: 'Gender Filter',\n    male: 'Male',\n    female: 'Female',\n    quickView: 'Quick View',\n    removeAll: 'Remove All',\n    prototype: 'This project is actively being developed and considered a prototype.',\n    alpha: 'Public Alpha',\n    unofficialNotice: 'The unofficial MapleStory simulator and designer.',\n    properties: 'Properties',\n    expression: 'Facial Expression',\n    action: 'Pose / Action',\n    skin: 'Skin',\n    zoom: 'Zoom',\n    universal: 'Universal',\n    pet: 'Pet',\n    character: 'Character',\n    name: 'Name',\n    illiumEars: 'Flora Ears',\n    highFloraEars: 'High Flora Ears',\n    mercEars: 'Mercedes Ears',\n    frame: 'Frame',\n    animate: 'Animate',\n    addBgToGif: 'Add BG to GIF',\n    visible: 'Visible',\n    flipHorizontal: 'Flip Horizontal',\n    footholdSnapping: 'Foothold Snapping',\n    lock: 'Lock',\n    downloadSpriteSheet: 'Download Spritesheet',\n    willDownloadZip: 'Will download a .zip',\n    downloadLayeredSpriteSheet: 'Download Layered Spritesheet',\n    requiresPDNPlugin: 'Requires PDN Plugin',\n    deleteCharacter: 'Delete Character',\n    deleteCharacterConfirm: 'Are you sure you wish to delete this character?',\n    petType: 'Pet Type',\n    deletePet: 'Delete Pet',\n    accessory: \"Accessory\",\n    badge: \"Badge\",\n    belt: \"Belt\",\n    earrings: \"Earrings\",\n    emblem: \"Emblem\",\n    faceAccessory: \"Face Accessory\",\n    medal: \"Medal\",\n    eyeDecoration: \"Eye Decoration\",\n    earring: \"Earring\",\n    ring: \"Ring\",\n    pendant: \"Pendant\",\n    pocketItem: \"Pocket Item\",\n    powerSource: \"Power Source\",\n    shoulderAccessory: \"Shoulder Accessory\",\n    totem: \"Totem\",\n    armor: \"Armor\",\n    hat: \"Hat\",\n    cape: \"Cape\",\n    top: \"Top\",\n    glove: \"Glove\",\n    overall: \"Overall\",\n    bottom: \"Bottom\",\n    shield: \"Shield\",\n    shoes: \"Shoes\",\n    testArmor: \"Test Armor\",\n    other: \"Other\",\n    android: \"Android\",\n    dragonEquipment: \"Dragon Equipment\",\n    mechanicalHeart: \"Mechanical Heart\",\n    mechanicEquipment: \"Mechanic Equipment\",\n    petEquipment: \"Pet Equipment\",\n    bits: \"Bits\",\n    shovel: \"Shovel\",\n    pickaxe: \"Pickaxe\",\n    skillEffect: \"Skill Effect\",\n    petUse: \"Pet Use\",\n    oneHandedWeapon: \"One-Handed Weapon\",\n    scepter: \"Scepter\",\n    oneHandedAxe: \"One-Handed Axe\",\n    katara: \"Katara\",\n    cane: \"Cane\",\n    dagger: \"Dagger\",\n    desperado: \"Desperado\",\n    whipBlade: \"Whip Blade\",\n    oneHandedBluntWeapon: \"One-Handed Blunt Weapon\",\n    shiningRod: \"Shining Rod\",\n    soulShooter: \"Soul Shooter\",\n    staff: \"Staff\",\n    oneHandedSword: \"One-Handed Sword\",\n    wand: \"Wand\",\n    testWeapon: \"Test Weapon\",\n    cash: \"Cash\",\n    psyLimiter: \"Psy-limiter\",\n    chain: \"Chain\",\n    gauntlet: \"Gauntlet\",\n    secondaryWeapon: \"Secondary Weapon\",\n    ballast: \"Ballast\",\n    magicMarble: \"Magic Marble\",\n    spellbook: \"Spellbook\",\n    arrowFletching: \"Arrow Fletching\",\n    powderKeg: \"Powder Keg\",\n    farSight: \"Far Sight\",\n    card: \"Card\",\n    ironChain: \"Iron Chain\",\n    bowThimble: \"Bow Thimble\",\n    jewel: \"Jewel\",\n    document: \"Document\",\n    magicArrow: \"Magic Arrow\",\n    charm: \"Charm\",\n    orb: \"Orb\",\n    rosary: \"Rosary\",\n    daggerScabbard: \"Dagger Scabbard\",\n    wristBand: \"Wrist Band\",\n    arrowhead: \"Arrowhead\",\n    jettSCore: \"Jett's Core\",\n    novaSEssence: \"Nova's Essence\",\n    soulRing: \"Soul Ring\",\n    magnum: \"Magnum\",\n    kodachi: \"Kodachi\",\n    whistle: \"Whistle\",\n    jettFists: \"Jett Fists\",\n    mass: \"Mass\",\n    foxMarble: \"Fox Marble\",\n    coreController: \"Core Controller\",\n    charges: \"Charges\",\n    chessPiece: \"Chess Piece\",\n    transmitter: \"Transmitter\",\n    wings: \"Wings\",\n    twoHandedWeapon: \"Two-Handed Weapon\",\n    twoHandedAxe: \"Two-Handed Axe\",\n    bow: \"Bow\",\n    crossbow: \"Crossbow\",\n    dualBowgun: \"Dual Bowgun\",\n    gun: \"Gun\",\n    handCannon: \"Hand Cannon\",\n    knuckle: \"Knuckle\",\n    twoHandedBlunt: \"Two-Handed Blunt\",\n    poleArm: \"Pole Arm\",\n    spear: \"Spear\",\n    twoHandedSword: \"Two-Handed Sword\",\n    claw: \"Claw\",\n    katana: \"Katana\",\n    fan: \"Fan\",\n    lapis: \"Lapis\",\n    lazuli: \"Lazuli\",\n    armCannon: \"Arm Cannon\",\n    character: \"Character\",\n    face: \"Face\",\n    hair: \"Hair\",\n    monster: \"Monster\",\n    crusaderCodex: \"Crusader Codex\",\n    monsterBattle: \"Monster Battle\",\n    mount: \"Mount\",\n    consumable: \"Consumable\",\n    potion: \"Potion\",\n    foodAndDrink: \"Food and Drink\",\n    statusCure: \"Status Cure\",\n    petFood: \"Pet Food\",\n    transformation: \"Transformation\",\n    eXPPotion: \"EXP Potion\",\n    characterModification: \"Character Modification\",\n    timeSaver: \"Time Saver\",\n    equipmentBox: \"Equipment Box\",\n    teleportItem: \"Teleport Item\",\n    eXPBuff: \"EXP Buff\",\n    appearance: \"Appearance\",\n    armorScroll: \"Armor Scroll\",\n    helmet: \"Helmet\",\n    eye: \"Eye\",\n    topwear: \"Topwear\",\n    bottomwear: \"Bottomwear\",\n    gloves: \"Gloves\",\n    belts: \"Belts\",\n    shoulder: \"Shoulder\",\n    equipment: \"Equipment\",\n    pet: \"Pet\",\n    weaponScroll: \"Weapon Scroll\",\n    oneHandedBW: \"One-Handed BW\",\n    twoHandedBW: \"Two-Handed BW\",\n    polearm: \"Polearm\",\n    zero: \"Zero\",\n    specialScroll: \"Special Scroll\",\n    cleanSlateScroll: \"Clean Slate Scroll\",\n    slotCarver: \"Slot Carver\",\n    bonusPotentialScroll: \"Bonus Potential Scroll\",\n    chaosScroll: \"Chaos Scroll\",\n    equipEnhancement: \"Equip Enhancement\",\n    potentialScroll: \"Potential Scroll\",\n    awakeningStamp: \"Awakening Stamp\",\n    innocenceScroll: \"Innocence Scroll\",\n    fusionAnvil: \"Fusion Anvil\",\n    whiteScroll: \"White Scroll\",\n    hammer: \"Hammer\",\n    magnifyingGlass: \"Magnifying Glass\",\n    timeExtension: \"Time Extension\",\n    luckyDayScroll: \"Lucky Day Scroll\",\n    protectionScroll: \"Protection Scroll\",\n    safetyScroll: \"Safety Scroll\",\n    guardianScroll: \"Guardian Scroll\",\n    equipmentChange: \"Equipment Change\",\n    soulWeapon: \"Soul Weapon\",\n    miracleCube: \"Miracle Cube\",\n    trade: \"Trade\",\n    masteryBook: \"Mastery Book\",\n    aPSPReset: \"AP/SP Reset\",\n    monsterTaming: \"Monster Taming\",\n    circulator: \"Circulator\",\n    dust: \"Dust\",\n    tablet: \"Tablet\",\n    projectile: \"Projectile\",\n    arrow: \"Arrow\",\n    thrown: \"Thrown\",\n    crossbowBolt: \"Crossbow Bolt\",\n    bullet: \"Bullet\",\n    monsterFamiliar: \"Monster/Familiar\",\n    monsterCard: \"Monster Card\",\n    familiarSkill: \"Familiar Skill\",\n    familiarCard: \"Familiar Card\",\n    recipe: \"Recipe\",\n    smithingRecipe: \"Smithing Recipe\",\n    accessoryCraftingRecipe: \"Accessory Crafting Recipe\",\n    alchemyRecipe: \"Alchemy Recipe\",\n    synergyMachine: \"Synergy Machine\",\n    megaphone: \"Megaphone\",\n    summoningSack: \"Summoning Sack\",\n    message: \"Message\",\n    lieDetector: \"Lie Detector\",\n    wedding: \"Wedding\",\n    owl: \"Owl\",\n    capsule: \"Capsule\",\n    itemPot: \"Item Pot\",\n    monsterDrop: \"Monster Drop\",\n    questItem: \"Quest Item\",\n    cosmetic: \"Cosmetic\",\n    minigame: \"Minigame\",\n    petCommand: \"Pet Command\",\n    book: \"Book\",\n    effect: \"Effect\",\n    coin: \"Coin\",\n    container: \"Container\",\n    eXPTicket: \"EXP Ticket\",\n    eventItem: \"Event Item\",\n    cashShop: \"Cash Shop\",\n    rewardItem: \"Reward Item\",\n    potentialLock: \"Potential Lock\",\n    fusion: \"Fusion\",\n    coupon: \"Coupon\",\n    crafting: \"Crafting\",\n    mineralOre: \"Mineral Ore\",\n    mineralProcessed: \"Mineral Processed\",\n    rareOre: \"Rare Ore\",\n    rareProcessedOre: \"Rare Processed Ore\",\n    craftingItem: \"Crafting Item\",\n    herb: \"Herb\",\n    herbOil: \"Herb Oil\",\n    maker: \"Maker\",\n    chair: \"Chair\",\n    extractor: \"Extractor\",\n    title: \"Title\",\n    decoration: \"Decoration\",\n    key: \"Key\",\n    commerci: \"Commerci\",\n    tradeGood: \"Trade Good\",\n    shipEnhancement: \"Ship Enhancement\",\n    evolutionLab: \"Evolution Lab\",\n    core: \"Core\",\n    mission: \"Mission\",\n    nebulite: \"Nebulite\",\n    rankDNebulite: \"Rank D Nebulite\",\n    rankCNebulite: \"Rank C Nebulite\",\n    rankBNebulite: \"Rank B Nebulite\",\n    rankANebulite: \"Rank A Nebulite\",\n    rankSNebulite: \"Rank S Nebulite\",\n    teleportRock: \"Teleport Rock\",\n    package: \"Package\",\n    itemStore: \"Item Store\",\n    questHelper: \"Quest Helper\",\n    randomReward: \"Random Reward\",\n    specialItem: \"Special Item\",\n    gachapon: \"Gachapon\",\n    surpriseBox: \"Surprise Box\",\n    exchangeCoupon: \"Exchange Coupon\",\n    equipmentModification: \"Equipment Modification\",\n    scroll: \"Scroll\",\n    upgradeSlot: \"Upgrade Slot\",\n    sPAPModification: \"SP/AP Modification\",\n    protection: \"Protection\",\n    eXPCoupon: \"EXP Coupon\",\n    dropCoupon: \"Drop Coupon\",\n    entryPass: \"Entry Pass\",\n    inventorySlot: \"Inventory Slot\",\n    eXPCoupons: \"EXP Coupons\",\n    skillModification: \"Skill Modification\",\n    weapon: \"Weapon\",\n    hairCoupon: \"Hair Coupon\",\n    hairColorCoupon: \"Hair Color Coupon\",\n    faceCoupon: \"Face Coupon\",\n    cosmeticLens: \"Cosmetic Lens\",\n    skinCoupon: \"Skin Coupon\",\n    ear: \"Ear\",\n    facialExpression: \"Facial Expression\",\n    special: \"Special\",\n    petAppearance: \"Pet Appearance\",\n    freeMarket: \"Free Market\",\n    hiredMerchant: \"Hired Merchant\",\n    storePermit: \"Store Permit\",\n    auctionHouse: \"Auction House\",\n    messengerAndSocial: \"Messenger and Social\",\n    weatherEffect: \"Weather Effect\",\n    messenger: \"Messenger\",\n    kite: \"Kite\",\n    note: \"Note\",\n    song: \"Song\",\n    characterEffect: \"Character Effect\",\n    guildForumEmoticon: \"Guild Forum Emoticon\",\n    messageboard: \"Messageboard\",\n    miscellaneous: \"Miscellaneous\",\n    cakeVsPie: \"Cake vs Pie\",\n    language: 'Language',\n    playMusic: 'Play Music',\n    region: 'Region',\n    version: 'Version',\n    clone: 'Clone',\n    downloadMinimalSpriteSheet: 'Download Minimal Spritesheet',\n    downloadMinimalLayeredSpriteSheet: 'Download Minimal Layered Spritesheet',\n    export: 'Export',\n    importCharacter: 'Import Character'\n  },\n  kr: {\n    ancientBow : \"에이션트 보우\",\n    charactor : \"캐릭터\",\n    maplestory: \"메이플스토리\", //(space removed)\n    design: \"디자인\",\n    understand: \"동의합니다\", //(edited from 이해 했어)\n    isCashFilter: \"캐시샵 상품만\",\n    genderFilter: \"성별\",\n    male: \"남성\",\n    female: \"여성\",\n    quickView: \"퀵뷰\",\n    removeAll: \"모두 제거\",\n    prototype: \"이 프로젝트는 활발히 개발되고 있으며 프로토 타입으로 간주됩니다.\", //(smoothen out, grammar)\n    alpha: \"알파 버전\",\n    unofficialNotice: \"비공식 메이플스토리 코디 시뮬레이터.\", //(space removed, smoothen)\n    properties: \"특성\",\n    expression: \"표정\",\n    action: \"자세\",\n    skin: \"피부색\",\n    zoom: \"줌\",\n    universal: \"양성\",\n    pet: \"펫\",\n    character: \"캐릭터\",\n    name: \"이름\",\n    highFloraEars : \"아크 귀\",\n    illiumEars: \"일리움 귀\",\n    mercEars: \"메르세데스 귀\",\n    frame: \"프레임\",\n    animate: \"영상으로 보기\",\n    addBgToGif: \"Add BG to GIF\",\n    visible: \"보이게 하기\",\n    flipHorizontal: \"가로로 뒤집기\",\n    footholdSnapping: \"Foothold Snapping\",\n    lock: \"락\",\n    downloadSpriteSheet: \"스프라이트시트 다운로드\",\n    willDownloadZip: \".zip 다운로드\",\n    downloadLayeredSpriteSheet: \"레이어드 스프레드시트 다운로드\",\n    downloadMinimalSpriteSheet: 'Download Minimal Spritesheet',\n    requiresPDNPlugin: \"PDN 플러그인 필요\",\n    deleteCharacter: \"캐릭터 삭제\",\n    petType: \"펫 종류\",\n    deletePet: \"펫 삭제\",\n    accessory: \"장신구\",\n    badge: \"뱃지\",\n    belt: \"벨트\",\n    earrings: \"귀걸이\",\n    emblem: \"엠블렘\",\n    faceAccessory: \"얼굴장식\",\n    medal: \"훈장\",\n    eyeDecoration: \"눈장식\",\n    earring: \"귀걸이\",\n    ring: \"반지\",\n    pendant: \"펜던트\",\n    pocketItem: \"포켓 아이템\",\n    powerSource: \"하이브리드 하트\",\n    shoulderAccessory: \"견장\",\n    totem: \"토템\",\n    armor: \"방어구\",\n    hat: \"모자\",\n    cape: \"망토\",\n    top: \"상의\",\n    glove: \"장갑\",\n    overall: \"한벌옷\",\n    bottom: \"하의\",\n    shield: \"방패\",\n    shoes: \"신발\",\n    testArmor: \"Test Armor\",\n    other: \"그 외\",\n    android: \"안드로이드\",\n    dragonEquipment: \"드래곤 장비\",\n    mechanicalHeart: \"안드로이드 심장\",\n    mechanicEquipment: \"메카닉 장비\",\n    petEquipment: \"펫 장비\",\n    bits: \"Bits\",\n    shovel: \"삽\",\n    pickaxe: \"곡괭이\",\n    skillEffect: \"스킬 이펙트\",\n    petUse: \"Pet Use\",\n    oneHandedWeapon: \"한손무기\",\n    scepter: \"Scepter\", //(not in kr server)\n    oneHandedAxe: \"한손도끼\",\n    katara: \"카타나\",\n    cane: \"케인\",\n    dagger: \"대거\",\n    desperado: \"데스페라도\",\n    whipBlade: \"에너지 소드\",\n    oneHandedBluntWeapon: \"한손둔기\",\n    shiningRod: \"샤이닝 로드\",\n    soulShooter: \"소울 슈터\",\n    staff: \"스태프\",\n    oneHandedSword: \"한손검\",\n    wand: \"완드\",\n    testWeapon: \"Test Weapon\",\n    cash: \"캐시\",\n    psyLimiter: \"ESP 리미터\",\n    chain: \"체인\",\n    gauntlet: \"건틀렛\",\n    secondaryWeapon: \"보조무기\",\n    magicMarble: \"Magic Marble\",\n    spellbook: \"마도서\",\n    arrowFletching: \"화살깃\",\n    powderKeg: \"화약통\",\n    farSight: \"조준기\",\n    card: \"카드\",\n    ironChain: \"쇠사슬\",\n    bowThimble: \"활골무\",\n    jewel: \"쥬얼리\",\n    document: \"문서\",\n    magicArrow: \"마법화살\",\n    charm: \"매력\",\n    orb: \"오브\",\n    rosary: \"로자리오\",\n    daggerScabbard: \"단검용 검집\",\n    wristBand: \"리스트밴드\",\n    arrowhead: \"화살촉\",\n    jettSCore: \"Jett's Core\", //(not in kr server)\n    novaSEssence: \"용의 정수\",\n    soulRing: \"소울링\",\n    magnum: \"매그넘\",\n    kodachi: \"Kodachi\", //(not in kr server)\n    whistle: \"Whistle\", //(not in kr server)\n    jettFists: \"Jett Fists\", //(not in kr server)\n    mass: \"무게추\",\n    foxMarble: \"여우구슬\",\n    coreController: \"컨트롤러\",\n    charges: \"장약\",\n    chessPiece: \"체스피스\",\n    transmitter: \"무기 전송장치\",\n    wings: \"매직윙\",\n    twoHandedWeapon: \"두손무기\",\n    twoHandedAxe: \"두손도끼\",\n    bow: \"활\",\n    crossbow: \"석궁\",\n    dualBowgun: \"듀얼보우건\",\n    gun: \"건\",\n    handCannon: \"핸드캐논\",\n    knuckle: \"너클\",\n    twoHandedBlunt: \"두손둔기\",\n    poleArm: \"폴암\",\n    spear: \"창\",\n    twoHandedSword: \"두손검\",\n    claw: \"클로\",\n    katana: \"카타나\",\n    fan: \"Fan\", //(not in kr server)\n    lapis: \"태도\",\n    lazuli: \"대검\",\n    armCannon: \"건틀렛 리볼버\",\n    face: \"얼굴\",\n    hair: \"헤어\",\n    monster: \"몬스터\",\n    crusaderCodex: \"Crusader Codex\", //(not in kr server) - maybe 인버스 코덱스\n    monsterBattle: \"배틀 몬스터스 리그\",\n    mount: \"라이딩\",\n    consumable: \"소비\",\n    potion: \"포션\",\n    foodAndDrink: \"음식과 음료\",\n    statusCure: \"상태이상 회복\",\n    petFood: \"펫의 먹이\",\n    transformation: \"Transformation\",\n    eXPPotion: \"경험치 포션\",\n    characterModification: \"Character Modification\",\n    timeSaver: \"Time Saver\",\n    equipmentBox: \"Equipment Box\",\n    teleportItem: \"텔레포트\",\n    eXPBuff: \"경험치 버프\",\n    appearance: \"외형\",\n    armorScroll: \"장비강화 주문서\",\n    helmet: \"헬멧\",\n    eye: \"눈\",\n    topwear: \"상의\",\n    bottomwear: \"하의\",\n    gloves: \"장갑\",\n    belts: \"벨트\",\n    shoulder: \"견장\",\n    equipment: \"장비\",\n    weaponScroll: \"장비강화 주문서\",\n    oneHandedBW: \"한손둔기\",\n    twoHandedBW: \"두손둔기\",\n    polearm: \"폴암\",\n    zero: \"제로\",\n    specialScroll: \"Speical Scroll\",\n    cleanSlateScroll: \"순백의 주문서\",\n    slotCarver: \"각인의 인장\",\n    bonusPotentialScroll: \"고급잠재능력 부여 주문서\",\n    chaosScroll: \"혼돈의 주문서\",\n    equipEnhancement: \"Equip Enhancement\",\n    potentialScroll: \"잠재능력 부여 주문서\",\n    awakeningStamp: \"금빛 각인의 인장\",\n    innocenceScroll: \"이노센트 주문서\",\n    fusionAnvil: \"신비의 모루\",\n    whiteScroll: \"백의 주문서\",\n    hammer: \"망치\",\n    magnifyingGlass: \"감정 돋보기\",\n    timeExtension: \"Time Extension\",\n    luckyDayScroll: \"럭키데이 주문서\",\n    protectionScroll: \"프로텍트 쉴드\",\n    safetyScroll: \"세이프티 쉴드\",\n    guardianScroll: \"리커버리 쉴드\",\n    equipmentChange: \"Equipment Change\",\n    soulWeapon: \"소울웨폰\",\n    miracleCube: \"미라클 큐브\",\n    trade: \"교환\",\n    masteryBook: \"마스터리북\",\n    aPSPReset: \"AP/SP 초기화\",\n    monsterTaming: \"Monster Taming\", //(not in kr server)\n    circulator: \"서큘레이터\",\n    dust: \"더스트\",\n    tablet: \"알약\",\n    projectile: \"투사체\",\n    arrow: \"화살\",\n    thrown: \"Thrown\",\n    crossbowBolt: \"석궁전용 화살\",\n    bullet: \"불릿\",\n    monsterFamiliar: \"Monster/Familiar\",\n    monsterCard: \"Monster Card\",\n    familiarSkill: \"Familiar Skill\",\n    familiarCard: \"Familiar Card\",\n    recipe: \"레시피\",\n    smithingRecipe: \"장비 제작 레시피\",\n    accessoryCraftingRecipe: \"장신구 제작 레시피\",\n    alchemyRecipe: \"연금술 레시피\",\n    synergyMachine: \"Synergy Machine\",\n    megaphone: \"메가폰\",\n    summoningSack: \"의문의 보따리\",\n    message: \"메시지\",\n    lieDetector: \"거짓말 탐지기\",\n    wedding: \"결혼식\",\n    owl: \"부엉이\",\n    capsule: \"캡슐\",\n    itemPot: \"Item Pot\",\n    monsterDrop: \"Monster Drop\",\n    questItem: \"퀘스트 아이템\",\n    cosmetic: \"Cosmetic\",\n    minigame: \"미니게임\",\n    petCommand: \"펫 명령어\",\n    book: \"Book\",\n    effect: \"이펙트\",\n    coin: \"코인\",\n    container: \"Container\",\n    eXPTicket: \"EXP Ticket\",\n    eventItem: \"이벤트 아이템\",\n    cashShop: \"캐시샵\",\n    rewardItem: \"보상 아이템\",\n    potentialLock: \"Potential Lock\",\n    fusion: \"장비 합성\",\n    coupon: \"쿠폰\",\n    crafting: \"제작\",\n    mineralOre: \"Mineral Ore\",\n    mineralProcessed: \"Mineral Processed\",\n    rareOre: \"Rare Ore\",\n    rareProcessedOre: \"Rare Processed Ore\",\n    craftingItem: \"제작 아이템\",\n    herb: \"허브\",\n    herbOil: \"허브 오일\",\n    maker: \"Maker\",\n    chair: \"의자\",\n    extractor: \"Extractor\",\n    title: \"칭호\",\n    decoration: \"Decoration\",\n    key: \"Key\",\n    commerci: \"Commerci\",\n    tradeGood: \"Trade Good\",\n    shipEnhancement: \"Ship Enhancement\",\n    evolutionLab: \"Evolution Lab\",\n    core: \"Core\",\n    mission: \"Mission\",\n    nebulite: \"네뷸라이트\",\n    rankDNebulite: \"D랭크 네뷸라이트\",\n    rankCNebulite: \"C랭크 네뷸라이트\",\n    rankBNebulite: \"B랭크 네뷸라이트\",\n    rankANebulite: \"A랭크 네뷸라이트\",\n    rankSNebulite: \"S랭크 네뷸라이트\",\n    teleportRock: \"순간이동의 돌\",\n    package: \"택배\",\n    itemStore: \"상점\",\n    questHelper: \"Quest Helper\",\n    randomReward: \"랜덤 보상\",\n    specialItem: \"스페셜 아이템\",\n    gachapon: \"Gachapon\", //(not in kr server)\n    surpriseBox: \"Surprise Box\",\n    exchangeCoupon: \"교환 쿠폰\",\n    equipmentModification: \"장비강화\",\n    scroll: \"주문서\",\n    upgradeSlot: \"슬롯 강화\",\n    sPAPModification: \"SP/AP Modification\",\n    protection: \"Protection\",\n    eXPCoupon: \"경험치 쿠폰\",\n    dropCoupon: \"드롭률 쿠폰\",\n    entryPass: \"입장권\",\n    inventorySlot: \"인벤토리 슬롯\",\n    eXPCoupons: \"경험치 쿠폰\",\n    skillModification: \"스킬 강화\",\n    weapon: \"무기\",\n    hairCoupon: \"헤어쿠폰\",\n    hairColorCoupon: \"헤어염색쿠폰\",\n    faceCoupon: \"성형쿠폰\",\n    cosmeticLens: \"카르타의 진주\",\n    skinCoupon: \"스킨케어\",\n    ear: \"귀\",\n    facialExpression: \"표정\",\n    special: \"스페셜\",\n    petAppearance: \"펫 외형\",\n    freeMarket: \"자유시장\",\n    hiredMerchant: \"고용상인\",\n    storePermit: \"개인상점\",\n    auctionHouse: \"경매장\",\n    messengerAndSocial: \"메신저와 소셜\",\n    weatherEffect: \"날씨효과\",\n    messenger: \"메신저\",\n    kite: \"Kite\",\n    note: \"Note\",\n    song: \"노래\",\n    characterEffect: \"캐릭터 이펙트\",\n    guildForumEmoticon: \"길드 포럼 이모티콘\",\n    messageboard: \"게시판\",\n    miscellaneous: \"그 외\",\n    cakeVsPie: \"케이크 vs 파이\",\n    language: \"언어\",\n    playMusic: \"음악 재생\",\n    region: \"지역\",\n    version: \"버전\",\n    gender: \"성별\"\n  }\n}\n\nexport default {\n  getLocalized(language) {\n    return {\n      ...all['kr'],\n      ...all[language]\n    }\n  }\n}\n","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport ItemListing from '../ItemListing'\r\nimport EquippedItems from '../EquippedItems'\r\nimport _ from 'lodash'\r\nimport CharacterList from '../CharacterList'\r\nimport 'react-notifications/lib/notifications.css'\r\nimport {NotificationContainer, NotificationManager} from 'react-notifications'\r\nimport RenderCanvas from '../RenderCanvas'\r\nimport axios from 'axios'\r\nimport VirtualizedSelect from 'react-virtualized-select'\r\n\r\nimport createFilterOptions from 'react-select-fast-filter-options'\r\nimport Slider from 'rc-slider'\r\nimport RcTooltip from 'rc-tooltip'\r\nimport { SketchPicker } from 'react-color'\r\nimport Localization from '../../const/localize'\r\nimport Localize from '../../const/localize'\r\nimport { Tooltip } from 'react-tippy'\r\nimport FontAwesome from 'react-fontawesome'\r\nimport 'rc-slider/assets/index.css'\r\nimport 'rc-tooltip/assets/bootstrap.css'\r\nimport 'react-tippy/dist/tippy.css';\r\nimport Toggle from 'react-toggle'\r\nimport Sidebar from \"react-sidebar\";\r\nconst mql = window.matchMedia(`(min-width: 800px)`);\r\n\r\n\r\nif (localStorage['initialized'] != '2') {\r\n  localStorage['region'] = 'KMS'\r\n  localStorage['version'] = '328'\r\n  localStorage['initialized'] = '2'\r\n}\r\n\r\nif (!localStorage['language']) {\r\n  if (navigator.language.startsWith('ko')) localStorage['language'] = 'kr'\r\n  else if (navigator.language.startsWith('ja')) localStorage['language'] = 'jp'\r\n  else if (navigator.language.startsWith('zh')) localStorage['language'] = 'ch'\r\n  else if (navigator.language.startsWith('nl')) localStorage['language'] = 'nl'\r\n  else if (navigator.language.startsWith('pt')) localStorage['language'] = 'br'\r\n  else localStorage['language'] = 'en'\r\n}\r\n\r\nvar creatingId = null\r\nconst throttledErrorNotification = _.throttle(NotificationManager.error.bind(NotificationManager), 1500, { leading:true })\r\nlet mapsIndexed = null\r\nlet versions = {\r\n  GMS: [{region: \"GMS\", MapleVersionId: \"latest\", IsReady: true}],\r\n  KMS: [{region: \"KMS\", MapleVersionId: \"328\", IsReady: true}],\r\n  TMS: [{region: \"TMS\", MapleVersionId: \"latest\", IsReady: true}],\r\n  CMS: [{region: \"CMS\", MapleVersionId: \"latest\", IsReady: true}],\r\n  JMS: [{region: \"JMS\", MapleVersionId: \"latest\", IsReady: true}],\r\n  SEA: [{region: \"SEA\", MapleVersionId: \"latest\", IsReady: true}]\r\n}\r\n\r\nfunction toCamel(o) {\r\n  var newO, origKey, newKey, value\r\n  if (o instanceof Array) {\r\n    return o.map(function(value) {\r\n        if (typeof value === \"object\") {\r\n          value = toCamel(value)\r\n        }\r\n        return value\r\n    })\r\n  } else {\r\n    newO = {}\r\n    for (origKey in o) {\r\n      if (o.hasOwnProperty(origKey)) {\r\n        newKey = (origKey.charAt(0).toLowerCase() + origKey.slice(1) || origKey).toString()\r\n        value = o[origKey]\r\n        if (value instanceof Array || (value !== null && value.constructor === Object)) {\r\n          value = toCamel(value)\r\n        }\r\n        newO[newKey] = value\r\n      }\r\n    }\r\n  }\r\n  return newO\r\n}\r\n\r\nlet wzPromise = axios.get(`https://maplestory.io/api/wz?cache=false`)\r\n.then(response => {\r\n  let WZs = _.map(response.data.filter(wzEntry => wzEntry.isReady), wzEntry => {\r\n    return {\r\n      ...wzEntry,\r\n      region: wzEntry.region\r\n    }\r\n  })\r\n  versions = _.groupBy(WZs, 'region')\r\n\r\n  let region = localStorage['region'], version = localStorage['version']\r\n\r\n  if (!region || (version != '328' && _.findIndex(versions[region], ver => ver.mapleVersionId == version) == -1)) {\r\n    localStorage['region'] = 'KMS'\r\n    localStorage['version'] = '328'\r\n    window.location.reload()\r\n  }\r\n\r\n  console.log(versions);\r\n  return versions;\r\n})\r\n\r\nlet maps = []\r\nlet mapsFilter = null\r\nlet mapPromise = axios.get(`https://maplestory.io/api/KMS/328/map`).then(response => {\r\n      maps = _.map(response.data, map => {\r\n        return {\r\n          label: [map.streetName, map.name].join(' - '),\r\n          value: map.id\r\n        }\r\n      });\r\n      mapsFilter = createFilterOptions({options: maps})\r\n    });\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    let isOpen = (localStorage || {})['hideModal'] !== 'true'\r\n    if (isOpen === '' || isOpen === undefined || isOpen === 'undefined')\r\n      isOpen = true\r\n\r\n    // Try to recover any existing state\r\n    this.state = {\r\n      isModalOpen: isOpen,\r\n      characters: JSON.parse(localStorage['characters'] || 'false') || [false],\r\n      pets: JSON.parse(localStorage['pets'] || 'false') || [],\r\n      selectedIndex: JSON.parse(localStorage['selectedIndex'] || 'false') || 0,\r\n      selectedMap: JSON.parse(localStorage['selectedMap'] || 'false') || null,\r\n      zoom: JSON.parse(localStorage['zoom'] || 'false') || 1,\r\n      mapPosition: {x: 0, y: 0},\r\n      backgroundColor: JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"},\r\n      colorPickerOpen: false,\r\n      language: localStorage['language'] == 'undefined' ? 'en' : localStorage['language'],\r\n      music: false,\r\n      region: localStorage['region'] ? localStorage['region'] : 'KMS',\r\n      version: localStorage['version'] ? localStorage['version'] : '328',\r\n      sidebarDocked: mql.matches,\r\n      sidebarOpen: false,\r\n      sidebarRDocked: mql.matches,\r\n      sidebarROpen: false,\r\n      versions\r\n    }\r\n\r\n    if (versions.KMS.length > 1)\r\n      this.state.versions = versions\r\n    else\r\n      wzPromise.then(ver => this.setState({versions}))\r\n\r\n    if (this.state.selectedIndex < 0) this.state.selectedIndex = false;\r\n    this.state.focusRenderable = this.state.selectedIndex\r\n\r\n    // If we have a legacy character, upgrade to latest now\r\n    if (!_.isEmpty(this.state.selectedItems || {})) {\r\n      const currentCharacter = {\r\n        selectedItems: this.state.selectedItems,\r\n        skin: this.state.skin || 2000\r\n      }\r\n      if (this.state.characters[0] === false)\r\n        this.state.characters[0] = currentCharacter;\r\n      else\r\n        this.state.characters.push(currentCharacter)\r\n    }\r\n\r\n    // If we have no characters at all, gen a new shell\r\n    if (this.state.characters[0] === false)\r\n      this.state.characters[0] = this.getNewCharacter()\r\n\r\n    delete localStorage['selectedItems'];\r\n    delete localStorage['skin'];\r\n    delete localStorage['frame'];\r\n    delete localStorage['mercEars'];\r\n    delete localStorage['illiumEars'];\r\n\r\n    if (localStorage['currentCharacter']) {\r\n      this.state = JSON.parse(localStorage['currentCharacter'])\r\n      delete localStorage['currentCharacter']\r\n      localStorage['characters'] = JSON.stringify([...this.state.characters, this.state])\r\n      this.state['characters'] = [...this.state.characters, this.state]\r\n    }\r\n\r\n    this.state.characters.forEach((character, index) => {\r\n      if (!character.id) character.id = Date.now() + (index + 1)\r\n      character.type = 'character'\r\n      character.action = character.action || 'stand1'\r\n      character.frame = character.frame || 0\r\n      character.zoom = character.zoom || 1\r\n      character.emotion = character.emotion || 'default'\r\n      character.newHair = ''\r\n      character.newFace = ''\r\n      character.skin = character.skin || 2000\r\n      character.mercEars = character.mercEars || false\r\n      character.illiumEars = character.illiumEars || false\r\n      character.selectedItems = character.selectedItems || []\r\n      character.visible = character.visible || false\r\n      character.position = character.position || {x:0,y:0}\r\n      character.flipX = character.flipX || false;\r\n      character.name = character.name || '';\r\n      character.includeBackground = character.includeBackground === undefined ? true : character.includeBackground\r\n      let characterItems = _.values(toCamel(character.selectedItems)).map(item => {\r\n        if (!item.region) item.region = localStorage['region']\r\n        if (!item.version) item.version = localStorage['version']\r\n        return item\r\n      })\r\n      character.selectedItems = _.keyBy(characterItems, (item) => item.typeInfo.subCategory)\r\n      delete character.characters\r\n      delete character.otherCharacters\r\n      delete character.allCharacters\r\n    })\r\n\r\n    this.state.pets.forEach((pet, index) => {\r\n      if (!pet.id) pet.id = Date.now() + (index + 1)\r\n      pet.type = 'pet'\r\n      pet.position = pet.position || { x: 0, y: 0}\r\n      pet.summary = `https://maplestory.io/api/KMS/328/pet/${pet.petId}/${pet.animation || 'stand0'}/${pet.frame || 0}/${_.values(pet.selectedItems).map(item => item.id).join(',')}?resize=${pet.zoom || 1}`\r\n    })\r\n\r\n    if ((this.state.selectedIndex + 1) > (this.state.characters.length + this.state.pets.length) || !this.state.characters.length)\r\n      this.state.selectedIndex = false;\r\n\r\n\r\n    document.addEventListener(\"click\", this.handleClick.bind(this))\r\n\r\n    if (maps.length) this.state.mapsLoaded = true\r\n    else mapPromise.then(() => setTimeout(() => this.setState({mapsLoaded : true}), 250))\r\n    this.mediaQueryChanged = this.mediaQueryChanged.bind(this);\r\n    this.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\r\n    this.onSetRightSidebarOpen = this.onSetRightSidebarOpen.bind(this);\r\n    this.changEvent = this.changEvent.bind(this);\r\n    this.changEventEye = this.changEventEye.bind(this);\r\n  }\r\n\r\n  componentWillMount() {\r\n    mql.addListener(this.mediaQueryChanged);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    mql.removeListener(this.mediaQueryChanged);\r\n  }\r\n\r\n  onSetSidebarOpen(open) {\r\n    this.setState({ sidebarOpen: open });\r\n    if(!this.state.sidebarDocked && this.state.sidebarOpen){\r\n      this.setState({ sidebarOpen: false });\r\n    }\r\n  }\r\n\r\n  onSetRightSidebarOpen(open) {\r\n    this.setState({ sidebarROpen: open });\r\n    if(!this.state.sidebarRDocked && this.state.sidebarROpen){\r\n      this.setState({ sidebarROpen: false });\r\n    }\r\n  }\r\n\r\n  mediaQueryChanged() {\r\n    this.setState({ sidebarDocked: mql.matches, sidebarOpen: false, sidebarRDocked: mql.matches, sidebarROpen: false });\r\n  }\r\n\r\n  changeRegionVersion(region, version) {\r\n    localStorage['region'] = region\r\n    localStorage['version'] = version\r\n\r\n    // Much easier than trying to reload everything here :D\r\n    window.location.reload()\r\n  }\r\n\r\n  handleClick(e) {\r\n    let element = e.target\r\n    let found = false\r\n    while (this.state.colorPickerOpen && !found && (element = element.parentElement) != null) {\r\n      if (element.className != 'bg-color-picker-container') continue;\r\n      else {\r\n        found = true;\r\n        console.log('found bg-color-picker-container')\r\n      }\r\n    }\r\n\r\n    if (!found && this.state.colorPickerOpen) this.setState({ colorPickerOpen: false })\r\n  }\r\n\r\n  changEvent(e){\r\n    this.state.characters[this.state.selectedIndex].newHair = e;\r\n  }\r\n\r\n  changEventEye(e){\r\n    this.state.characters[this.state.selectedIndex].newFace = e;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      characters,\r\n      pets,\r\n      selectedIndex,\r\n      isModalOpen,\r\n      zoom,\r\n      summary,\r\n      selectedMap,\r\n      focusRenderable,\r\n      backgroundColor,\r\n      colorPickerOpen,\r\n      language,\r\n      music\r\n    } = this.state\r\n\r\n    const localized = Localize.getLocalized(language)\r\n\r\n    const bgColorText = `rgba(${backgroundColor.rgb.r}, ${backgroundColor.rgb.g}, ${backgroundColor.rgb.b}, ${backgroundColor.rgb.a})`\r\n\r\n    const renderables = characters.concat(pets)\r\n\r\n    return (\r\n      <div className={\"App\"}>\r\n      <div className=\"App-header\">\r\n          <span className='item-span' onClick={() => this.onSetSidebarOpen(true)}>&#9776;</span>\r\n          <span className='item-span' onClick={() => this.onSetRightSidebarOpen(true)}>&#9881;</span>\r\n        </div>\r\n        <input type=\"hidden\" id=\"rtLinkRl\"/>\r\n      { (selectedIndex !== false) ?\r\n        <Sidebar\r\n          sidebar={<ItemListing\r\n            target={renderables[selectedIndex]}\r\n            onItemSelected={this.userSelectedItem.bind(this)}\r\n            localized={localized} />}\r\n            open={this.state.sidebarOpen}\r\n          docked={this.state.sidebarDocked}\r\n          onSetOpen={this.onSetSidebarOpen}\r\n          styles={{\r\n           overlay: {\r\n             zIndex: !this.state.sidebarDocked && this.state.sidebarOpen ? 3001 : 2000,\r\n           },\r\n           sidebar: {\r\n             width: 300,\r\n             zIndex: 4000,\r\n             boxShadow: (this.state.sidebarDocked || !this.state.sidebarOpen) ? 'none' : 'rgba(0, 0, 0, 0.15) 2px 2px 2px;',\r\n           },\r\n           content: {\r\n             top: 64,\r\n           }\r\n         }}></Sidebar> : '' }\r\n         {\r\n           (selectedIndex !== false && !_.isEmpty(renderables[selectedIndex].selectedItems) ?\r\n           <Sidebar\r\n             sidebar={<EquippedItems\r\n               equippedItems={renderables[selectedIndex].selectedItems}\r\n               selectedIndex={renderables[selectedIndex]}\r\n               onRemoveItem={this.userRemovedItem.bind(this)}\r\n               name={renderables[selectedIndex].name}\r\n               skinId={renderables[selectedIndex].skin}\r\n               onUpdateItem={this.updateItem.bind(this)}\r\n               colorChage={this.changEvent}\r\n               colorEyeChage={this.changEventEye}\r\n               localized={localized}\r\n               onRemoveItems={this.userRemovedItems.bind(this)} />}\r\n               open={this.state.sidebarROpen}\r\n             docked={this.state.sidebarRDocked}\r\n             onSetOpen={this.onSetRightSidebarOpen}\r\n             pullRight={true}\r\n             shadow={false}\r\n             styles={{\r\n               overlay: {\r\n                 zIndex: !this.state.sidebarRDocked && this.state.sidebarROpen ? 3001 : 2000,\r\n               },\r\n               sidebar: {\r\n                 width: 300,\r\n                 zIndex: 4000\r\n               },\r\n               content: {\r\n                 top: 64,\r\n               }\r\n            }}></Sidebar> : '')\r\n         }\r\n        <RenderCanvas\r\n          backgroundColor={bgColorText}\r\n          zoom={zoom}\r\n          mapId={selectedMap}\r\n          renderables={renderables}\r\n          selectedRenderable={selectedIndex}\r\n          focusRenderable={focusRenderable === undefined ? selectedIndex : focusRenderable}\r\n          onUpdateRenderable={this.updateRenderable.bind(this)}\r\n          onClick={this.clickCanvas.bind(this)}\r\n          localized={localized}\r\n          onClickRenderable={this.userUpdateSelectedRenderable.bind(this)}/>\r\n\r\n        <CharacterList\r\n          renderables={renderables}\r\n          selectedIndex={selectedIndex}\r\n          onAddCharacter={this.addCharacter.bind(this)}\r\n          onAddPet={this.addPet.bind(this)}\r\n          onImportCharacter={this.importCharacter.bind(this)}\r\n          onDeleteCharacter={this.removeCharacter.bind(this)}\r\n          onCloneCharacter={this.cloneCharacter.bind(this)}\r\n          onDeletePet={this.removePet.bind(this)}\r\n          localized={localized}\r\n          onUpdateSelectedCharacter={function (renderable) {\r\n            this.userUpdateSelectedRenderable(renderable, () => {\r\n              this.setState({\r\n                focusRenderable: this.state.selectedIndex\r\n              })\r\n            })\r\n          }.bind(this)}\r\n          onUpdateCharacter={this.userUpdateCharacter.bind(this)}\r\n          onUpdatePet={this.userUpdatePet.bind(this) }/>\r\n\r\n\r\n\r\n        <NotificationContainer />\r\n        { music ? <audio src={`//maplestory.io/api/KMS/328/map/${selectedMap}/bgm`} autoPlay={true} loop={true} /> : '' }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderSettings() {\r\n    const {\r\n      characters,\r\n      pets,\r\n      selectedIndex,\r\n      isModalOpen,\r\n      zoom,\r\n      summary,\r\n      selectedMap,\r\n      focusRenderable,\r\n      backgroundColor,\r\n      colorPickerOpen,\r\n      language\r\n    } = this.state\r\n\r\n    const localized = Localize.getLocalized(language)\r\n\r\n    const bgColorText = `rgba(${backgroundColor.rgb.r}, ${backgroundColor.rgb.g}, ${backgroundColor.rgb.b}, ${backgroundColor.rgb.a})`\r\n    return (\r\n      <div className='settings-container'>\r\n        <label className='bg-color-picker-container' onClick={this.openColorPicker.bind(this)}>\r\n        Background color\r\n          <div className='bg-color-picker'>\r\n            <div className='bg-color-grid' style={{ backgroundColor: bgColorText }}></div>\r\n          </div>\r\n          { colorPickerOpen ? <SketchPicker color={bgColorText} onChange={this.onChangeColor.bind(this)} /> : '' }\r\n        </label>\r\n        <label className='canvas-zoom'>\r\n          <span>{localized.zoom}</span>\r\n          <Slider\r\n            value={zoom || 1}\r\n            min={0.25}\r\n            max={2}\r\n            step={0.25}\r\n            handle={handle}\r\n            onChange={this.changeZoom.bind(this)} />\r\n        </label>\r\n        <label className='canvas-zoom'>\r\n          <span>{localized.language}</span>\r\n          <select value={this.state.language} onChange={this.changeLanguage.bind(this)}>\r\n            <option value='en'>English</option>\r\n            <option value='jp'>Japanese</option>\r\n            <option value='kr'>Korean</option>\r\n            <option value='ch'>Chinese (Traditional)</option>\r\n            <option value='nl'>Dutch</option>\r\n            <option value='br'>Portuguese (Brazil)</option>\r\n          </select>\r\n        </label>\r\n        <div>\r\n          <div className='map-select-container'>\r\n            <VirtualizedSelect\r\n              filterOptions={mapsFilter}\r\n              isLoading={maps.length === 0}\r\n              name='map-selection'\r\n              searchable\r\n              clearable\r\n              simpleValue\r\n              value={selectedMap}\r\n              onChange={this.selectMap.bind(this)}\r\n              options={maps}\r\n              maxHeight={400}\r\n              styles={{\r\n                menuList: (styles, {data}) => {\r\n                  return {\r\n                    ...styles,\r\n                    height: '400px'\r\n                  }\r\n                },\r\n                menu: (styles, {data}) => {\r\n                  return {\r\n                    ...styles,\r\n                    height: '400px'\r\n                  }\r\n                }\r\n              }}\r\n              />\r\n          </div>\r\n        </div>\r\n        <label>\r\n          <span>{localized.region}</span>\r\n          <select value={this.state.region} onChange={(e) => this.changeRegionVersion(e.target.value, \"328\")}>\r\n            { _.keys(this.state.versions).map(versionName => <option value={versionName} key={versionName}>{versionName}</option>) }\r\n          </select>\r\n        </label>\r\n        <label>\r\n          <span>{localized.version}</span>\r\n          <select value={this.state.version} onChange={(e) => this.changeRegionVersion(this.state.region, e.target.value)}>\r\n            { this.state.versions[this.state.region].map(({mapleVersionId}) => <option value={mapleVersionId} key={mapleVersionId}>{mapleVersionId}</option>) }\r\n            <option value='328' key='328'>328</option>\r\n          </select>\r\n        </label>\r\n        <label>\r\n          <span>{localized.playMusic}</span>\r\n          <Toggle\r\n            onChange={this.toggleMusic.bind(this)}\r\n            checked={this.state.music} />\r\n        </label>\r\n        <label>\r\n          <a href='#' onClick={this.exportAllCharacters.bind(this)}>Export All Characters</a>\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  toggleMusic(e) {\r\n    this.setState({\r\n      music: !this.state.music\r\n    })\r\n  }\r\n\r\n  exportAllCharacters() {\r\n    this.state.characters.forEach(character => {\r\n      const a = document.createElement('a')\r\n      a.style = 'display: none;'\r\n      document.body.appendChild(a)\r\n\r\n      const payload = JSON.stringify(character, null, 2),\r\n        blob = new Blob([payload], {type: 'octet/stream'}),\r\n        url = window.URL.createObjectURL(blob)\r\n      a.href = url\r\n      if (character.name)\r\n        a.download = character.name + '-data.json'\r\n      else\r\n        a.download = 'character-data.json'\r\n      a.click()\r\n\r\n      window.URL.revokeObjectURL(url)\r\n      a.remove()\r\n    })\r\n  }\r\n\r\n  changeLanguage(e) {\r\n    this.setState({\r\n      language: e.target.value\r\n    })\r\n    localStorage['language'] = e.target.value\r\n  }\r\n\r\n  changeZoom(newZoom) {\r\n    this.setState({ zoom: newZoom })\r\n    localStorage['zoom'] = newZoom\r\n  }\r\n\r\n  selectMap(mapId) {\r\n    this.setState({\r\n      selectedMap: mapId\r\n    })\r\n    localStorage['selectedMap'] = mapId\r\n  }\r\n\r\n  updateRenderable(renderable, newProps) {\r\n    if (renderable.type == 'pet') this.userUpdatePet(renderable, newProps)\r\n    if (renderable.type == 'character' || renderable.type === undefined) this.userUpdateCharacter(renderable, newProps)\r\n  }\r\n\r\n  clickCanvas(e) {\r\n    if (e.target === e.currentTarget && (this.state.characters.length + this.state.pets.length) > 1) {\r\n      this.setState({ selectedIndex: false })\r\n      localStorage['selectedIndex'] = 'false'\r\n    }\r\n  }\r\n\r\n  addPet() {\r\n    var pets = [...(this.state.pets || []), this.getNewPet()]\r\n    this.setState({pets, selectedIndex: this.state.characters.length + this.state.pets.length})\r\n    localStorage['pets'] = JSON.stringify(pets)\r\n  }\r\n\r\n  removePet(pet) {\r\n    var pets = this.state.pets.filter(c => c != pet)\r\n    this.setState({ pets, selectedIndex: false, zoom: 1 }) // Unselect any pet in case we delete the last pet\r\n    localStorage['pets'] = JSON.stringify(pets)\r\n    localStorage['selectedIndex'] = false\r\n    localStorage['zoom'] = 1\r\n  }\r\n\r\n  getNewPet() {\r\n    const andysFavePetIds = [5000000, 5000001, 5000002, 5000003, 5000004, 5000005]\r\n    const petId = andysFavePetIds[Math.floor(Math.random() * andysFavePetIds.length)]\r\n    return {\r\n      petId,\r\n      selectedItems: [],\r\n      id: Date.now(),\r\n      type: 'pet',\r\n      summary: `https://maplestory.io/api/KMS/328/pet/${petId}/stand0`,\r\n      animation: 'stand0',\r\n      visible: true,\r\n      frame: 0,\r\n      zoom: 1,\r\n      fhSnap: true,\r\n      position: { x:0, y:0 }\r\n    }\r\n  }\r\n\r\n  importCharacter(e) {\r\n    let target = e.target\r\n    let importAll = Array.prototype.map.call(target.files, file => {\r\n      return new Promise((res, rej) => {\r\n        let extension = file.name.substr(file.name.lastIndexOf('.') + 1).toLowerCase()\r\n        if (extension != 'json') {\r\n          console.warn('Not valid JSON file')\r\n          return\r\n        }\r\n\r\n        let reader = new FileReader()\r\n        reader.onload = function (ev) {\r\n          let payload = ev.target.result\r\n          let data = JSON.parse(payload)\r\n\r\n          res()\r\n          if (!data.id || data.type != 'character' || !data.selectedItems) return\r\n\r\n          data.id = Date.now()\r\n\r\n          let characters = [\r\n            ...this.state.characters,\r\n            data\r\n          ]\r\n          this.setState({\r\n            characters,\r\n            selectedIndex: this.state.characters.length\r\n          })\r\n          localStorage['characters'] = JSON.stringify(characters)\r\n        }.bind(this)\r\n\r\n        reader.readAsText(file, 'UTF8')\r\n      })\r\n    })\r\n\r\n    Promise.all(importAll).then(() => {\r\n      target.value = ''\r\n    })\r\n  }\r\n\r\n  addCharacter() {\r\n    var characters = [ ...this.state.characters, this.getNewCharacter() ]\r\n    this.setState({ characters, selectedIndex: this.state.characters.length })\r\n    localStorage['characters'] = JSON.stringify(characters)\r\n  }\r\n\r\n  removeCharacter(character) {\r\n    var characters = this.state.characters.filter(c => c != character)\r\n    this.setState({ characters, selectedIndex: false, zoom: 1 }) // Unselect any character in case we delete the last character\r\n    localStorage['characters'] = JSON.stringify(characters)\r\n    localStorage['selectedIndex'] = false\r\n    localStorage['zoom'] = 1\r\n  }\r\n\r\n  cloneCharacter(character) {\r\n    let characters = [\r\n      ...this.state.characters\r\n    ]\r\n\r\n    let indexOfCharacter = characters.indexOf(character)\r\n    characters.splice(indexOfCharacter + 1, 0, {\r\n      ...character,\r\n      id: Date.now(),\r\n      position: {\r\n        x: character.position.x + 100,\r\n        y: character.position.y\r\n      }\r\n    })\r\n    let newCharacterIndex = indexOfCharacter + 1\r\n\r\n    this.setState({ characters, selectedIndex: newCharacterIndex, focusRenderable: newCharacterIndex + 1 })\r\n    localStorage['selectedIndex'] = newCharacterIndex\r\n    localStorage['characters'] = JSON.stringify(characters)\r\n  }\r\n\r\n  userUpdateSelectedRenderable(renderable, callback) {\r\n    let selectedIndex = this.state.characters.indexOf(renderable)\r\n    if (selectedIndex == -1) {\r\n      selectedIndex = this.state.pets.indexOf(renderable)\r\n      if (selectedIndex != -1) selectedIndex += this.state.characters.length\r\n    }\r\n    this.setState({\r\n      selectedIndex,\r\n      zoom: 1\r\n    }, callback)\r\n    localStorage['selectedIndex'] = selectedIndex\r\n    localStorage['zoom'] = 1\r\n  }\r\n\r\n  userUpdatePet(pet, newProps) {\r\n    if (pet.locked === true && newProps.locked === undefined) {\r\n      throttledErrorNotification('Pet is locked and can not be modified', '', 1000)\r\n      return;\r\n    }\r\n\r\n    const pets = [...this.state.pets]\r\n    const petIndex = pets.indexOf(pet)\r\n\r\n    const currentPet = pets[petIndex] = {\r\n      ...pet,\r\n      ...newProps\r\n    }\r\n\r\n    currentPet.summary = `https://maplestory.io/api/KMS/328/pet/${currentPet.petId}/${currentPet.animation || 'stand0'}/${currentPet.frame || 0}/${_.values(currentPet.selectedItems).map(item => item.id).join(',')}?resize=${currentPet.zoom || 1}`\r\n\r\n    this.setState({\r\n        pets: pets\r\n    })\r\n    localStorage['pets'] = JSON.stringify(pets)\r\n  }\r\n\r\n  userUpdateCharacter(character, newProps) {\r\n    if (character.locked === true && newProps.locked === undefined) {\r\n      throttledErrorNotification('Character is locked and can not be modified', '', 1000)\r\n      return;\r\n    }\r\n\r\n    const characters = [...this.state.characters]\r\n    const characterIndex = characters.indexOf(character)\r\n\r\n    const currentCharacter = characters[characterIndex] = {\r\n      ...character,\r\n      ...newProps\r\n    }\r\n\r\n    const itemsWithEmotion = _.values(currentCharacter.selectedItems)\r\n      .filter(item => item.id && (item.visible === undefined || item.visible))\r\n      .map(item => {\r\n        var itemEntry = item.id >= 20000 && item.id <= 29999 ? `${item.id}:${currentCharacter.emotion}` : item.id\r\n        if (item.hue) itemEntry = itemEntry + ';' + item.hue\r\n        return itemEntry\r\n      });\r\n\r\n    const { backgroundColor } = this.state\r\n    const bgColorText = `${backgroundColor.rgb.r},${backgroundColor.rgb.g},${backgroundColor.rgb.b},${backgroundColor.rgb.a}`\r\n\r\n    this.setState({\r\n        characters: characters\r\n    })\r\n    localStorage['characters'] = JSON.stringify(characters)\r\n  }\r\n\r\n  getNewCharacter() {\r\n    return {\r\n      id: Date.now(),\r\n      type: 'character',\r\n      action: 'stand1',\r\n      emotion: 'default',\r\n      skin: 2000,\r\n      zoom: 1,\r\n      frame: 0,\r\n      mercEars: false,\r\n      illiumEars: false,\r\n      selectedItems: [],\r\n      visible: true,\r\n      position: {x: 0, y: 0},\r\n      fhSnap: true\r\n    }\r\n  }\r\n\r\n  updateSelectedRenderable(props) {\r\n    if (this.state.selectedIndex+1 > this.state.characters.length)\r\n      this.userUpdatePet(this.state.pets[this.state.selectedIndex - this.state.characters.length], props)\r\n    else\r\n      this.userUpdateCharacter(this.state.characters[this.state.selectedIndex], props)\r\n  }\r\n\r\n  setModalOpen (isModalOpen) {\r\n    this.setState({ isModalOpen })\r\n  }\r\n\r\n  userSelectedItem (item) {\r\n    let selectedRenderable = null\r\n    if (this.state.selectedIndex+1 > this.state.characters.length) selectedRenderable = this.state.pets[this.state.selectedIndex - this.state.characters.length]\r\n    else selectedRenderable = this.state.characters[this.state.selectedIndex]\r\n\r\n    item.region = localStorage['region']\r\n    item.version = localStorage['version']\r\n\r\n    let selectedItems = {\r\n      ...selectedRenderable.selectedItems,\r\n    }\r\n\r\n    if (item.typeInfo) {\r\n      if (item.typeInfo.subCategory === 'Overall') {\r\n        delete selectedItems['Top']\r\n        delete selectedItems['Bottom']\r\n      }\r\n    }\r\n\r\n    if (item.similar) {\r\n      item = { ...item }\r\n      delete item['similar']\r\n    }\r\n\r\n    if (item.typeInfo) {\r\n      selectedItems[item.typeInfo.subCategory] = item\r\n    }\r\n    this.updateItems(selectedItems)\r\n  }\r\n\r\n  userRemovedItem (item) {\r\n    let selectedItems = {\r\n      ...this.state.characters[this.state.selectedIndex].selectedItems,\r\n    }\r\n    delete selectedItems[item.typeInfo.subCategory]\r\n    this.updateItems(selectedItems);\r\n  }\r\n\r\n  userRemovedItems () {\r\n    let selectedItems = {}\r\n    this.updateItems(selectedItems);\r\n  }\r\n\r\n  updateItem (item, newProps) {\r\n    let selectedItems = {\r\n      ...this.state.characters[this.state.selectedIndex].selectedItems,\r\n    }\r\n    selectedItems[item.typeInfo.subCategory] = {\r\n      ...item,\r\n      ...newProps\r\n    }\r\n    this.updateItems(selectedItems);\r\n  }\r\n\r\n  updateItems (selectedItems) {\r\n    console.log('New Items: ', selectedItems)\r\n    this.updateSelectedRenderable({\r\n      selectedItems\r\n    })\r\n  }\r\n\r\n  onChangeColor(backgroundColor, event) {\r\n    const bgColorText = `${backgroundColor.rgb.r},${backgroundColor.rgb.g},${backgroundColor.rgb.b},${backgroundColor.rgb.a}`\r\n\r\n    const characters = this.state.characters.map((character, index) => {\r\n      const itemsWithEmotion = _.values(character.selectedItems)\r\n      .filter(item => item.id && (item.visible === undefined || item.visible))\r\n      .map(item => {\r\n        var itemEntry = item.id >= 20000 && item.id <= 29999 ? `${item.id}:${character.emotion}` : item.id\r\n        if (item.hue) itemEntry = itemEntry + ';' + item.hue\r\n        return itemEntry\r\n      });\r\n\r\n      return {\r\n        ...character\r\n      }\r\n    });\r\n\r\n    this.setState({ backgroundColor, characters })\r\n    localStorage['backgroundColor'] = JSON.stringify(backgroundColor)\r\n  }\r\n\r\n  openColorPicker() {\r\n    this.setState({ colorPickerOpen: true })\r\n  }\r\n}\r\n\r\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\r\nconst Range = createSliderWithTooltip(Slider.Range);\r\nconst Handle = Slider.Handle;\r\n\r\nconst handle = (props) => {\r\n  const { value, dragging, index, ...restProps } = props;\r\n  return (\r\n    <RcTooltip\r\n      prefixCls=\"rc-slider-tooltip\"\r\n      overlay={value}\r\n      visible={dragging}\r\n      placement=\"top\"\r\n      style={{border: \"solid 2px hsl(\"+value+\", 53%, 53%)\"}}\r\n      key={index}\r\n    >\r\n      <Handle value={value} {...restProps} />\r\n    </RcTooltip>\r\n  );\r\n};\r\n\r\nexport default App\r\n","import \"react-app-polyfill/ie11\";\r\nimport \"react-app-polyfill/stable\";\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport registerServiceWorker, { unregister } from './registerServiceWorker';\r\nimport './index.css';\r\n\r\nwindow.generateAvatarLink = function (character, linkType) {\r\n  let itemEntries = Object.values(character.selectedItems).filter(item => item.id && (item.visible === undefined || item.visible)).map(item => {\r\n    let itemEntry = {\r\n      itemId: Number(item.id)\r\n    }\r\n\r\n    if ((item.id >= 20000 && item.id < 30000) || (item.id >= 1010000 && item.id < 1020000)) itemEntry.animationName = character.emotion\r\n    if (item.region && item.region.toLowerCase() != 'gms') itemEntry.region = item.region\r\n    if (item.version && item.version.toLowerCase() != 'latest') itemEntry.version = item.version\r\n    if (item.hue) itemEntry.hue = item.hue\r\n    if (item.saturation != 1) itemEntry.saturation = item.saturation\r\n    if (item.contrast != 1) itemEntry.contrast = item.contrast\r\n    if (item.brightness != 1) itemEntry.brightness = item.brightness\r\n    if (item.alpha != 1) itemEntry.alpha = item.alpha\r\n    if (item.islot) itemEntry.islot = item.islot\r\n    if (item.vslot) itemEntry.vslot = item.vslot\r\n\r\n    return itemEntry\r\n  })\r\n\r\n  let backgroundColor = JSON.parse(localStorage['backgroundColor'] || false) || {\"hsl\":{\"h\":0,\"s\":0,\"l\":0,\"a\":0},\"hex\":\"transparent\",\"rgb\":{\"r\":0,\"g\":0,\"b\":0,\"a\":0},\"hsv\":{\"h\":0,\"s\":0,\"v\":0,\"a\":0},\"oldHue\":0,\"source\":\"rgb\"}\r\n  const bgColorText = `${backgroundColor.rgb.r},${backgroundColor.rgb.g},${backgroundColor.rgb.b},${backgroundColor.rgb.a}`\r\n\r\n  let itemEntriesPayload = JSON.stringify([\r\n    ...itemEntries,\r\n    { itemId: Number(character.skin), region: localStorage['region'], version: localStorage['version'] },\r\n    { itemId: Number(character.skin) + 10000, region: localStorage['region'], version: localStorage['version'] }\r\n  ])\r\n  itemEntriesPayload = encodeURIComponent(itemEntriesPayload.substr(1, itemEntriesPayload.length - 2))\r\n  return `https://maplestory.io/api/character/${itemEntriesPayload}/${linkType ? linkType : (`${character.action}/${character.frame}`)}?showears=${character.mercEars}&showLefEars=${character.illiumEars}&showHighLefEars=${character.highFloraEars}&resize=${character.zoom}&name=${encodeURI(character.name || '')}&flipX=${character.flipX}` + (character.includeBackground ? `&bgColor=${bgColorText}` : '')\r\n}\r\n\r\nconst isOnDev = window.location.host.indexOf('.dev') !== -1\r\nconst isOnDomain = window.location.host.indexOf('.design') !== -1\r\nconst isOnHttps = window.location.protocol.indexOf('https') !== -1\r\nif (isOnDomain && !isOnHttps)\r\n  window.location.protocol = 'https'\r\nelse {\r\n  ReactDOM.render(<App />, document.getElementById('root'));\r\n  // if (!isOnDev) registerServiceWorker();\r\n  unregister()\r\n}\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then(registration => {\r\n          registration.onupdatefound = () => {\r\n            const installingWorker = registration.installing;\r\n            installingWorker.onstatechange = () => {\r\n              if (installingWorker.state === 'installed') {\r\n                if (navigator.serviceWorker.controller) {\r\n                  // At this point, the old content will have been purged and\r\n                  // the fresh content will have been added to the cache.\r\n                  // It's the perfect time to display a \"New content is\r\n                  // available; please refresh.\" message in your web app.\r\n                  console.log('New content is available; please refresh.');\r\n                } else {\r\n                  // At this point, everything has been precached.\r\n                  // It's the perfect time to display a\r\n                  // \"Content is cached for offline use.\" message.\r\n                  console.log('Content is cached for offline use.');\r\n                }\r\n              }\r\n            };\r\n          };\r\n        })\r\n        .catch(error => {\r\n          console.error('Error during service worker registration:', error);\r\n        });\r\n    });\r\n  }\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":""}